function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t={exports:{}},n={},r={exports:{}},i={},s=Symbol.for("react.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,v={};function w(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||y}function b(){}function k(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||y}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=w.prototype;var C=k.prototype=new b;C.constructor=k,_(C,w.prototype),C.isPureReactComponent=!0;var S=Array.isArray,I=Object.prototype.hasOwnProperty,T={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,i={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)I.call(t,r)&&!E.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:s,type:e,key:a,ref:o,props:i,_owner:T.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===s}var P=/\/+/g;function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case s:case a:l=!0}}if(l)return i=i(l=e),e=""===r?"."+R(l,0):r,S(i)?(n="",null!=e&&(n=e.replace(P,"$&/")+"/"),A(i,t,n,"",function(e){return e})):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(P,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=""===r?".":r+":",S(e))for(var c=0;c<e.length;c++){var u=r+R(o=e[c],c);l+=A(o,t,n,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=g&&e[g]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=A(o=o.value,t,n,u=r+R(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},M={transition:null},j={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:M,ReactCurrentOwner:T};function F(){throw Error("act(...) is not supported in production builds of React.")}i.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},i.Component=w,i.Fragment=o,i.Profiler=c,i.PureComponent=k,i.StrictMode=l,i.Suspense=f,i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,i.act=F,i.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=T.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)I.call(t,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:s,type:e.type,key:i,ref:a,props:r,_owner:o}},i.createContext=function(e){return(e={$$typeof:d,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},i.createElement=x,i.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},i.createRef=function(){return{current:null}},i.forwardRef=function(e){return{$$typeof:h,render:e}},i.isValidElement=N,i.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:D}},i.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},i.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},i.unstable_act=F,i.useCallback=function(e,t){return L.current.useCallback(e,t)},i.useContext=function(e){return L.current.useContext(e)},i.useDebugValue=function(){},i.useDeferredValue=function(e){return L.current.useDeferredValue(e)},i.useEffect=function(e,t){return L.current.useEffect(e,t)},i.useId=function(){return L.current.useId()},i.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},i.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},i.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},i.useMemo=function(e,t){return L.current.useMemo(e,t)},i.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},i.useRef=function(e){return L.current.useRef(e)},i.useState=function(e){return L.current.useState(e)},i.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},i.useTransition=function(){return L.current.useTransition()},i.version="18.3.1",r.exports=i;var U=r.exports;const z=e(U);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W=U,$=Symbol.for("react.element"),B=Symbol.for("react.fragment"),q=Object.prototype.hasOwnProperty,V=W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H={key:!0,ref:!0,__self:!0,__source:!0};function G(e,t,n){var r,i={},s=null,a=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(a=t.ref),t)q.call(t,r)&&!H.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:$,type:e,key:s,ref:a,props:i,_owner:V.current}}n.Fragment=B,n.jsx=G,n.jsxs=G,t.exports=n;var K=t.exports,Q={},Y={exports:{}},J={},X={exports:{}},Z={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,_="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function w(e){if(m=!1,v(e),!p)if(null!==n(l))p=!0,A(b);else{var t=n(c);null!==t&&O(w,t.startTime-e)}}function b(t,i){p=!1,m&&(m=!1,y(I),I=-1),f=!0;var s=h;try{for(v(i),d=n(l);null!==d&&(!(d.expirationTime>i)||t&&!x());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var o=a(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?d.callback=o:d===n(l)&&r(l),v(i)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&O(w,g.startTime-i),u=!1}return u}finally{d=null,h=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,S=null,I=-1,T=5,E=-1;function x(){return!(e.unstable_now()-E<T)}function N(){if(null!==S){var t=e.unstable_now();E=t;var n=!0;try{n=S(!0,t)}finally{n?k():(C=!1,S=null)}}else C=!1}if("function"==typeof _)k=function(){_(N)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,k=function(){R.postMessage(null)}}else k=function(){g(N,0)};function A(e){S=e,C||(C=!0,k())}function O(t,n){I=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,A(b))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,s){var a=e.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?a+s:a:s=a,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(r.sortIndex=s,t(c,r),null===n(l)&&r===n(c)&&(m?(y(I),I=-1):m=!0,O(w,s-a))):(r.sortIndex=o,t(l,r),p||f||(p=!0,A(b))),r},e.unstable_shouldYield=x,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(Z),X.exports=Z;var ee=X.exports,te=U,ne=ee;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ie=new Set,se={};function ae(e,t){oe(e,t),oe(e+"Capture",t)}function oe(e,t){for(se[e]=t,e=0;e<t.length;e++)ie.add(t[e])}var le=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ce=Object.prototype.hasOwnProperty,ue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,de={},he={};function fe(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pe[e]=new fe(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pe[t]=new fe(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){pe[e]=new fe(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pe[e]=new fe(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pe[e]=new fe(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){pe[e]=new fe(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){pe[e]=new fe(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){pe[e]=new fe(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){pe[e]=new fe(e,5,!1,e.toLowerCase(),null,!1,!1)});var me=/[\-:]([a-z])/g;function ge(e){return e[1].toUpperCase()}function ye(e,t,n,r){var i=pe.hasOwnProperty(t)?pe[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ce.call(he,e)||!ce.call(de,e)&&(ue.test(e)?he[e]=!0:(de[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(me,ge);pe[t]=new fe(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(me,ge);pe[t]=new fe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(me,ge);pe[t]=new fe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){pe[e]=new fe(e,1,!1,e.toLowerCase(),null,!1,!1)}),pe.xlinkHref=new fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){pe[e]=new fe(e,1,!1,e.toLowerCase(),null,!0,!0)});var _e=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ve=Symbol.for("react.element"),we=Symbol.for("react.portal"),be=Symbol.for("react.fragment"),ke=Symbol.for("react.strict_mode"),Ce=Symbol.for("react.profiler"),Se=Symbol.for("react.provider"),Ie=Symbol.for("react.context"),Te=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),Ae=Symbol.iterator;function Oe(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Ae&&e[Ae]||e["@@iterator"])?e:null}var De,Le=Object.assign;function Me(e){if(void 0===De)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);De=t&&t[1]||""}return"\n"+De+e}var je=!1;function Fe(e,t){if(!e||je)return"";je=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{je=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Me(e):""}function Ue(e){switch(e.tag){case 5:return Me(e.type);case 16:return Me("Lazy");case 13:return Me("Suspense");case 19:return Me("SuspenseList");case 0:case 2:case 15:return e=Fe(e.type,!1);case 11:return e=Fe(e.type.render,!1);case 1:return e=Fe(e.type,!0);default:return""}}function ze(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case be:return"Fragment";case we:return"Portal";case Ce:return"Profiler";case ke:return"StrictMode";case Ee:return"Suspense";case xe:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ie:return(e.displayName||"Context")+".Consumer";case Se:return(e._context.displayName||"Context")+".Provider";case Te:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Ne:return null!==(t=e.displayName||null)?t:ze(e.type)||"Memo";case Pe:t=e._payload,e=e._init;try{return ze(e(t))}catch(n){}}return null}function We(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(t);case 8:return t===ke?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function $e(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function qe(e){e._valueTracker||(e._valueTracker=function(e){var t=Be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function He(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ge(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ke(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$e(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Qe(e,t){null!=(t=t.checked)&&ye(e,"checked",t,!1)}function Ye(e,t){Qe(e,t);var n=$e(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Xe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xe(e,t.type,$e(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Je(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Xe(e,t,n){"number"===t&&He(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ze=Array.isArray;function et(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$e(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function tt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(re(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nt(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(re(92));if(Ze(n)){if(1<n.length)throw Error(re(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$e(n)}}function rt(e,t){var n=$e(t.value),r=$e(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function it(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function st(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?st(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ot,lt,ct=(lt=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ot=ot||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ot.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return lt(e,t)})}:lt);function ut(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ht=["Webkit","ms","Moz","O"];function ft(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||dt.hasOwnProperty(e)&&dt[e]?(""+t).trim():t+"px"}function pt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ft(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(dt).forEach(function(e){ht.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dt[t]=dt[e]})});var mt=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gt(e,t){if(t){if(mt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(re(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(re(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(re(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(re(62))}}function yt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function vt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var wt=null,bt=null,kt=null;function Ct(e){if(e=ys(e)){if("function"!=typeof wt)throw Error(re(280));var t=e.stateNode;t&&(t=vs(t),wt(e.stateNode,e.type,t))}}function St(e){bt?kt?kt.push(e):kt=[e]:bt=e}function It(){if(bt){var e=bt,t=kt;if(kt=bt=null,Ct(e),t)for(e=0;e<t.length;e++)Ct(t[e])}}function Tt(e,t){return e(t)}function Et(){}var xt=!1;function Nt(e,t,n){if(xt)return e(t,n);xt=!0;try{return Tt(e,t,n)}finally{xt=!1,(null!==bt||null!==kt)&&(Et(),It())}}function Pt(e,t){var n=e.stateNode;if(null===n)return null;var r=vs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(re(231,t,typeof n));return n}var Rt=!1;if(le)try{var At={};Object.defineProperty(At,"passive",{get:function(){Rt=!0}}),window.addEventListener("test",At,At),window.removeEventListener("test",At,At)}catch(lt){Rt=!1}function Ot(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Dt=!1,Lt=null,Mt=!1,jt=null,Ft={onError:function(e){Dt=!0,Lt=e}};function Ut(e,t,n,r,i,s,a,o,l){Dt=!1,Lt=null,Ot.apply(Ft,arguments)}function zt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Wt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $t(e){if(zt(e)!==e)throw Error(re(188))}function Bt(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=zt(e)))throw Error(re(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return $t(i),e;if(s===r)return $t(i),t;s=s.sibling}throw Error(re(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(3!==n.tag)throw Error(re(188));return n.stateNode.current===n?e:t}(e))?qt(e):null}function qt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qt(e);if(null!==t)return t;e=e.sibling}return null}var Vt=ne.unstable_scheduleCallback,Ht=ne.unstable_cancelCallback,Gt=ne.unstable_shouldYield,Kt=ne.unstable_requestPaint,Qt=ne.unstable_now,Yt=ne.unstable_getCurrentPriorityLevel,Jt=ne.unstable_ImmediatePriority,Xt=ne.unstable_UserBlockingPriority,Zt=ne.unstable_NormalPriority,en=ne.unstable_LowPriority,tn=ne.unstable_IdlePriority,nn=null,rn=null;var sn=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(an(e)/on|0)|0},an=Math.log,on=Math.LN2;var ln=64,cn=4194304;function un(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=un(o):0!==(s&=a)&&(r=un(s))}else 0!==(a=n&~i)?r=un(a):0!==s&&(r=un(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-sn(t)),r|=e[n],t&=~i;return r}function hn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function fn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pn(){var e=ln;return!(4194240&(ln<<=1))&&(ln=64),e}function mn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-sn(t)]=n}function yn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-sn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _n=0;function vn(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var wn,bn,kn,Cn,Sn,In=!1,Tn=[],En=null,xn=null,Nn=null,Pn=new Map,Rn=new Map,An=[],On="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dn(e,t){switch(e){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":Pn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(t.pointerId)}}function Ln(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=ys(t))&&bn(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mn(e){var t=gs(e.target);if(null!==t){var n=zt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Wt(n)))return e.blockedOn=t,void Sn(e.priority,function(){kn(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ys(n))&&bn(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_t=r,n.target.dispatchEvent(r),_t=null,t.shift()}return!0}function Fn(e,t,n){jn(e)&&n.delete(t)}function Un(){In=!1,null!==En&&jn(En)&&(En=null),null!==xn&&jn(xn)&&(xn=null),null!==Nn&&jn(Nn)&&(Nn=null),Pn.forEach(Fn),Rn.forEach(Fn)}function zn(e,t){e.blockedOn===t&&(e.blockedOn=null,In||(In=!0,ne.unstable_scheduleCallback(ne.unstable_NormalPriority,Un)))}function Wn(e){function t(t){return zn(t,e)}if(0<Tn.length){zn(Tn[0],e);for(var n=1;n<Tn.length;n++){var r=Tn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==En&&zn(En,e),null!==xn&&zn(xn,e),null!==Nn&&zn(Nn,e),Pn.forEach(t),Rn.forEach(t),n=0;n<An.length;n++)(r=An[n]).blockedOn===e&&(r.blockedOn=null);for(;0<An.length&&null===(n=An[0]).blockedOn;)Mn(n),null===n.blockedOn&&An.shift()}var $n=_e.ReactCurrentBatchConfig,Bn=!0;function qn(e,t,n,r){var i=_n,s=$n.transition;$n.transition=null;try{_n=1,Hn(e,t,n,r)}finally{_n=i,$n.transition=s}}function Vn(e,t,n,r){var i=_n,s=$n.transition;$n.transition=null;try{_n=4,Hn(e,t,n,r)}finally{_n=i,$n.transition=s}}function Hn(e,t,n,r){if(Bn){var i=Kn(e,t,n,r);if(null===i)$i(e,t,r,Gn,n),Dn(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return En=Ln(En,e,t,n,r,i),!0;case"dragenter":return xn=Ln(xn,e,t,n,r,i),!0;case"mouseover":return Nn=Ln(Nn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pn.set(s,Ln(Pn.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rn.set(s,Ln(Rn.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dn(e,r),4&t&&-1<On.indexOf(e)){for(;null!==i;){var s=ys(i);if(null!==s&&wn(s),null===(s=Kn(e,t,n,r))&&$i(e,t,r,Gn,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else $i(e,t,r,null,n)}}var Gn=null;function Kn(e,t,n,r){if(Gn=null,null!==(e=gs(e=vt(r))))if(null===(t=zt(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Wt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gn=e,null}function Qn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yt()){case Jt:return 1;case Xt:return 4;case Zt:case en:return 16;case tn:return 536870912;default:return 16}default:return 16}}var Yn=null,Jn=null,Xn=null;function Zn(){if(Xn)return Xn;var e,t,n=Jn,r=n.length,i="value"in Yn?Yn.value:Yn.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Xn=i.slice(e,1<t?1-t:void 0)}function er(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tr(){return!0}function nr(){return!1}function rr(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tr:nr,this.isPropagationStopped=nr,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),t}var ir,sr,ar,or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=rr(or),cr=Le({},or,{view:0,detail:0}),ur=rr(cr),dr=Le({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&"mousemove"===e.type?(ir=e.screenX-ar.screenX,sr=e.screenY-ar.screenY):sr=ir=0,ar=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),hr=rr(dr),fr=rr(Le({},dr,{dataTransfer:0})),pr=rr(Le({},cr,{relatedTarget:0})),mr=rr(Le({},or,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=Le({},or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=rr(gr),_r=rr(Le({},or,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},br={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=br[e])&&!!t[e]}function Cr(){return kr}var Sr=Le({},cr,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=er(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cr,charCode:function(e){return"keypress"===e.type?er(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?er(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ir=rr(Sr),Tr=rr(Le({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=rr(Le({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cr})),xr=rr(Le({},or,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nr=Le({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=rr(Nr),Rr=[9,13,27,32],Ar=le&&"CompositionEvent"in window,Or=null;le&&"documentMode"in document&&(Or=document.documentMode);var Dr=le&&"TextEvent"in window&&!Or,Lr=le&&(!Ar||Or&&8<Or&&11>=Or),Mr=String.fromCharCode(32),jr=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Rr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Wr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wr[e.type]:"textarea"===t}function Br(e,t,n,r){St(r),0<(t=qi(t,"onChange")).length&&(n=new lr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qr=null,Vr=null;function Hr(e){Mi(e,0)}function Gr(e){if(Ve(_s(e)))return e}function Kr(e,t){if("change"===e)return t}var Qr=!1;if(le){var Yr;if(le){var Jr="oninput"in document;if(!Jr){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),Jr="function"==typeof Xr.oninput}Yr=Jr}else Yr=!1;Qr=Yr&&(!document.documentMode||9<document.documentMode)}function Zr(){qr&&(qr.detachEvent("onpropertychange",ei),Vr=qr=null)}function ei(e){if("value"===e.propertyName&&Gr(Vr)){var t=[];Br(t,Vr,e,vt(e)),Nt(Hr,t)}}function ti(e,t,n){"focusin"===e?(Zr(),Vr=n,(qr=t).attachEvent("onpropertychange",ei)):"focusout"===e&&Zr()}function ni(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gr(Vr)}function ri(e,t){if("click"===e)return Gr(t)}function ii(e,t){if("input"===e||"change"===e)return Gr(t)}var si="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ai(e,t){if(si(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ce.call(t,i)||!si(e[i],t[i]))return!1}return!0}function oi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function li(e,t){var n,r=oi(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=oi(r)}}function ci(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ci(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ui(){for(var e=window,t=He();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=He((e=t.contentWindow).document)}return t}function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hi(e){var t=ui(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ci(n.ownerDocument.documentElement,n)){if(null!==r&&di(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=li(n,s);var a=li(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fi=le&&"documentMode"in document&&11>=document.documentMode,pi=null,mi=null,gi=null,yi=!1;function _i(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==pi||pi!==He(r)||("selectionStart"in(r=pi)&&di(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gi&&ai(gi,r)||(gi=r,0<(r=qi(mi,"onSelect")).length&&(t=new lr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pi)))}function vi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:vi("Animation","AnimationEnd"),animationiteration:vi("Animation","AnimationIteration"),animationstart:vi("Animation","AnimationStart"),transitionend:vi("Transition","TransitionEnd")},bi={},ki={};function Ci(e){if(bi[e])return bi[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in ki)return bi[e]=n[t];return e}le&&(ki=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Si=Ci("animationend"),Ii=Ci("animationiteration"),Ti=Ci("animationstart"),Ei=Ci("transitionend"),xi=new Map,Ni="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(e,t){xi.set(e,t),ae(t,[e])}for(var Ri=0;Ri<Ni.length;Ri++){var Ai=Ni[Ri];Pi(Ai.toLowerCase(),"on"+(Ai[0].toUpperCase()+Ai.slice(1)))}Pi(Si,"onAnimationEnd"),Pi(Ii,"onAnimationIteration"),Pi(Ti,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(Ei,"onTransitionEnd"),oe("onMouseEnter",["mouseout","mouseover"]),oe("onMouseLeave",["mouseout","mouseover"]),oe("onPointerEnter",["pointerout","pointerover"]),oe("onPointerLeave",["pointerout","pointerover"]),ae("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ae("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ae("onBeforeInput",["compositionend","keypress","textInput","paste"]),ae("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ae("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ae("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Di=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function Li(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,o,l){if(Ut.apply(this,arguments),Dt){if(!Dt)throw Error(re(198));var c=Lt;Dt=!1,Lt=null,Mt||(Mt=!0,jt=c)}}(r,t,void 0,e),e.currentTarget=null}function Mi(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Li(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Li(i,o,c),s=l}}}if(Mt)throw e=jt,Mt=!1,jt=null,e}function ji(e,t){var n=t[fs];void 0===n&&(n=t[fs]=new Set);var r=e+"__bubble";n.has(r)||(Wi(t,e,2,!1),n.add(r))}function Fi(e,t,n){var r=0;t&&(r|=4),Wi(n,e,r,t)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function zi(e){if(!e[Ui]){e[Ui]=!0,ie.forEach(function(t){"selectionchange"!==t&&(Di.has(t)||Fi(t,!1,e),Fi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ui]||(t[Ui]=!0,Fi("selectionchange",!1,t))}}function Wi(e,t,n,r){switch(Qn(t)){case 1:var i=qn;break;case 4:i=Vn;break;default:i=Hn}n=i.bind(null,t,n,e),i=void 0,!Rt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $i(e,t,n,r,i){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=gs(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Nt(function(){var r=s,i=vt(n),a=[];e:{var o=xi.get(e);if(void 0!==o){var l=lr,c=e;switch(e){case"keypress":if(0===er(n))break e;case"keydown":case"keyup":l=Ir;break;case"focusin":c="focus",l=pr;break;case"focusout":c="blur",l=pr;break;case"beforeblur":case"afterblur":l=pr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Er;break;case Si:case Ii:case Ti:l=mr;break;case Ei:l=xr;break;case"scroll":l=ur;break;case"wheel":l=Pr;break;case"copy":case"cut":case"paste":l=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tr}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pt(p,h))&&u.push(Bi(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===_t||!(c=n.relatedTarget||n.fromElement)||!gs(c)&&!c[hs])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?gs(c):null)&&(c!==(d=zt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=hr,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tr,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:_s(l),f=null==c?o:_s(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,gs(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Vi(f))p++;for(f=0,m=h;m;m=Vi(m))f++;for(;0<p-f;)u=Vi(u),p--;for(;0<f-p;)h=Vi(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Vi(u),h=Vi(h)}u=null}else u=null;null!==l&&Hi(a,o,l,u,!1),null!==c&&null!==d&&Hi(a,d,c,u,!0)}if("select"===(l=(o=r?_s(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Kr;else if($r(o))if(Qr)g=ii;else{g=ni;var y=ti}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ri);switch(g&&(g=g(e,r))?Br(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&Xe(o,"number",o.value)),y=r?_s(r):window,e){case"focusin":($r(y)||"true"===y.contentEditable)&&(pi=y,mi=r,gi=null);break;case"focusout":gi=mi=pi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,_i(a,n,i);break;case"selectionchange":if(fi)break;case"keydown":case"keyup":_i(a,n,i)}var _;if(Ar)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else zr?Fr(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Lr&&"ko"!==n.locale&&(zr||"onCompositionStart"!==v?"onCompositionEnd"===v&&zr&&(_=Zn()):(Jn="value"in(Yn=i)?Yn.value:Yn.textContent,zr=!0)),0<(y=qi(r,v)).length&&(v=new _r(v,e,null,n,i),a.push({event:v,listeners:y}),_?v.data=_:null!==(_=Ur(n))&&(v.data=_))),(_=Dr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(jr=!0,Mr);case"textInput":return(e=t.data)===Mr&&jr?null:e;default:return null}}(e,n):function(e,t){if(zr)return"compositionend"===e||!Ar&&Fr(e,t)?(e=Zn(),Xn=Jn=Yn=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lr&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qi(r,"onBeforeInput")).length&&(i=new _r("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=_))}Mi(a,t)})}function Bi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pt(e,n))&&r.unshift(Bi(e,s,i)),null!=(s=Pt(e,t))&&r.push(Bi(e,s,i))),e=e.return}return r}function Vi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hi(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Pt(n,s))&&a.unshift(Bi(n,l,o)):i||null!=(l=Pt(n,s))&&a.push(Bi(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Gi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Qi(e){return("string"==typeof e?e:""+e).replace(Gi,"\n").replace(Ki,"")}function Yi(e,t,n){if(t=Qi(t),Qi(e)!==t&&n)throw Error(re(425))}function Ji(){}var Xi=null,Zi=null;function es(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ts="function"==typeof setTimeout?setTimeout:void 0,ns="function"==typeof clearTimeout?clearTimeout:void 0,rs="function"==typeof Promise?Promise:void 0,is="function"==typeof queueMicrotask?queueMicrotask:void 0!==rs?function(e){return rs.resolve(null).then(e).catch(ss)}:ts;function ss(e){setTimeout(function(){throw e})}function as(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wn(t)}function os(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ls(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var cs=Math.random().toString(36).slice(2),us="__reactFiber$"+cs,ds="__reactProps$"+cs,hs="__reactContainer$"+cs,fs="__reactEvents$"+cs,ps="__reactListeners$"+cs,ms="__reactHandles$"+cs;function gs(e){var t=e[us];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hs]||n[us]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ls(e);null!==e;){if(n=e[us])return n;e=ls(e)}return t}n=(e=n).parentNode}return null}function ys(e){return!(e=e[us]||e[hs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _s(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(re(33))}function vs(e){return e[ds]||null}var ws=[],bs=-1;function ks(e){return{current:e}}function Cs(e){0>bs||(e.current=ws[bs],ws[bs]=null,bs--)}function Ss(e,t){bs++,ws[bs]=e.current,e.current=t}var Is={},Ts=ks(Is),Es=ks(!1),xs=Is;function Ns(e,t){var n=e.type.contextTypes;if(!n)return Is;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ps(e){return null!=(e=e.childContextTypes)}function Rs(){Cs(Es),Cs(Ts)}function As(e,t,n){if(Ts.current!==Is)throw Error(re(168));Ss(Ts,t),Ss(Es,n)}function Os(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(re(108,We(e)||"Unknown",i));return Le({},n,r)}function Ds(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Is,xs=Ts.current,Ss(Ts,e),Ss(Es,Es.current),!0}function Ls(e,t,n){var r=e.stateNode;if(!r)throw Error(re(169));n?(e=Os(e,t,xs),r.__reactInternalMemoizedMergedChildContext=e,Cs(Es),Cs(Ts),Ss(Ts,e)):Cs(Es),Ss(Es,n)}var Ms=null,js=!1,Fs=!1;function Us(e){null===Ms?Ms=[e]:Ms.push(e)}function zs(){if(!Fs&&null!==Ms){Fs=!0;var e=0,t=_n;try{var n=Ms;for(_n=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ms=null,js=!1}catch(i){throw null!==Ms&&(Ms=Ms.slice(e+1)),Vt(Jt,zs),i}finally{_n=t,Fs=!1}}return null}var Ws=[],$s=0,Bs=null,qs=0,Vs=[],Hs=0,Gs=null,Ks=1,Qs="";function Ys(e,t){Ws[$s++]=qs,Ws[$s++]=Bs,Bs=e,qs=t}function Js(e,t,n){Vs[Hs++]=Ks,Vs[Hs++]=Qs,Vs[Hs++]=Gs,Gs=e;var r=Ks;e=Qs;var i=32-sn(r)-1;r&=~(1<<i),n+=1;var s=32-sn(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ks=1<<32-sn(t)+i|n<<i|r,Qs=s+e}else Ks=1<<s|n<<i|r,Qs=e}function Xs(e){null!==e.return&&(Ys(e,1),Js(e,1,0))}function Zs(e){for(;e===Bs;)Bs=Ws[--$s],Ws[$s]=null,qs=Ws[--$s],Ws[$s]=null;for(;e===Gs;)Gs=Vs[--Hs],Vs[Hs]=null,Qs=Vs[--Hs],Vs[Hs]=null,Ks=Vs[--Hs],Vs[Hs]=null}var ea=null,ta=null,na=!1,ra=null;function ia(e,t){var n=Nu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ea=e,ta=os(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ea=e,ta=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gs?{id:Ks,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ea=e,ta=null,!0);default:return!1}}function aa(e){return!(!(1&e.mode)||128&e.flags)}function oa(e){if(na){var t=ta;if(t){var n=t;if(!sa(e,t)){if(aa(e))throw Error(re(418));t=os(n.nextSibling);var r=ea;t&&sa(e,t)?ia(r,n):(e.flags=-4097&e.flags|2,na=!1,ea=e)}}else{if(aa(e))throw Error(re(418));e.flags=-4097&e.flags|2,na=!1,ea=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ea=e}function ca(e){if(e!==ea)return!1;if(!na)return la(e),na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!es(e.type,e.memoizedProps)),t&&(t=ta)){if(aa(e))throw ua(),Error(re(418));for(;t;)ia(e,t),t=os(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(re(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ta=os(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ta=null}}else ta=ea?os(e.stateNode.nextSibling):null;return!0}function ua(){for(var e=ta;e;)e=os(e.nextSibling)}function da(){ta=ea=null,na=!1}function ha(e){null===ra?ra=[e]:ra.push(e)}var fa=_e.ReactCurrentBatchConfig;function pa(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(re(284));if(!n._owner)throw Error(re(290,e))}return e}function ma(e,t){throw e=Object.prototype.toString.call(t),Error(re(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ga(e){return(0,e._init)(e._payload)}function ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ru(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Lu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===be?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===Pe&&ga(s)===t.type)?((r=i(t,n.props)).ref=pa(e,t,n),r.return=e,r):((r=Au(n.type,n.key,n.props,null,e.mode,r)).ref=pa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Ou(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Lu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ve:return(n=Au(t.type,t.key,t.props,null,e.mode,n)).ref=pa(e,null,t),n.return=e,n;case we:return(t=Mu(t,e.mode,n)).return=e,t;case Pe:return d(e,(0,t._init)(t._payload),n)}if(Ze(t)||Oe(t))return(t=Ou(t,e.mode,n,null)).return=e,t;ma(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ve:return n.key===i?l(e,t,n,r):null;case we:return n.key===i?c(e,t,n,r):null;case Pe:return h(e,t,(i=n._init)(n._payload),r)}if(Ze(n)||Oe(n))return null!==i?null:u(e,t,n,r,null);ma(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ve:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case we:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Pe:return f(e,t,n,(0,r._init)(r._payload),i)}if(Ze(r)||Oe(r))return u(t,e=e.get(n)||null,r,i,null);ma(t,r)}return null}return function o(l,c,u,p){if("object"==typeof u&&null!==u&&u.type===be&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case ve:e:{for(var m=u.key,g=c;null!==g;){if(g.key===m){if((m=u.type)===be){if(7===g.tag){n(l,g.sibling),(c=i(g,u.props.children)).return=l,l=c;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===Pe&&ga(m)===g.type){n(l,g.sibling),(c=i(g,u.props)).ref=pa(l,g,u),c.return=l,l=c;break e}n(l,g);break}t(l,g),g=g.sibling}u.type===be?((c=Ou(u.props.children,l.mode,p,u.key)).return=l,l=c):((p=Au(u.type,u.key,u.props,null,l.mode,p)).ref=pa(l,c,u),p.return=l,l=p)}return a(l);case we:e:{for(g=u.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(c=i(c,u.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=Mu(u,l.mode,p)).return=l,l=c}return a(l);case Pe:return o(l,c,(g=u._init)(u._payload),p)}if(Ze(u))return function(i,a,o,l){for(var c=null,u=null,p=a,m=a=0,g=null;null!==p&&m<o.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=h(i,p,o[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),a=s(y,a,m),null===u?c=y:u.sibling=y,u=y,p=g}if(m===o.length)return n(i,p),na&&Ys(i,m),c;if(null===p){for(;m<o.length;m++)null!==(p=d(i,o[m],l))&&(a=s(p,a,m),null===u?c=p:u.sibling=p,u=p);return na&&Ys(i,m),c}for(p=r(i,p);m<o.length;m++)null!==(g=f(p,i,m,o[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&p.forEach(function(e){return t(i,e)}),na&&Ys(i,m),c}(l,c,u,p);if(Oe(u))return function(i,a,o,l){var c=Oe(o);if("function"!=typeof c)throw Error(re(150));if(null==(o=c.call(o)))throw Error(re(151));for(var u=c=null,p=a,m=a=0,g=null,y=o.next();null!==p&&!y.done;m++,y=o.next()){p.index>m?(g=p,p=null):g=p.sibling;var _=h(i,p,y.value,l);if(null===_){null===p&&(p=g);break}e&&p&&null===_.alternate&&t(i,p),a=s(_,a,m),null===u?c=_:u.sibling=_,u=_,p=g}if(y.done)return n(i,p),na&&Ys(i,m),c;if(null===p){for(;!y.done;m++,y=o.next())null!==(y=d(i,y.value,l))&&(a=s(y,a,m),null===u?c=y:u.sibling=y,u=y);return na&&Ys(i,m),c}for(p=r(i,p);!y.done;m++,y=o.next())null!==(y=f(p,i,m,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=s(y,a,m),null===u?c=y:u.sibling=y,u=y);return e&&p.forEach(function(e){return t(i,e)}),na&&Ys(i,m),c}(l,c,u,p);ma(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(c=i(c,u)).return=l,l=c):(n(l,c),(c=Lu(u,l.mode,p)).return=l,l=c),a(l)):n(l,c)}}var _a=ya(!0),va=ya(!1),wa=ks(null),ba=null,ka=null,Ca=null;function Sa(){Ca=ka=ba=null}function Ia(e){var t=wa.current;Cs(wa),e._currentValue=t}function Ta(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ba=e,Ca=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yl=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ba)throw Error(re(308));ka=e,ba.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Na=null;function Pa(e){null===Na?Na=[e]:Na.push(e)}function Ra(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Pa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ma(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ja(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Tc){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Pa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function Fa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yn(e,n)}}function Ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function za(e,t,n,r){var i=e.updateQueue;Oa=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=Le({},d,h);break e;case 2:Oa=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Dc|=a,e.lanes=a,e.memoizedState=d}}function Wa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(re(191,i));i.call(r)}}}var $a={},Ba=ks($a),qa=ks($a),Va=ks($a);function Ha(e){if(e===$a)throw Error(re(174));return e}function Ga(e,t){switch(Ss(Va,t),Ss(qa,e),Ss(Ba,$a),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:at(null,"");break;default:t=at(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cs(Ba),Ss(Ba,t)}function Ka(){Cs(Ba),Cs(qa),Cs(Va)}function Qa(e){Ha(Va.current);var t=Ha(Ba.current),n=at(t,e.type);t!==n&&(Ss(qa,e),Ss(Ba,n))}function Ya(e){qa.current===e&&(Cs(Ba),Cs(qa))}var Ja=ks(0);function Xa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Za=[];function eo(){for(var e=0;e<Za.length;e++)Za[e]._workInProgressVersionPrimary=null;Za.length=0}var to=_e.ReactCurrentDispatcher,no=_e.ReactCurrentBatchConfig,ro=0,io=null,so=null,ao=null,oo=!1,lo=!1,co=0,uo=0;function ho(){throw Error(re(321))}function fo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function po(e,t,n,r,i,s){if(ro=s,io=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,to.current=null===e||null===e.memoizedState?Jo:Xo,e=n(r,i),lo){s=0;do{if(lo=!1,co=0,25<=s)throw Error(re(301));s+=1,ao=so=null,t.updateQueue=null,to.current=Zo,e=n(r,i)}while(lo)}if(to.current=Yo,t=null!==so&&null!==so.next,ro=0,ao=so=io=null,oo=!1,t)throw Error(re(300));return e}function mo(){var e=0!==co;return co=0,e}function go(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ao?io.memoizedState=ao=e:ao=ao.next=e,ao}function yo(){if(null===so){var e=io.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===ao?io.memoizedState:ao.next;if(null!==t)ao=t,so=e;else{if(null===e)throw Error(re(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===ao?io.memoizedState=ao=e:ao=ao.next=e}return ao}function _o(e,t){return"function"==typeof t?t(e):t}function vo(e){var t=yo(),n=t.queue;if(null===n)throw Error(re(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((ro&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=d,a=r):l=l.next=d,io.lanes|=u,Dc|=u}c=c.next}while(null!==c&&c!==s);null===l?a=r:l.next=o,si(r,t.memoizedState)||(yl=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,io.lanes|=s,Dc|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wo(e){var t=yo(),n=t.queue;if(null===n)throw Error(re(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);si(s,t.memoizedState)||(yl=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function bo(){}function ko(e,t){var n=io,r=yo(),i=t(),s=!si(r.memoizedState,i);if(s&&(r.memoizedState=i,yl=!0),r=r.queue,Do(Io.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ao&&1&ao.memoizedState.tag){if(n.flags|=2048,No(9,So.bind(null,n,r,i,t),void 0,null),null===Ec)throw Error(re(349));30&ro||Co(n,t,i)}return i}function Co(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=io.updateQueue)?(t={lastEffect:null,stores:null},io.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function So(e,t,n,r){t.value=n,t.getSnapshot=r,To(t)&&Eo(e)}function Io(e,t,n){return n(function(){To(t)&&Eo(e)})}function To(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!si(e,n)}catch(r){return!0}}function Eo(e){var t=Aa(e,1);null!==t&&eu(t,e,1,-1)}function xo(e){var t=go();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=Ho.bind(null,io,e),[t.memoizedState,e]}function No(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=io.updateQueue)?(t={lastEffect:null,stores:null},io.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return yo().memoizedState}function Ro(e,t,n,r){var i=go();io.flags|=e,i.memoizedState=No(1|t,n,void 0,void 0===r?null:r)}function Ao(e,t,n,r){var i=yo();r=void 0===r?null:r;var s=void 0;if(null!==so){var a=so.memoizedState;if(s=a.destroy,null!==r&&fo(r,a.deps))return void(i.memoizedState=No(t,n,s,r))}io.flags|=e,i.memoizedState=No(1|t,n,s,r)}function Oo(e,t){return Ro(8390656,8,e,t)}function Do(e,t){return Ao(2048,8,e,t)}function Lo(e,t){return Ao(4,2,e,t)}function Mo(e,t){return Ao(4,4,e,t)}function jo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fo(e,t,n){return n=null!=n?n.concat([e]):null,Ao(4,4,jo.bind(null,t,e),n)}function Uo(){}function zo(e,t){var n=yo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=yo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 21&ro?(si(n,t)||(n=pn(),io.lanes|=n,Dc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yl=!0),e.memoizedState=n)}function Bo(e,t){var n=_n;_n=0!==n&&4>n?n:4,e(!0);var r=no.transition;no.transition={};try{e(!1),t()}finally{_n=n,no.transition=r}}function qo(){return yo().memoizedState}function Vo(e,t,n){var r=Zc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Go(e))Ko(t,n);else if(null!==(n=Ra(e,t,n,r))){eu(n,e,r,Xc()),Qo(n,t,r)}}function Ho(e,t,n){var r=Zc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Go(e))Ko(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,si(o,a)){var l=t.interleaved;return null===l?(i.next=i,Pa(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ra(e,t,i,r))&&(eu(n,e,r,i=Xc()),Qo(n,t,r))}}function Go(e){var t=e.alternate;return e===io||null!==t&&t===io}function Ko(e,t){lo=oo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qo(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yn(e,n)}}var Yo={readContext:xa,useCallback:ho,useContext:ho,useEffect:ho,useImperativeHandle:ho,useInsertionEffect:ho,useLayoutEffect:ho,useMemo:ho,useReducer:ho,useRef:ho,useState:ho,useDebugValue:ho,useDeferredValue:ho,useTransition:ho,useMutableSource:ho,useSyncExternalStore:ho,useId:ho,unstable_isNewReconciler:!1},Jo={readContext:xa,useCallback:function(e,t){return go().memoizedState=[e,void 0===t?null:t],e},useContext:xa,useEffect:Oo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ro(4194308,4,jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=go();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=go();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Vo.bind(null,io,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},go().memoizedState=e},useState:xo,useDebugValue:Uo,useDeferredValue:function(e){return go().memoizedState=e},useTransition:function(){var e=xo(!1),t=e[0];return e=Bo.bind(null,e[1]),go().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=io,i=go();if(na){if(void 0===n)throw Error(re(407));n=n()}else{if(n=t(),null===Ec)throw Error(re(349));30&ro||Co(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Oo(Io.bind(null,r,s,e),[e]),r.flags|=2048,No(9,So.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=go(),t=Ec.identifierPrefix;if(na){var n=Qs;t=":"+t+"R"+(n=(Ks&~(1<<32-sn(Ks)-1)).toString(32)+n),0<(n=co++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=uo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xo={readContext:xa,useCallback:zo,useContext:xa,useEffect:Do,useImperativeHandle:Fo,useInsertionEffect:Lo,useLayoutEffect:Mo,useMemo:Wo,useReducer:vo,useRef:Po,useState:function(){return vo(_o)},useDebugValue:Uo,useDeferredValue:function(e){return $o(yo(),so.memoizedState,e)},useTransition:function(){return[vo(_o)[0],yo().memoizedState]},useMutableSource:bo,useSyncExternalStore:ko,useId:qo,unstable_isNewReconciler:!1},Zo={readContext:xa,useCallback:zo,useContext:xa,useEffect:Do,useImperativeHandle:Fo,useInsertionEffect:Lo,useLayoutEffect:Mo,useMemo:Wo,useReducer:wo,useRef:Po,useState:function(){return wo(_o)},useDebugValue:Uo,useDeferredValue:function(e){var t=yo();return null===so?t.memoizedState=e:$o(t,so.memoizedState,e)},useTransition:function(){return[wo(_o)[0],yo().memoizedState]},useMutableSource:bo,useSyncExternalStore:ko,useId:qo,unstable_isNewReconciler:!1};function el(e,t){if(e&&e.defaultProps){for(var n in t=Le({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function tl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Le({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var nl={isMounted:function(e){return!!(e=e._reactInternals)&&zt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xc(),i=Zc(e),s=Ma(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=ja(e,s,i))&&(eu(t,e,i,r),Fa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xc(),i=Zc(e),s=Ma(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=ja(e,s,i))&&(eu(t,e,i,r),Fa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xc(),r=Zc(e),i=Ma(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=ja(e,i,r))&&(eu(t,e,r,n),Fa(t,e,r))}};function rl(e,t,n,r,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!ai(n,r)||!ai(i,s))}function il(e,t,n){var r=!1,i=Is,s=t.contextType;return"object"==typeof s&&null!==s?s=xa(s):(i=Ps(t)?xs:Ts.current,s=(r=null!=(r=t.contextTypes))?Ns(e,i):Is),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=nl,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function sl(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&nl.enqueueReplaceState(t,t.state,null)}function al(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Da(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=xa(s):(s=Ps(t)?xs:Ts.current,i.context=Ns(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(tl(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&nl.enqueueReplaceState(i,i.state,null),za(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function ol(e,t){try{var n="",r=t;do{n+=Ue(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ll(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function cl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ul="function"==typeof WeakMap?WeakMap:Map;function dl(e,t,n){(n=Ma(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$c||($c=!0,Bc=r),cl(0,t)},n}function hl(e,t,n){(n=Ma(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){cl(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){cl(0,t),"function"!=typeof r&&(null===qc?qc=new Set([this]):qc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ul;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cu.bind(null,e,t,n),t.then(e,e))}function pl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ml(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ma(-1,1)).tag=2,ja(n,t,1))),n.lanes|=1),e)}var gl=_e.ReactCurrentOwner,yl=!1;function _l(e,t,n,r){t.child=null===e?va(t,null,n,r):_a(t,e.child,n,r)}function vl(e,t,n,r,i){n=n.render;var s=t.ref;return Ea(t,i),r=po(e,t,n,r,s,i),n=mo(),null===e||yl?(na&&n&&Xs(t),t.flags|=1,_l(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$l(e,t,i))}function wl(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Pu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Au(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,bl(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:ai)(a,r)&&e.ref===t.ref)return $l(e,t,i)}return t.flags|=1,(e=Ru(s,r)).ref=t.ref,e.return=t,t.child=e}function bl(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(ai(s,r)&&e.ref===t.ref){if(yl=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,$l(e,t,i);131072&e.flags&&(yl=!0)}}return Sl(e,t,n,r,i)}function kl(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ss(Rc,Pc),Pc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ss(Rc,Pc),Pc|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ss(Rc,Pc),Pc|=n;else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ss(Rc,Pc),Pc|=r;return _l(e,t,i,n),t.child}function Cl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sl(e,t,n,r,i){var s=Ps(n)?xs:Ts.current;return s=Ns(t,s),Ea(t,i),n=po(e,t,n,r,s,i),r=mo(),null===e||yl?(na&&r&&Xs(t),t.flags|=1,_l(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$l(e,t,i))}function Il(e,t,n,r,i){if(Ps(n)){var s=!0;Ds(t)}else s=!1;if(Ea(t,i),null===t.stateNode)Wl(e,t),il(t,n,r),al(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"==typeof c&&null!==c?c=xa(c):c=Ns(t,c=Ps(n)?xs:Ts.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==r||l!==c)&&sl(t,a,r,c),Oa=!1;var h=t.memoizedState;a.state=h,za(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Es.current||Oa?("function"==typeof u&&(tl(t,n,u,r),l=t.memoizedState),(o=Oa||rl(t,n,o,r,h,l,c))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,La(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:el(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"==typeof(l=n.contextType)&&null!==l?l=xa(l):l=Ns(t,l=Ps(n)?xs:Ts.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&sl(t,a,r,l),Oa=!1,h=t.memoizedState,a.state=h,za(t,r,a,i);var p=t.memoizedState;o!==d||h!==p||Es.current||Oa?("function"==typeof f&&(tl(t,n,f,r),p=t.memoizedState),(c=Oa||rl(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Tl(e,t,n,r,s,i)}function Tl(e,t,n,r,i,s){Cl(e,t);var a=!!(128&t.flags);if(!r&&!a)return i&&Ls(t,n,!1),$l(e,t,s);r=t.stateNode,gl.current=t;var o=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=_a(t,e.child,null,s),t.child=_a(t,null,o,s)):_l(e,t,o,s),t.memoizedState=r.state,i&&Ls(t,n,!0),t.child}function El(e){var t=e.stateNode;t.pendingContext?As(0,t.pendingContext,t.pendingContext!==t.context):t.context&&As(0,t.context,!1),Ga(e,t.containerInfo)}function xl(e,t,n,r,i){return da(),ha(i),t.flags|=256,_l(e,t,n,r),t.child}var Nl,Pl,Rl,Al,Ol={dehydrated:null,treeContext:null,retryLane:0};function Dl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ll(e,t,n){var r,i=t.pendingProps,s=Ja.current,a=!1,o=!!(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ss(Ja,1&s),null===e)return oa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,a?(i=t.mode,a=t.child,o={mode:"hidden",children:o},1&i||null===a?a=Du(o,i,0,null):(a.childLanes=0,a.pendingProps=o),e=Ou(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Dl(n),t.memoizedState=Ol,e):Ml(t,o));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,jl(e,t,a,r=ll(Error(re(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Du({mode:"visible",children:r.children},i,0,null),(s=Ou(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,1&t.mode&&_a(t,e.child,null,a),t.child.memoizedState=Dl(a),t.memoizedState=Ol,s);if(!(1&t.mode))return jl(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var o=r.dgst;return r=o,jl(e,t,a,r=ll(s=Error(re(419)),r,void 0))}if(o=0!==(a&e.childLanes),yl||o){if(null!==(r=Ec)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Aa(e,i),eu(r,e,i,-1))}return fu(),jl(e,t,a,r=ll(Error(re(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Iu.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ta=os(i.nextSibling),ea=t,na=!0,ra=null,null!==e&&(Vs[Hs++]=Ks,Vs[Hs++]=Qs,Vs[Hs++]=Gs,Ks=e.id,Qs=e.overflow,Gs=t),t=Ml(t,r.children),t.flags|=4096,t)}(e,t,o,i,r,s,n);if(a){a=i.fallback,o=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&o||t.child===s?(i=Ru(s,l)).subtreeFlags=14680064&s.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==r?a=Ru(r,a):(a=Ou(a,o,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,o=null===(o=e.child.memoizedState)?Dl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=Ol,i}return e=(a=e.child).sibling,i=Ru(a,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ml(e,t){return(t=Du({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function jl(e,t,n,r){return null!==r&&ha(r),_a(t,e.child,null,n),(e=Ml(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ta(e.return,t,n)}function Ul(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function zl(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_l(e,t,r.children,n),2&(r=Ja.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fl(e,n,t);else if(19===e.tag)Fl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ss(Ja,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Xa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ul(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Xa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ul(t,!0,n,null,s);break;case"together":Ul(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Wl(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $l(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(re(153));if(null!==t.child){for(n=Ru(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ru(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Bl(e,t){if(!na)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ql(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Vl(e,t,n){var r=t.pendingProps;switch(Zs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ql(t),null;case 1:case 17:return Ps(t.type)&&Rs(),ql(t),null;case 3:return r=t.stateNode,Ka(),Cs(Es),Cs(Ts),eo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ca(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ra&&(iu(ra),ra=null))),Pl(e,t),ql(t),null;case 5:Ya(t);var i=Ha(Va.current);if(n=t.type,null!==e&&null!=t.stateNode)Rl(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(re(166));return ql(t),null}if(e=Ha(Ba.current),ca(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[us]=t,r[ds]=s,e=!!(1&t.mode),n){case"dialog":ji("cancel",r),ji("close",r);break;case"iframe":case"object":case"embed":ji("load",r);break;case"video":case"audio":for(i=0;i<Oi.length;i++)ji(Oi[i],r);break;case"source":ji("error",r);break;case"img":case"image":case"link":ji("error",r),ji("load",r);break;case"details":ji("toggle",r);break;case"input":Ke(r,s),ji("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ji("invalid",r);break;case"textarea":nt(r,s),ji("invalid",r)}for(var a in gt(n,s),i=null,s)if(s.hasOwnProperty(a)){var o=s[a];"children"===a?"string"==typeof o?r.textContent!==o&&(!0!==s.suppressHydrationWarning&&Yi(r.textContent,o,e),i=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(!0!==s.suppressHydrationWarning&&Yi(r.textContent,o,e),i=["children",""+o]):se.hasOwnProperty(a)&&null!=o&&"onScroll"===a&&ji("scroll",r)}switch(n){case"input":qe(r),Je(r,s,!0);break;case"textarea":qe(r),it(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Ji)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{a=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=st(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[us]=t,e[ds]=r,Nl(e,t,!1,!1),t.stateNode=e;e:{switch(a=yt(n,r),n){case"dialog":ji("cancel",e),ji("close",e),i=r;break;case"iframe":case"object":case"embed":ji("load",e),i=r;break;case"video":case"audio":for(i=0;i<Oi.length;i++)ji(Oi[i],e);i=r;break;case"source":ji("error",e),i=r;break;case"img":case"image":case"link":ji("error",e),ji("load",e),i=r;break;case"details":ji("toggle",e),i=r;break;case"input":Ke(e,r),i=Ge(e,r),ji("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),ji("invalid",e);break;case"textarea":nt(e,r),i=tt(e,r),ji("invalid",e)}for(s in gt(n,i),o=i)if(o.hasOwnProperty(s)){var l=o[s];"style"===s?pt(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&ct(e,l):"children"===s?"string"==typeof l?("textarea"!==n||""!==l)&&ut(e,l):"number"==typeof l&&ut(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(se.hasOwnProperty(s)?null!=l&&"onScroll"===s&&ji("scroll",e):null!=l&&ye(e,s,l,a))}switch(n){case"input":qe(e),Je(e,r,!1);break;case"textarea":qe(e),it(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$e(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?et(e,!!r.multiple,s,!1):null!=r.defaultValue&&et(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ql(t),null;case 6:if(e&&null!=t.stateNode)Al(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(re(166));if(n=Ha(Va.current),Ha(Ba.current),ca(t)){if(r=t.stateNode,n=t.memoizedProps,r[us]=t,(s=r.nodeValue!==n)&&null!==(e=ea))switch(e.tag){case 3:Yi(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yi(r.nodeValue,n,!!(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[us]=t,t.stateNode=r}return ql(t),null;case 13:if(Cs(Ja),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(na&&null!==ta&&1&t.mode&&!(128&t.flags))ua(),da(),t.flags|=98560,s=!1;else if(s=ca(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(re(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(re(317));s[us]=t}else da(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ql(t),s=!1}else null!==ra&&(iu(ra),ra=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Ja.current?0===Ac&&(Ac=3):fu())),null!==t.updateQueue&&(t.flags|=4),ql(t),null);case 4:return Ka(),Pl(e,t),null===e&&zi(t.stateNode.containerInfo),ql(t),null;case 10:return Ia(t.type._context),ql(t),null;case 19:if(Cs(Ja),null===(s=t.memoizedState))return ql(t),null;if(r=!!(128&t.flags),null===(a=s.rendering))if(r)Bl(s,!1);else{if(0!==Ac||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=Xa(e))){for(t.flags|=128,Bl(s,!1),null!==(r=a.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(a=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ss(Ja,1&Ja.current|2),t.child}e=e.sibling}null!==s.tail&&Qt()>zc&&(t.flags|=128,r=!0,Bl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Xa(a))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Bl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!a.alternate&&!na)return ql(t),null}else 2*Qt()-s.renderingStartTime>zc&&1073741824!==n&&(t.flags|=128,r=!0,Bl(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=s.last)?n.sibling=a:t.child=a,s.last=a)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qt(),t.sibling=null,n=Ja.current,Ss(Ja,r?1&n|2:1&n),t):(ql(t),null);case 22:case 23:return cu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Pc)&&(ql(t),6&t.subtreeFlags&&(t.flags|=8192)):ql(t),null;case 24:case 25:return null}throw Error(re(156,t.tag))}function Hl(e,t){switch(Zs(t),t.tag){case 1:return Ps(t.type)&&Rs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ka(),Cs(Es),Cs(Ts),eo(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ya(t),null;case 13:if(Cs(Ja),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(re(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cs(Ja),null;case 4:return Ka(),null;case 10:return Ia(t.type._context),null;case 22:case 23:return cu(),null;default:return null}}Nl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pl=function(){},Rl=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ha(Ba.current);var s,a=null;switch(n){case"input":i=Ge(e,i),r=Ge(e,r),a=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),a=[];break;case"textarea":i=tt(e,i),r=tt(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Ji)}for(c in gt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var o=i[c];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(se.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(o=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(se.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&ji("scroll",e),a||o===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Al=function(e,t,n,r){n!==r&&(t.flags|=4)};var Gl=!1,Kl=!1,Ql="function"==typeof WeakSet?WeakSet:Set,Yl=null;function Jl(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){ku(e,t,r)}else n.current=null}function Xl(e,t,n){try{n()}catch(r){ku(e,t,r)}}var Zl=!1;function ec(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Xl(t,n,s)}i=i.next}while(i!==r)}}function tc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function nc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function rc(e){var t=e.alternate;null!==t&&(e.alternate=null,rc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[us],delete t[ds],delete t[fs],delete t[ps],delete t[ms])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ic(e){return 5===e.tag||3===e.tag||4===e.tag}function sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ic(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ac(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Ji));else if(4!==r&&null!==(e=e.child))for(ac(e,t,n),e=e.sibling;null!==e;)ac(e,t,n),e=e.sibling}function oc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(oc(e,t,n),e=e.sibling;null!==e;)oc(e,t,n),e=e.sibling}var lc=null,cc=!1;function uc(e,t,n){for(n=n.child;null!==n;)dc(e,t,n),n=n.sibling}function dc(e,t,n){if(rn&&"function"==typeof rn.onCommitFiberUnmount)try{rn.onCommitFiberUnmount(nn,n)}catch(o){}switch(n.tag){case 5:Kl||Jl(n,t);case 6:var r=lc,i=cc;lc=null,uc(e,t,n),cc=i,null!==(lc=r)&&(cc?(e=lc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lc.removeChild(n.stateNode));break;case 18:null!==lc&&(cc?(e=lc,n=n.stateNode,8===e.nodeType?as(e.parentNode,n):1===e.nodeType&&as(e,n),Wn(e)):as(lc,n.stateNode));break;case 4:r=lc,i=cc,lc=n.stateNode.containerInfo,cc=!0,uc(e,t,n),lc=r,cc=i;break;case 0:case 11:case 14:case 15:if(!Kl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(2&s||4&s)&&Xl(n,t,a),i=i.next}while(i!==r)}uc(e,t,n);break;case 1:if(!Kl&&(Jl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){ku(n,t,o)}uc(e,t,n);break;case 21:uc(e,t,n);break;case 22:1&n.mode?(Kl=(r=Kl)||null!==n.memoizedState,uc(e,t,n),Kl=r):uc(e,t,n);break;default:uc(e,t,n)}}function hc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ql),t.forEach(function(t){var r=Tu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;null!==o;){switch(o.tag){case 5:lc=o.stateNode,cc=!1;break e;case 3:case 4:lc=o.stateNode.containerInfo,cc=!0;break e}o=o.return}if(null===lc)throw Error(re(160));dc(s,a,i),lc=null,cc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){ku(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pc(t,e),t=t.sibling}function pc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fc(t,e),mc(e),4&r){try{ec(3,e,e.return),tc(3,e)}catch(m){ku(e,e.return,m)}try{ec(5,e,e.return)}catch(m){ku(e,e.return,m)}}break;case 1:fc(t,e),mc(e),512&r&&null!==n&&Jl(n,n.return);break;case 5:if(fc(t,e),mc(e),512&r&&null!==n&&Jl(n,n.return),32&e.flags){var i=e.stateNode;try{ut(i,"")}catch(m){ku(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===s.type&&null!=s.name&&Qe(i,s),yt(o,a);var c=yt(o,s);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];"style"===u?pt(i,d):"dangerouslySetInnerHTML"===u?ct(i,d):"children"===u?ut(i,d):ye(i,u,d,c)}switch(o){case"input":Ye(i,s);break;case"textarea":rt(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?et(i,!!s.multiple,f,!1):h!==!!s.multiple&&(null!=s.defaultValue?et(i,!!s.multiple,s.defaultValue,!0):et(i,!!s.multiple,s.multiple?[]:"",!1))}i[ds]=s}catch(m){ku(e,e.return,m)}}break;case 6:if(fc(t,e),mc(e),4&r){if(null===e.stateNode)throw Error(re(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){ku(e,e.return,m)}}break;case 3:if(fc(t,e),mc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wn(t.containerInfo)}catch(m){ku(e,e.return,m)}break;case 4:default:fc(t,e),mc(e);break;case 13:fc(t,e),mc(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Uc=Qt())),4&r&&hc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Kl=(c=Kl)||u,fc(t,e),Kl=c):fc(t,e),mc(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(Yl=e,u=e.child;null!==u;){for(d=Yl=u;null!==Yl;){switch(f=(h=Yl).child,h.tag){case 0:case 11:case 14:case 15:ec(4,h,h.return);break;case 1:Jl(h,h.return);var p=h.stateNode;if("function"==typeof p.componentWillUnmount){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){ku(r,n,m)}}break;case 5:Jl(h,h.return);break;case 22:if(null!==h.memoizedState){vc(d);continue}}null!==f?(f.return=h,Yl=f):vc(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{i=d.stateNode,c?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(o=d.stateNode,a=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=ft("display",a))}catch(m){ku(e,e.return,m)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){ku(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fc(t,e),mc(e),4&r&&hc(e);case 21:}}function mc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ic(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ut(i,""),r.flags&=-33),oc(e,sc(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ac(e,sc(e),s);break;default:throw Error(re(161))}}catch(a){ku(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gc(e,t,n){Yl=e,yc(e)}function yc(e,t,n){for(var r=!!(1&e.mode);null!==Yl;){var i=Yl,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Gl;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Kl;o=Gl;var c=Kl;if(Gl=a,(Kl=l)&&!c)for(Yl=i;null!==Yl;)l=(a=Yl).child,22===a.tag&&null!==a.memoizedState?wc(i):null!==l?(l.return=a,Yl=l):wc(i);for(;null!==s;)Yl=s,yc(s),s=s.sibling;Yl=i,Gl=o,Kl=c}_c(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,Yl=s):_c(e)}}function _c(e){for(;null!==Yl;){var t=Yl;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Kl||tc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Kl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:el(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Wa(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wa(t,a,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Wn(d)}}}break;default:throw Error(re(163))}Kl||512&t.flags&&nc(t)}catch(h){ku(t,t.return,h)}}if(t===e){Yl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yl=n;break}Yl=t.return}}function vc(e){for(;null!==Yl;){var t=Yl;if(t===e){Yl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yl=n;break}Yl=t.return}}function wc(e){for(;null!==Yl;){var t=Yl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{tc(4,t)}catch(l){ku(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){ku(t,i,l)}}var s=t.return;try{nc(t)}catch(l){ku(t,s,l)}break;case 5:var a=t.return;try{nc(t)}catch(l){ku(t,a,l)}}}catch(l){ku(t,t.return,l)}if(t===e){Yl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Yl=o;break}Yl=t.return}}var bc,kc=Math.ceil,Cc=_e.ReactCurrentDispatcher,Sc=_e.ReactCurrentOwner,Ic=_e.ReactCurrentBatchConfig,Tc=0,Ec=null,xc=null,Nc=0,Pc=0,Rc=ks(0),Ac=0,Oc=null,Dc=0,Lc=0,Mc=0,jc=null,Fc=null,Uc=0,zc=1/0,Wc=null,$c=!1,Bc=null,qc=null,Vc=!1,Hc=null,Gc=0,Kc=0,Qc=null,Yc=-1,Jc=0;function Xc(){return 6&Tc?Qt():-1!==Yc?Yc:Yc=Qt()}function Zc(e){return 1&e.mode?2&Tc&&0!==Nc?Nc&-Nc:null!==fa.transition?(0===Jc&&(Jc=pn()),Jc):0!==(e=_n)?e:e=void 0===(e=window.event)?16:Qn(e.type):1}function eu(e,t,n,r){if(50<Kc)throw Kc=0,Qc=null,Error(re(185));gn(e,n,r),2&Tc&&e===Ec||(e===Ec&&(!(2&Tc)&&(Lc|=n),4===Ac&&su(e,Nc)),tu(e,r),1===n&&0===Tc&&!(1&t.mode)&&(zc=Qt()+500,js&&zs()))}function tu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-sn(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=hn(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=dn(e,e===Ec?Nc:0);if(0===r)null!==n&&Ht(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ht(n),1===t)0===e.tag?function(e){js=!0,Us(e)}(au.bind(null,e)):Us(au.bind(null,e)),is(function(){!(6&Tc)&&zs()}),n=null;else{switch(vn(r)){case 1:n=Jt;break;case 4:n=Xt;break;case 16:default:n=Zt;break;case 536870912:n=tn}n=Eu(n,nu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nu(e,t){if(Yc=-1,Jc=0,6&Tc)throw Error(re(327));var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=dn(e,e===Ec?Nc:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=pu(e,r);else{t=r;var i=Tc;Tc|=2;var s=hu();for(Ec===e&&Nc===t||(Wc=null,zc=Qt()+500,uu(e,t));;)try{gu();break}catch(o){du(e,o)}Sa(),Cc.current=s,Tc=i,null!==xc?t=0:(Ec=null,Nc=0,t=Ac)}if(0!==t){if(2===t&&(0!==(i=fn(e))&&(r=i,t=ru(e,i))),1===t)throw n=Oc,uu(e,0),su(e,r),tu(e,Qt()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!si(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=pu(e,r),2===t&&(s=fn(e),0!==s&&(r=s,t=ru(e,s))),1!==t)))throw n=Oc,uu(e,0),su(e,r),tu(e,Qt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(re(345));case 2:case 5:vu(e,Fc,Wc);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=Uc+500-Qt())){if(0!==dn(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Xc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ts(vu.bind(null,e,Fc,Wc),t);break}vu(e,Fc,Wc);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-sn(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Qt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kc(r/1960))-r)){e.timeoutHandle=ts(vu.bind(null,e,Fc,Wc),r);break}vu(e,Fc,Wc);break;default:throw Error(re(329))}}}return tu(e,Qt()),e.callbackNode===n?nu.bind(null,e):null}function ru(e,t){var n=jc;return e.current.memoizedState.isDehydrated&&(uu(e,t).flags|=256),2!==(e=pu(e,t))&&(t=Fc,Fc=n,null!==t&&iu(t)),e}function iu(e){null===Fc?Fc=e:Fc.push.apply(Fc,e)}function su(e,t){for(t&=~Mc,t&=~Lc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sn(t),r=1<<n;e[n]=-1,t&=~r}}function au(e){if(6&Tc)throw Error(re(327));wu();var t=dn(e,0);if(!(1&t))return tu(e,Qt()),null;var n=pu(e,t);if(0!==e.tag&&2===n){var r=fn(e);0!==r&&(t=r,n=ru(e,r))}if(1===n)throw n=Oc,uu(e,0),su(e,t),tu(e,Qt()),n;if(6===n)throw Error(re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vu(e,Fc,Wc),tu(e,Qt()),null}function ou(e,t){var n=Tc;Tc|=1;try{return e(t)}finally{0===(Tc=n)&&(zc=Qt()+500,js&&zs())}}function lu(e){null!==Hc&&0===Hc.tag&&!(6&Tc)&&wu();var t=Tc;Tc|=1;var n=Ic.transition,r=_n;try{if(Ic.transition=null,_n=1,e)return e()}finally{_n=r,Ic.transition=n,!(6&(Tc=t))&&zs()}}function cu(){Pc=Rc.current,Cs(Rc)}function uu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ns(n)),null!==xc)for(n=xc.return;null!==n;){var r=n;switch(Zs(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Rs();break;case 3:Ka(),Cs(Es),Cs(Ts),eo();break;case 5:Ya(r);break;case 4:Ka();break;case 13:case 19:Cs(Ja);break;case 10:Ia(r.type._context);break;case 22:case 23:cu()}n=n.return}if(Ec=e,xc=e=Ru(e.current,null),Nc=Pc=t,Ac=0,Oc=null,Mc=Lc=Dc=0,Fc=jc=null,null!==Na){for(t=0;t<Na.length;t++)if(null!==(r=(n=Na[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Na=null}return e}function du(e,t){for(;;){var n=xc;try{if(Sa(),to.current=Yo,oo){for(var r=io.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}oo=!1}if(ro=0,ao=so=io=null,lo=!1,co=0,Sc.current=null,null===n||null===n.return){Ac=1,Oc=t,xc=null;break}e:{var s=e,a=n.return,o=n,l=t;if(t=Nc,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=o,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=pl(a);if(null!==f){f.flags&=-257,ml(f,a,o,0,t),1&f.mode&&fl(s,c,t),l=c;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}if(!(1&t)){fl(s,c,t),fu();break e}l=Error(re(426))}else if(na&&1&o.mode){var g=pl(a);if(null!==g){!(65536&g.flags)&&(g.flags|=256),ml(g,a,o,0,t),ha(ol(l,o));break e}}s=l=ol(l,o),4!==Ac&&(Ac=2),null===jc?jc=[s]:jc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ua(s,dl(0,l,t));break e;case 1:o=l;var y=s.type,_=s.stateNode;if(!(128&s.flags||"function"!=typeof y.getDerivedStateFromError&&(null===_||"function"!=typeof _.componentDidCatch||null!==qc&&qc.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t,Ua(s,hl(s,o,t));break e}}s=s.return}while(null!==s)}_u(n)}catch(v){t=v,xc===n&&null!==n&&(xc=n=n.return);continue}break}}function hu(){var e=Cc.current;return Cc.current=Yo,null===e?Yo:e}function fu(){0!==Ac&&3!==Ac&&2!==Ac||(Ac=4),null===Ec||!(268435455&Dc)&&!(268435455&Lc)||su(Ec,Nc)}function pu(e,t){var n=Tc;Tc|=2;var r=hu();for(Ec===e&&Nc===t||(Wc=null,uu(e,t));;)try{mu();break}catch(i){du(e,i)}if(Sa(),Tc=n,Cc.current=r,null!==xc)throw Error(re(261));return Ec=null,Nc=0,Ac}function mu(){for(;null!==xc;)yu(xc)}function gu(){for(;null!==xc&&!Gt();)yu(xc)}function yu(e){var t=bc(e.alternate,e,Pc);e.memoizedProps=e.pendingProps,null===t?_u(e):xc=t,Sc.current=null}function _u(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Hl(n,t)))return n.flags&=32767,void(xc=n);if(null===e)return Ac=6,void(xc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Vl(n,t,Pc)))return void(xc=n);if(null!==(t=t.sibling))return void(xc=t);xc=t=e}while(null!==t);0===Ac&&(Ac=5)}function vu(e,t,n){var r=_n,i=Ic.transition;try{Ic.transition=null,_n=1,function(e,t,n,r){do{wu()}while(null!==Hc);if(6&Tc)throw Error(re(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(re(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-sn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,s),e===Ec&&(xc=Ec=null,Nc=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Vc||(Vc=!0,Eu(Zt,function(){return wu(),null})),s=!!(15990&n.flags),!!(15990&n.subtreeFlags)||s){s=Ic.transition,Ic.transition=null;var a=_n;_n=1;var o=Tc;Tc|=4,Sc.current=null,function(e,t){if(Xi=Bn,di(e=ui())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(o=a+i),d!==s||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++c===i&&(o=a),h===s&&++u===r&&(l=a),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zi={focusedElem:e,selectionRange:n},Bn=!1,Yl=t;null!==Yl;)if(e=(t=Yl).child,1028&t.subtreeFlags&&null!==e)e.return=t,Yl=e;else for(;null!==Yl;){t=Yl;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:el(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(re(163))}}catch(w){ku(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Yl=e;break}Yl=t.return}p=Zl,Zl=!1}(e,n),pc(n,e),hi(Zi),Bn=!!Xi,Zi=Xi=null,e.current=n,gc(n),Kt(),Tc=o,_n=a,Ic.transition=s}else e.current=n;if(Vc&&(Vc=!1,Hc=e,Gc=i),s=e.pendingLanes,0===s&&(qc=null),function(e){if(rn&&"function"==typeof rn.onCommitFiberRoot)try{rn.onCommitFiberRoot(nn,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),tu(e,Qt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($c)throw $c=!1,e=Bc,Bc=null,e;!!(1&Gc)&&0!==e.tag&&wu(),s=e.pendingLanes,1&s?e===Qc?Kc++:(Kc=0,Qc=e):Kc=0,zs()}(e,t,n,r)}finally{Ic.transition=i,_n=r}return null}function wu(){if(null!==Hc){var e=vn(Gc),t=Ic.transition,n=_n;try{if(Ic.transition=null,_n=16>e?16:e,null===Hc)var r=!1;else{if(e=Hc,Hc=null,Gc=0,6&Tc)throw Error(re(331));var i=Tc;for(Tc|=4,Yl=e.current;null!==Yl;){var s=Yl,a=s.child;if(16&Yl.flags){var o=s.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(Yl=c;null!==Yl;){var u=Yl;switch(u.tag){case 0:case 11:case 15:ec(8,u,s)}var d=u.child;if(null!==d)d.return=u,Yl=d;else for(;null!==Yl;){var h=(u=Yl).sibling,f=u.return;if(rc(u),u===c){Yl=null;break}if(null!==h){h.return=f,Yl=h;break}Yl=f}}}var p=s.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Yl=s}}if(2064&s.subtreeFlags&&null!==a)a.return=s,Yl=a;else e:for(;null!==Yl;){if(2048&(s=Yl).flags)switch(s.tag){case 0:case 11:case 15:ec(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Yl=y;break e}Yl=s.return}}var _=e.current;for(Yl=_;null!==Yl;){var v=(a=Yl).child;if(2064&a.subtreeFlags&&null!==v)v.return=a,Yl=v;else e:for(a=_;null!==Yl;){if(2048&(o=Yl).flags)try{switch(o.tag){case 0:case 11:case 15:tc(9,o)}}catch(b){ku(o,o.return,b)}if(o===a){Yl=null;break e}var w=o.sibling;if(null!==w){w.return=o.return,Yl=w;break e}Yl=o.return}}if(Tc=i,zs(),rn&&"function"==typeof rn.onPostCommitFiberRoot)try{rn.onPostCommitFiberRoot(nn,e)}catch(b){}r=!0}return r}finally{_n=n,Ic.transition=t}}return!1}function bu(e,t,n){e=ja(e,t=dl(0,t=ol(n,t),1),1),t=Xc(),null!==e&&(gn(e,1,t),tu(e,t))}function ku(e,t,n){if(3===e.tag)bu(e,e,n);else for(;null!==t;){if(3===t.tag){bu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===qc||!qc.has(r))){t=ja(t,e=hl(t,e=ol(n,e),1),1),e=Xc(),null!==t&&(gn(t,1,e),tu(t,e));break}}t=t.return}}function Cu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Xc(),e.pingedLanes|=e.suspendedLanes&n,Ec===e&&(Nc&n)===n&&(4===Ac||3===Ac&&(130023424&Nc)===Nc&&500>Qt()-Uc?uu(e,0):Mc|=n),tu(e,t)}function Su(e,t){0===t&&(1&e.mode?(t=cn,!(130023424&(cn<<=1))&&(cn=4194304)):t=1);var n=Xc();null!==(e=Aa(e,t))&&(gn(e,t,n),tu(e,n))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Su(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(re(314))}null!==r&&r.delete(t),Su(e,n)}function Eu(e,t){return Vt(e,t)}function xu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nu(e,t,n,r){return new xu(e,t,n,r)}function Pu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ru(e,t){var n=e.alternate;return null===n?((n=Nu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Au(e,t,n,r,i,s){var a=2;if(r=e,"function"==typeof e)Pu(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case be:return Ou(n.children,i,s,t);case ke:a=8,i|=8;break;case Ce:return(e=Nu(12,n,t,2|i)).elementType=Ce,e.lanes=s,e;case Ee:return(e=Nu(13,n,t,i)).elementType=Ee,e.lanes=s,e;case xe:return(e=Nu(19,n,t,i)).elementType=xe,e.lanes=s,e;case Re:return Du(n,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Se:a=10;break e;case Ie:a=9;break e;case Te:a=11;break e;case Ne:a=14;break e;case Pe:a=16,r=null;break e}throw Error(re(130,null==e?e:typeof e,""))}return(t=Nu(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Ou(e,t,n,r){return(e=Nu(7,e,r,t)).lanes=n,e}function Du(e,t,n,r){return(e=Nu(22,e,r,t)).elementType=Re,e.lanes=n,e.stateNode={isHidden:!1},e}function Lu(e,t,n){return(e=Nu(6,e,null,t)).lanes=n,e}function Mu(e,t,n){return(t=Nu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mn(0),this.expirationTimes=mn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mn(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fu(e,t,n,r,i,s,a,o,l){return e=new ju(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Nu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(s),e}function Uu(e){if(!e)return Is;e:{if(zt(e=e._reactInternals)!==e||1!==e.tag)throw Error(re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ps(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(re(171))}if(1===e.tag){var n=e.type;if(Ps(n))return Os(e,n,t)}return t}function zu(e,t,n,r,i,s,a,o,l){return(e=Fu(n,r,!0,e,0,s,0,o,l)).context=Uu(null),n=e.current,(s=Ma(r=Xc(),i=Zc(n))).callback=null!=t?t:null,ja(n,s,i),e.current.lanes=i,gn(e,i,r),tu(e,r),e}function Wu(e,t,n,r){var i=t.current,s=Xc(),a=Zc(i);return n=Uu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ma(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=ja(i,t,a))&&(eu(e,i,a,s),Fa(e,i,a)),a}function $u(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Bu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qu(e,t){Bu(e,t),(e=e.alternate)&&Bu(e,t)}bc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Es.current)yl=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return yl=!1,function(e,t,n){switch(t.tag){case 3:El(t),da();break;case 5:Qa(t);break;case 1:Ps(t.type)&&Ds(t);break;case 4:Ga(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ss(wa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ss(Ja,1&Ja.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ll(e,t,n):(Ss(Ja,1&Ja.current),null!==(e=$l(e,t,n))?e.sibling:null);Ss(Ja,1&Ja.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return zl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ss(Ja,Ja.current),r)break;return null;case 22:case 23:return t.lanes=0,kl(e,t,n)}return $l(e,t,n)}(e,t,n);yl=!!(131072&e.flags)}else yl=!1,na&&1048576&t.flags&&Js(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wl(e,t),e=t.pendingProps;var i=Ns(t,Ts.current);Ea(t,n),i=po(null,t,r,e,i,n);var s=mo();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ps(r)?(s=!0,Ds(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=nl,t.stateNode=i,i._reactInternals=t,al(t,r,e,n),t=Tl(null,t,r,!0,s,n)):(t.tag=0,na&&s&&Xs(t),_l(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wl(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Pu(e)?1:0;if(null!=e){if((e=e.$$typeof)===Te)return 11;if(e===Ne)return 14}return 2}(r),e=el(r,e),i){case 0:t=Sl(null,t,r,e,n);break e;case 1:t=Il(null,t,r,e,n);break e;case 11:t=vl(null,t,r,e,n);break e;case 14:t=wl(null,t,r,el(r.type,e),n);break e}throw Error(re(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Sl(e,t,r,i=t.elementType===r?i:el(r,i),n);case 1:return r=t.type,i=t.pendingProps,Il(e,t,r,i=t.elementType===r?i:el(r,i),n);case 3:e:{if(El(t),null===e)throw Error(re(387));r=t.pendingProps,i=(s=t.memoizedState).element,La(e,t),za(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=xl(e,t,r,n,i=ol(Error(re(423)),t));break e}if(r!==i){t=xl(e,t,r,n,i=ol(Error(re(424)),t));break e}for(ta=os(t.stateNode.containerInfo.firstChild),ea=t,na=!0,ra=null,n=va(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=$l(e,t,n);break e}_l(e,t,r,n)}t=t.child}return t;case 5:return Qa(t),null===e&&oa(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,es(r,i)?a=null:null!==s&&es(r,s)&&(t.flags|=32),Cl(e,t),_l(e,t,a,n),t.child;case 6:return null===e&&oa(t),null;case 13:return Ll(e,t,n);case 4:return Ga(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_a(t,null,r,n):_l(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,vl(e,t,r,i=t.elementType===r?i:el(r,i),n);case 7:return _l(e,t,t.pendingProps,n),t.child;case 8:case 12:return _l(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ss(wa,r._currentValue),r._currentValue=a,null!==s)if(si(s.value,a)){if(s.children===i.children&&!Es.current){t=$l(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var o=s.dependencies;if(null!==o){a=s.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=Ma(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ta(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(re(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),Ta(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_l(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=xa(i)),t.flags|=1,_l(e,t,r,n),t.child;case 14:return i=el(r=t.type,t.pendingProps),wl(e,t,r,i=el(r.type,i),n);case 15:return bl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:el(r,i),Wl(e,t),t.tag=1,Ps(r)?(e=!0,Ds(t)):e=!1,Ea(t,n),il(t,r,i),al(t,r,i,n),Tl(null,t,r,!0,e,n);case 19:return zl(e,t,n);case 22:return kl(e,t,n)}throw Error(re(156,t.tag))};var Vu="function"==typeof reportError?reportError:function(e){console.error(e)};function Hu(e){this._internalRoot=e}function Gu(e){this._internalRoot=e}function Ku(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yu(){}function Ju(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"==typeof i){var o=i;i=function(){var e=$u(a);o.call(e)}}Wu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=$u(a);s.call(e)}}var a=zu(t,r,e,0,null,!1,0,"",Yu);return e._reactRootContainer=a,e[hs]=a.current,zi(8===e.nodeType?e.parentNode:e),lu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var o=r;r=function(){var e=$u(l);o.call(e)}}var l=Fu(e,0,!1,null,0,!1,0,"",Yu);return e._reactRootContainer=l,e[hs]=l.current,zi(8===e.nodeType?e.parentNode:e),lu(function(){Wu(t,l,n,r)}),l}(n,t,e,i,r);return $u(a)}Gu.prototype.render=Hu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(re(409));Wu(e,t,null,null)},Gu.prototype.unmount=Hu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lu(function(){Wu(null,e,null,null)}),t[hs]=null}},Gu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<An.length&&0!==t&&t<An[n].priority;n++);An.splice(n,0,e),0===n&&Mn(e)}},wn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=un(t.pendingLanes);0!==n&&(yn(t,1|n),tu(t,Qt()),!(6&Tc)&&(zc=Qt()+500,zs()))}break;case 13:lu(function(){var t=Aa(e,1);if(null!==t){var n=Xc();eu(t,e,1,n)}}),qu(e,1)}},bn=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)eu(t,e,134217728,Xc());qu(e,134217728)}},kn=function(e){if(13===e.tag){var t=Zc(e),n=Aa(e,t);if(null!==n)eu(n,e,t,Xc());qu(e,t)}},Cn=function(){return _n},Sn=function(e,t){var n=_n;try{return _n=e,t()}finally{_n=n}},wt=function(e,t,n){switch(t){case"input":if(Ye(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=vs(r);if(!i)throw Error(re(90));Ve(r),Ye(r,i)}}}break;case"textarea":rt(e,n);break;case"select":null!=(t=n.value)&&et(e,!!n.multiple,t,!1)}},Tt=ou,Et=lu;var Xu={usingClientEntryPoint:!1,Events:[ys,_s,vs,St,It,ou]},Zu={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ed={bundleType:Zu.bundleType,version:Zu.version,rendererPackageName:Zu.rendererPackageName,rendererConfig:Zu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_e.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Bt(e))?null:e.stateNode},findFiberByHostInstance:Zu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{nn=td.inject(ed),rn=td}catch(lt){}}J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xu,J.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ku(t))throw Error(re(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:we,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},J.createRoot=function(e,t){if(!Ku(e))throw Error(re(299));var n=!1,r="",i=Vu;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fu(e,1,!1,null,0,n,0,r,i),e[hs]=t.current,zi(8===e.nodeType?e.parentNode:e),new Hu(t)},J.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(re(188));throw e=Object.keys(e).join(","),Error(re(268,e))}return e=null===(e=Bt(t))?null:e.stateNode},J.flushSync=function(e){return lu(e)},J.hydrate=function(e,t,n){if(!Qu(t))throw Error(re(200));return Ju(null,e,t,!0,n)},J.hydrateRoot=function(e,t,n){if(!Ku(e))throw Error(re(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Vu;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zu(t,null,e,1,null!=n?n:null,i,0,s,a),e[hs]=t.current,zi(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gu(t)},J.render=function(e,t,n){if(!Qu(t))throw Error(re(200));return Ju(null,e,t,!1,n)},J.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(re(40));return!!e._reactRootContainer&&(lu(function(){Ju(null,null,e,!1,function(){e._reactRootContainer=null,e[hs]=null})}),!0)},J.unstable_batchedUpdates=ou,J.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(re(200));if(null==e||void 0===e._reactInternals)throw Error(re(38));return Ju(e,t,n,!1,r)},J.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Y.exports=J;var nd=Y.exports;Q.createRoot=nd.createRoot,Q.hydrateRoot=nd.hydrateRoot;const rd=500,id=250,sd=[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5],ad=20,od=119,ld=134,cd=200,ud=215,dd={CYAN:"cyan",MAGENTA:"magenta",GREEN:"green",ORANGE:"orange"},hd={id:"classic",name:"Classic",description:"Traditional dartboard appearance",colors:{segment1:"#0a0a0a",segment2:"#f5f0e8",double:"#b8232a",triple:"#0d6b2e",bullOuter:"#0d6b2e",bullInner:"#b8232a",wire:"#888888",numbers:"#f5f0e8",background:"#1a1a1a"},wireStyle:{width:1,glow:!1}},fd={id:"neon_glow",name:"Neon Glow",description:"Dark board with glowing neon wires",colors:{segment1:"#0a0a12",segment2:"#1a1a28",double:"#2a0a1a",triple:"#0a1a1a",bullOuter:"#0a1a1a",bullInner:"#2a0a1a",wire:"#00ffff",numbers:"#00ffff",background:"#050508"},wireStyle:{width:1.2,glow:!0,glowColor:"rgba(0, 255, 255, 0.6)",glowIntensity:10}},pd={classic:hd,pro_wire:{id:"pro_wire",name:"Pro Wire",description:"Tournament style with thin metal wire dividers",colors:{segment1:"#0a0a0a",segment2:"#e8e4dc",double:"#c41e3a",triple:"#1a8b45",bullOuter:"#1a8b45",bullInner:"#c41e3a",wire:"#d4d4d4",numbers:"#ffffff",background:"#1a1a1a"},wireStyle:{width:.8,glow:!1}},neon_glow:fd,gold_elite:{id:"gold_elite",name:"Gold Elite",description:"Premium golden accents",colors:{segment1:"#1a1408",segment2:"#2a2010",double:"#d4a03a",triple:"#e8b94a",bullOuter:"#d4a03a",bullInner:"#e8b94a",wire:"#d4a03a",numbers:"#d4a03a",background:"#0a0806"},wireStyle:{width:1,glow:!0,glowColor:"rgba(212, 160, 58, 0.4)",glowIntensity:5},premiumOnly:!0},stealth:{id:"stealth",name:"Stealth",description:"Dark minimal look",colors:{segment1:"#0a0a0a",segment2:"#1a1a1a",double:"#2a2a2a",triple:"#3a3a3a",bullOuter:"#2a2a2a",bullInner:"#3a3a3a",wire:"#4a4a4a",numbers:"#6a6a6a",background:"#050505"},wireStyle:{width:.5,glow:!1}}};const md=({theme:e=hd,dartPositions:t=[],aimPosition:n=null,showAimCursor:r=!1,onBoardClick:i,onBoardMove:s,onBoardLeave:a,disabled:o=!1,className:l=""})=>{const c=e.colors,u=e.wireStyle,d=U.useMemo(()=>{const e=[];return sd.forEach((t,n)=>{const r=(18*n-9-90)*Math.PI/180,i=(18*n+9-90)*Math.PI/180,s=n%2==0,a=s?c.segment1:c.segment2,o=s?c.double:c.triple,l=id+ad*Math.cos(r),u=id+ad*Math.sin(r),d=id+ad*Math.cos(i),h=id+ad*Math.sin(i),f=id+od*Math.cos(r),p=id+od*Math.sin(r),m=id+od*Math.cos(i),g=id+od*Math.sin(i);e.push(K.jsx("path",{d:`M ${l} ${u}\n              A 20 20 0 0 1 ${d} ${h}\n              L ${m} ${g}\n              A 119 119 0 0 0 ${f} ${p}\n              Z`,fill:a},`single-inner-${n}`));const y=id+od*Math.cos(r),_=id+od*Math.sin(r),v=id+od*Math.cos(i),w=id+od*Math.sin(i),b=id+ld*Math.cos(r),k=id+ld*Math.sin(r),C=id+ld*Math.cos(i),S=id+ld*Math.sin(i);e.push(K.jsx("path",{d:`M ${y} ${_}\n              A 119 119 0 0 1 ${v} ${w}\n              L ${C} ${S}\n              A 134 134 0 0 0 ${b} ${k}\n              Z`,fill:o},`triple-${n}`));const I=id+ld*Math.cos(r),T=id+ld*Math.sin(r),E=id+ld*Math.cos(i),x=id+ld*Math.sin(i),N=id+cd*Math.cos(r),P=id+cd*Math.sin(r),R=id+cd*Math.cos(i),A=id+cd*Math.sin(i);e.push(K.jsx("path",{d:`M ${I} ${T}\n              A 134 134 0 0 1 ${E} ${x}\n              L ${R} ${A}\n              A 200 200 0 0 0 ${N} ${P}\n              Z`,fill:a},`single-outer-${n}`));const O=id+cd*Math.cos(r),D=id+cd*Math.sin(r),L=id+cd*Math.cos(i),M=id+cd*Math.sin(i),j=id+ud*Math.cos(r),F=id+ud*Math.sin(r),U=id+ud*Math.cos(i),z=id+ud*Math.sin(i);e.push(K.jsx("path",{d:`M ${O} ${D}\n              A 200 200 0 0 1 ${L} ${M}\n              L ${U} ${z}\n              A 215 215 0 0 0 ${j} ${F}\n              Z`,fill:o},`double-${n}`))}),e},[c]),h=U.useMemo(()=>{const e=[],t=c.wire,n=u.width;sd.forEach((r,i)=>{const s=(18*i-9-90)*Math.PI/180,a=id+ad*Math.cos(s),o=id+ad*Math.sin(s),l=id+ud*Math.cos(s),c=id+ud*Math.sin(s);e.push(K.jsx("line",{x1:a,y1:o,x2:l,y2:c,stroke:t,strokeWidth:n},`wire-radial-${i}`))});return[ad,od,ld,cd,ud].forEach((r,i)=>{e.push(K.jsx("circle",{cx:id,cy:id,r:r,fill:"none",stroke:t,strokeWidth:n},`wire-circle-${i}`))}),e},[c.wire,u.width]),f=U.useMemo(()=>{const e=[];return sd.forEach((t,n)=>{const r=(18*n-90)*Math.PI/180,i=id+231*Math.cos(r),s=id+231*Math.sin(r);e.push(K.jsx("text",{x:i,y:s,fill:c.numbers,fontSize:"16",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"middle",style:{fontFamily:"'Oswald', sans-serif"},children:t},`number-${n}`))}),e},[c.numbers]),p=U.useCallback(e=>{if(o)return;const t=e.currentTarget.getBoundingClientRect();let n,r;if("touches"in e){if(0===e.touches.length)return;n=e.touches[0].clientX,r=e.touches[0].clientY}else n=e.clientX,r=e.clientY;return{x:(n-t.left)/t.width*rd,y:(r-t.top)/t.height*rd}},[o]),m=U.useCallback(e=>{const t=p(e);t&&i&&i(t.x,t.y)},[p,i]),g=U.useCallback(e=>{const t=p(e);t&&s&&s(t.x,t.y)},[p,s]),y=U.useCallback(e=>{e.preventDefault();const t=p(e);t&&s&&s(t.x,t.y)},[p,s]);return K.jsxs("svg",{viewBox:"0 0 500 500",className:`dartboard ${l}`,onClick:m,onMouseMove:g,onMouseLeave:a,onTouchMove:y,onTouchEnd:a,style:{width:"100%",maxWidth:"500px",cursor:o?"default":"crosshair",touchAction:"none"},children:[K.jsx("rect",{x:"0",y:"0",width:rd,height:rd,fill:c.background}),d,K.jsx("circle",{cx:id,cy:id,r:ad,fill:c.bullOuter}),K.jsx("circle",{cx:id,cy:id,r:10,fill:c.bullInner}),K.jsxs("g",{style:{filter:u.glow?`drop-shadow(0 0 ${u.glowIntensity||5}px ${u.glowColor||c.wire})`:void 0},children:[h,K.jsx("circle",{cx:id,cy:id,r:10,fill:"none",stroke:c.wire,strokeWidth:u.width})]}),f,r&&n&&K.jsxs("g",{children:[K.jsx("circle",{cx:n.x,cy:n.y,r:8,fill:"none",stroke:"rgba(255, 255, 255, 0.8)",strokeWidth:"2"}),K.jsx("circle",{cx:n.x,cy:n.y,r:2,fill:"rgba(255, 255, 255, 0.9)"})]}),t.map(e=>K.jsxs("g",{children:[K.jsx("circle",{cx:e.x+2,cy:e.y+2,r:6,fill:"rgba(0, 0, 0, 0.3)"}),K.jsx("circle",{cx:e.x,cy:e.y,r:5,fill:"#ff4444",stroke:"#cc0000",strokeWidth:"1"}),K.jsx("circle",{cx:e.x,cy:e.y,r:2,fill:"#ffcc00"})]},e.id))]})},gd=({players:e,currentPlayerIndex:t,dartsThrown:n,currentTurnScore:r,checkout:i=null,legScores:s=[],setScores:a=[],gameStats:o={},showStats:l=!1})=>{const c=e[t];return K.jsxs("div",{className:"score-display",children:[K.jsx("div",{className:"score-display__players",children:e.map((e,n)=>{const r=n===t,i=o[e.id];return K.jsxs("div",{className:"score-display__player "+(r?"score-display__player--active":""),children:[K.jsxs("div",{className:"score-display__player-header",children:[K.jsx("span",{className:"score-display__flag",children:e.flag}),K.jsx("span",{className:"score-display__name",children:e.name}),e.isAI&&K.jsx("span",{className:"score-display__ai-badge",children:"AI"})]}),K.jsx("div",{className:"score-display__score",children:e.score}),(s.length>0||a.length>0)&&K.jsxs("div",{className:"score-display__match-score",children:[K.jsxs("span",{className:"score-display__legs",children:["Legs: ",s[n]||0]}),a.length>0&&K.jsxs("span",{className:"score-display__sets",children:["Sets: ",a[n]||0]})]}),l&&i&&K.jsxs("div",{className:"score-display__stats",children:[K.jsxs("div",{className:"score-display__stat",children:[K.jsx("span",{className:"score-display__stat-label",children:"Avg"}),K.jsx("span",{className:"score-display__stat-value",children:i.dartsThrown>0?(i.totalScore/i.dartsThrown*3).toFixed(1):"0.0"})]}),K.jsxs("div",{className:"score-display__stat",children:[K.jsx("span",{className:"score-display__stat-label",children:"High"}),K.jsx("span",{className:"score-display__stat-value",children:i.highest3DartScore})]})]})]},e.id)})}),K.jsxs("div",{className:"score-display__turn-info",children:[K.jsxs("div",{className:"score-display__darts",children:[K.jsx("span",{className:"score-display__darts-label",children:"Darts"}),K.jsx("div",{className:"score-display__darts-indicators",children:[0,1,2].map(e=>K.jsx("span",{className:"score-display__dart-indicator "+(e<n?"score-display__dart-indicator--thrown":"")},e))})]}),K.jsxs("div",{className:"score-display__turn-score",children:[K.jsx("span",{className:"score-display__turn-score-label",children:"Turn"}),K.jsx("span",{className:"score-display__turn-score-value",children:r})]})]}),i&&c&&c.score<=170&&K.jsxs("div",{className:"score-display__checkout",children:[K.jsx("span",{className:"score-display__checkout-label",children:"Checkout"}),K.jsx("span",{className:"score-display__checkout-route",children:i})]})]})},yd=({power:e,isCharging:t,showPerfectZone:n=!0,perfectZoneMin:r=45,perfectZoneMax:i=55,orientation:s="vertical",className:a=""})=>{const o=e>=r&&e<=i,l=U.useMemo(()=>o?"var(--color-success)":e<30||e>70?"var(--color-error)":"var(--color-accent)",[e,o]),c=U.useMemo(()=>"vertical"===s?{height:`${e}%`}:{width:`${e}%`},[e,s]);return K.jsxs("div",{className:`power-bar power-bar--${s} ${t?"power-bar--charging":""} ${a}`,children:[K.jsxs("div",{className:"power-bar__track",children:[n&&K.jsx("div",{className:"power-bar__perfect-zone",style:"vertical"===s?{bottom:`${r}%`,height:i-r+"%"}:{left:`${r}%`,width:i-r+"%"}}),K.jsx("div",{className:"power-bar__fill",style:{...c,backgroundColor:l}}),K.jsx("div",{className:"power-bar__indicator",style:"vertical"===s?{bottom:`${e}%`}:{left:`${e}%`}})]}),K.jsxs("div",{className:"power-bar__label",children:[K.jsx("span",{className:"power-bar__value",children:Math.round(e)}),K.jsx("span",{className:"power-bar__unit",children:"%"})]}),o&&t&&K.jsx("div",{className:"power-bar__perfect-label",children:"PERFECT"})]})};var _d={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="${JSCORE_VERSION}",wd=function(e,t){if(!e)throw bd(t)},bd=function(e){return new Error("Firebase Database ("+vd+") INTERNAL ASSERT FAILED: "+e)},kd=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Cd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(kd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Sd;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Id=function(e){const t=kd(e);return Cd.encodeByteArray(t,!0)},Td=function(e){return Id(e).replace(/\./g,"")},Ed=function(e){try{return Cd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xd(e){return Nd(void 0,e)}function Nd(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&Pd(n)&&(e[n]=Nd(e[n],t[n]));return e}function Pd(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Rd=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ad=()=>{try{return Rd()||(()=>{if("undefined"==typeof process)return;const e=_d.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Ed(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Od=e=>{var t,n;return null==(n=null==(t=Ad())?void 0:t.emulatorHosts)?void 0:n[e]},Dd=e=>{const t=Od(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ld=()=>{var e;return null==(e=Ad())?void 0:e.config},Md=e=>{var t;return null==(t=Ad())?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class jd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ud(e){return(await fetch(e,{credentials:"include"})).ok}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd={};let Wd=!1;function $d(e,t){if("undefined"==typeof window||"undefined"==typeof document||!Fd(window.location.host)||zd[e]===t||zd[e]||Wd)return;function n(e){return`__firebase__banner__${e}`}zd[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(zd))zd[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Wd=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qd(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bd())}function Vd(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class Hd extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Hd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gd.prototype.create)}}class Gd{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Kd,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",a=`${this.serviceName}: ${s} (${r}).`;return new Hd(r,a,n)}}const Kd=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(e){return JSON.parse(e)}function Yd(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=Qd(Ed(s[0])||""),n=Qd(Ed(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Zd(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function eh(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function th(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function nh(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(rh(n)&&rh(s)){if(!nh(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function rh(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^a&(o^l),i=1518500249):(r=a^o^l,i=1859775393):u<60?(r=a&o|l&(a|o),i=2400959708):(r=a^o^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class ah{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=oh),void 0===r.error&&(r.error=oh),void 0===r.complete&&(r.complete=oh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oh(){}function lh(e,t){return`${e} failed: ${t} argument `}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function uh(e){return e&&e._delegate?e._delegate:e}class dh{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new jd;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=(null==e?void 0:e.optional)??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:hh})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=hh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=hh){return this.instances.has(e)}getOptions(e=hh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===hh?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}var r;return n||null}normalizeInstanceIdentifier(e=hh){return this.component?this.component.multipleInstances?e:hh:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ph{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mh,gh;(gh=mh||(mh={}))[gh.DEBUG=0]="DEBUG",gh[gh.VERBOSE=1]="VERBOSE",gh[gh.INFO=2]="INFO",gh[gh.WARN=3]="WARN",gh[gh.ERROR=4]="ERROR",gh[gh.SILENT=5]="SILENT";const yh={debug:mh.DEBUG,verbose:mh.VERBOSE,info:mh.INFO,warn:mh.WARN,error:mh.ERROR,silent:mh.SILENT},_h=mh.INFO,vh={[mh.DEBUG]:"log",[mh.VERBOSE]:"log",[mh.INFO]:"info",[mh.WARN]:"warn",[mh.ERROR]:"error"},wh=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=vh[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class bh{constructor(e){this.name=e,this._logLevel=_h,this._logHandler=wh,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mh))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?yh[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mh.DEBUG,...e),this._logHandler(this,mh.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mh.VERBOSE,...e),this._logHandler(this,mh.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mh.INFO,...e),this._logHandler(this,mh.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mh.WARN,...e),this._logHandler(this,mh.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mh.ERROR,...e),this._logHandler(this,mh.ERROR,...e)}}let kh,Ch;const Sh=new WeakMap,Ih=new WeakMap,Th=new WeakMap,Eh=new WeakMap,xh=new WeakMap;let Nh={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ih.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Th.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ah(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ph(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ch||(Ch=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Oh(this),t),Ah(Sh.get(this))}:function(...t){return Ah(e.apply(Oh(this),t))}:function(t,...n){const r=e.call(Oh(this),t,...n);return Th.set(r,t.sort?t.sort():[t]),Ah(r)}}function Rh(e){return"function"==typeof e?Ph(e):(e instanceof IDBTransaction&&function(e){if(Ih.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Ih.set(e,t)}(e),t=e,(kh||(kh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Nh):e);var t}function Ah(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Ah(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Sh.set(t,e)}).catch(()=>{}),xh.set(t,e),t}(e);if(Eh.has(e))return Eh.get(e);const t=Rh(e);return t!==e&&(Eh.set(e,t),xh.set(t,e)),t}const Oh=e=>xh.get(e);const Dh=["get","getKey","getAll","getAllKeys","count"],Lh=["put","add","delete","clear"],Mh=new Map;function jh(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Mh.get(t))return Mh.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Lh.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Dh.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let a=s.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&s.done]))[0]};return Mh.set(t,s),s}Nh=(e=>({...e,get:(t,n,r)=>jh(t,n)||e.get(t,n,r),has:(t,n)=>!!jh(t,n)||e.has(t,n)}))(Nh);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Fh{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Uh="@firebase/app",zh="0.14.7",Wh=new bh("@firebase/app"),$h="@firebase/app-compat",Bh="@firebase/analytics-compat",qh="@firebase/analytics",Vh="@firebase/app-check-compat",Hh="@firebase/app-check",Gh="@firebase/auth",Kh="@firebase/auth-compat",Qh="@firebase/database",Yh="@firebase/data-connect",Jh="@firebase/database-compat",Xh="@firebase/functions",Zh="@firebase/functions-compat",ef="@firebase/installations",tf="@firebase/installations-compat",nf="@firebase/messaging",rf="@firebase/messaging-compat",sf="@firebase/performance",af="@firebase/performance-compat",of="@firebase/remote-config",lf="@firebase/remote-config-compat",cf="@firebase/storage",uf="@firebase/storage-compat",df="@firebase/firestore",hf="@firebase/ai",ff="@firebase/firestore-compat",pf="firebase",mf="[DEFAULT]",gf={[Uh]:"fire-core",[$h]:"fire-core-compat",[qh]:"fire-analytics",[Bh]:"fire-analytics-compat",[Hh]:"fire-app-check",[Vh]:"fire-app-check-compat",[Gh]:"fire-auth",[Kh]:"fire-auth-compat",[Qh]:"fire-rtdb",[Yh]:"fire-data-connect",[Jh]:"fire-rtdb-compat",[Xh]:"fire-fn",[Zh]:"fire-fn-compat",[ef]:"fire-iid",[tf]:"fire-iid-compat",[nf]:"fire-fcm",[rf]:"fire-fcm-compat",[sf]:"fire-perf",[af]:"fire-perf-compat",[of]:"fire-rc",[lf]:"fire-rc-compat",[cf]:"fire-gcs",[uf]:"fire-gcs-compat",[df]:"fire-fst",[ff]:"fire-fst-compat",[hf]:"fire-vertex","fire-js":"fire-js",[pf]:"fire-js-all"},yf=new Map,_f=new Map,vf=new Map;function wf(e,t){try{e.container.addComponent(t)}catch(n){Wh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function bf(e){const t=e.name;if(vf.has(t))return Wh.debug(`There were multiple attempts to register component ${t}.`),!1;vf.set(t,e);for(const n of yf.values())wf(n,e);for(const n of _f.values())wf(n,e);return!0}function kf(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Cf(e){return null!=e&&void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new Gd("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class If{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new dh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sf.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="12.8.0";function Ef(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r={name:mf,automaticDataCollectionEnabled:!0,...t},i=r.name;if("string"!=typeof i||!i)throw Sf.create("bad-app-name",{appName:String(i)});if(n||(n=Ld()),!n)throw Sf.create("no-options");const s=yf.get(i);if(s){if(nh(n,s.options)&&nh(r,s.config))return s;throw Sf.create("duplicate-app",{appName:i})}const a=new ph(i);for(const l of vf.values())a.addComponent(l);const o=new If(n,r,a);return yf.set(i,o),o}function xf(e=mf){const t=yf.get(e);if(!t&&e===mf&&Ld())return Ef();if(!t)throw Sf.create("no-app",{appName:e});return t}function Nf(e,t,n){let r=gf[e]??e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${r}" with version "${t}":`];return i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Wh.warn(e.join(" "))}bf(new dh(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="firebase-heartbeat-store";let Rf=null;function Af(){return Rf||(Rf=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),o=Ah(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Ah(a.result),e.oldVersion,e.newVersion,Ah(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Pf)}catch(n){console.warn(n)}}}).catch(e=>{throw Sf.create("idb-open",{originalErrorMessage:e.message})})),Rf}async function Of(e,t){try{const n=(await Af()).transaction(Pf,"readwrite"),r=n.objectStore(Pf);await r.put(t,Df(e)),await n.done}catch(n){if(n instanceof Hd)Wh.warn(n.message);else{const e=Sf.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Wh.warn(e.message)}}}function Df(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jf(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Mf();if(null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Wh.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Mf(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Ff(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ff(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Td(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Wh.warn(t),""}}}function Mf(){return(new Date).toISOString().substring(0,10)}class jf{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null==(e=i.error)?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Af()).transaction(Pf),n=await t.objectStore(Pf).get(Df(e));return await t.done,n}catch(t){if(t instanceof Hd)Wh.warn(t.message);else{const e=Sf.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Wh.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return Of(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return Of(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function Ff(e){return Td(JSON.stringify({version:2,heartbeats:e})).length}var Uf;function zf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}Uf="",bf(new dh("platform-logger",e=>new Fh(e),"PRIVATE")),bf(new dh("heartbeat",e=>new Lf(e),"PRIVATE")),Nf(Uh,zh,Uf),Nf(Uh,zh,"esm2020"),Nf("fire-js","");const Wf=zf,$f=new Gd("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bf=new bh("@firebase/auth");function qf(e,...t){Bf.logLevel<=mh.ERROR&&Bf.error(`Auth (${Tf}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(e,...t){throw Qf(e,...t)}function Hf(e,...t){return Qf(e,...t)}function Gf(e,t,n){const r={...Wf(),[t]:n};return new Gd("auth","Firebase",r).create(t,{appName:e.name})}function Kf(e){return Gf(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qf(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return $f.create(e,...t)}function Yf(e,t,...n){if(!e)throw Qf(t,...n)}function Jf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw qf(t),new Error(t)}function Xf(e,t){e||Jf(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.href)||""}function ep(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==ep()&&"https:"!==ep()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class np{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xf(t>e,"Short delay should be less than long delay!"),this.isMobile=qd()||Vd()}get(){return tp()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(e,t){Xf(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Jf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Jf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Jf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ap=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],op=new np(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function cp(e,t,n,r,i={}){return up(e,i,async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=ih({key:e.config.apiKey,...s}).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l={method:t,headers:o,...i};return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Fd(e.emulatorConfig.host)&&(l.credentials="include"),ip.fetch()(await hp(e,e.config.apiHost,n,a),l)})}async function up(e,t,n){e._canInitEmulator=!1;const r={...sp,...t};try{const t=new fp(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw pp(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw pp(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw pp(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw pp(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Gf(e,o,a);Vf(e,o)}}catch(i){if(i instanceof Hd)throw i;Vf(e,"network-request-failed",{message:String(i)})}}async function dp(e,t,n,r,i={}){const s=await cp(e,t,n,r,i);return"mfaPendingCredential"in s&&Vf(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function hp(e,t,n,r){const i=`${t}${n}?${r}`,s=e,a=s.config.emulator?rp(e.config,i):`${e.config.apiScheme}://${i}`;if(ap.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}class fp{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Hf(this.auth,"network-request-failed")),op.get())})}}function pp(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Hf(e,t,r);return i.customData._tokenResponse=n,i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mp(e,t){return cp(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function yp(e){return 1e3*Number(e)}function _p(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return qf("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ed(n);return e?JSON.parse(e):(qf("Failed to decode base64 JWT payload"),null)}catch(i){return qf("Caught error parsing JWT payload as JSON",null==i?void 0:i.toString()),null}}function vp(e){const t=_p(e);return Yf(t,"internal-error"),Yf(void 0!==t.exp,"internal-error"),Yf(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wp(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Hd&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class bp{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gp(this.lastLoginAt),this.creationTime=gp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cp(e){var t;const n=e.auth,r=await e.getIdToken(),i=await wp(e,mp(n,{idToken:r}));Yf(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null==(t=s.providerUserInfo)?void 0:t.length)?Sp(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==o?void 0:o.length)),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new kp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Sp(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ip{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Yf(e.idToken,"internal-error"),Yf(void 0!==e.idToken,"internal-error"),Yf(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):vp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Yf(0!==e.length,"internal-error");const t=vp(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Yf(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await up(e,{},async()=>{const n=ih({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await hp(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&Fd(e.emulatorConfig.host)&&(o.credentials="include"),ip.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ip;return n&&(Yf("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Yf("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Yf("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ip,this.toJSON())}_performRefresh(){return Jf("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(e,t){Yf("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Ep{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new bp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new kp(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await wp(this,this.stsTokenManager.getToken(this.auth,e));return Yf(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=uh(e),r=await n.getIdToken(t),i=_p(r);Yf(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,a=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:gp(yp(i.auth_time)),issuedAtTime:gp(yp(i.iat)),expirationTime:gp(yp(i.exp)),signInProvider:a||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=uh(e);await Cp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Yf(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ep({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Yf(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Cp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cf(this.auth.app))return Promise.reject(Kf(this.auth));const e=await this.getIdToken();return await wp(this,async function(e,t){return cp(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,o=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:u,emailVerified:d,isAnonymous:h,providerData:f,stsTokenManager:p}=t;Yf(u&&p,e,"internal-error");const m=Ip.fromJSON(this.name,p);Yf("string"==typeof u,e,"internal-error"),Tp(n,e.name),Tp(r,e.name),Yf("boolean"==typeof d,e,"internal-error"),Yf("boolean"==typeof h,e,"internal-error"),Tp(i,e.name),Tp(s,e.name),Tp(a,e.name),Tp(o,e.name),Tp(l,e.name),Tp(c,e.name);const g=new Ep({uid:u,auth:e,email:r,emailVerified:d,displayName:n,isAnonymous:h,photoURL:s,phoneNumber:i,tenantId:a,stsTokenManager:m,createdAt:l,lastLoginAt:c});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),o&&(g._redirectEventId=o),g}static async _fromIdTokenResponse(e,t,n=!1){const r=new Ip;r.updateFromServerResponse(t);const i=new Ep({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Cp(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Yf(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Sp(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),a=new Ip;a.updateFromIdToken(n);const o=new Ep({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new kp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(o,l),o}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=new Map;function Np(e){Xf(e instanceof Function,"Expected a class definition");let t=xp.get(e);return t?(Xf(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xp.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Pp.type="NONE";const Rp=Pp;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(e,t,n){return`firebase:${e}:${t}:${n}`}class Op{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ap(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ap("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){const t=await mp(this.auth,{idToken:e}).catch(()=>{});return t?Ep._fromGetAccountInfoResponse(this.auth,t,e):null}return Ep._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Op(Np(Rp),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Np(Rp);const s=Ap(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(s);if(t){let n;if("string"==typeof t){const r=await mp(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Ep._fromGetAccountInfoResponse(e,r,t)}else n=Ep._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch{}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch{}})),new Op(i,e,n)):new Op(i,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Fp(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Lp(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zp(t))return"Blackberry";if(Wp(t))return"Webos";if(Mp(t))return"Safari";if((t.includes("chrome/")||jp(t))&&!t.includes("edge/"))return"Chrome";if(Up(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Lp(e=Bd()){return/firefox\//i.test(e)}function Mp(e=Bd()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function jp(e=Bd()){return/crios\//i.test(e)}function Fp(e=Bd()){return/iemobile/i.test(e)}function Up(e=Bd()){return/android/i.test(e)}function zp(e=Bd()){return/blackberry/i.test(e)}function Wp(e=Bd()){return/webos/i.test(e)}function $p(e=Bd()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Bp(){return function(){const e=Bd();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function qp(e=Bd()){return $p(e)||Up(e)||Wp(e)||zp(e)||/windows phone/i.test(e)||Fp(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(e,t=[]){let n;switch(e){case"Browser":n=Dp(Bd());break;case"Worker":n=`${Dp(Bd())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tf}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){var t;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),void 0!==n.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),void 0!==n.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),void 0!==n.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),void 0!==n.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(null==(t=e.allowedNonAlphanumericCharacters)?void 0:t.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yp(this),this.idTokenSubscription=new Yp(this),this.beforeStateQueue=new Hp(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$f,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Np(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Op.create(this,e),null==(n=this._resolvePersistenceManagerAvailable)||n.call(this),!this._deleted)){if(null==(r=this._popupRedirectResolver)?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null==(i=this.currentUser)?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await mp(this,{idToken:e}),n=await Ep._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Cf(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null==(t=this.redirectUser)?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null==a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Yf(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cp(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cf(this.app))return Promise.reject(Kf(this));const t=e?uh(e):null;return t&&Yf(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Yf(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cf(this.app)?Promise.reject(Kf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cf(this.app)?Promise.reject(Kf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Np(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return cp(e,"GET","/v2/passwordPolicy",lp(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new Gp(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gd("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return cp(e,"POST","/v2/accounts:revokeToken",lp(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null==(e=this._currentUser)?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Np(e)||this._popupRedirectResolver;Yf(t,this,"argument-error"),this.redirectPersistenceManager=await Op.create(this,[Np(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null==(t=this._currentUser)?void 0:t._redirectEventId)===e?this._currentUser:(null==(n=this.redirectUser)?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=(null==(e=this.currentUser)?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yf(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Yf(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null==(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Cf(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null==(e=this.appCheckServiceProvider.getImmediate({optional:!0}))?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Bf.logLevel<=mh.WARN&&Bf.warn(`Auth (${Tf}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Qp(e){return uh(e)}class Yp{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ah(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Yf(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xp(e,t,n){const r=Qp(e);Yf(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=Zp(t),{host:s,port:a}=function(e){const t=Zp(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:em(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:em(t)}}}(t),o=null===a?"":`:${a}`,l={url:`${i}//${s}${o}/`},c=Object.freeze({host:s,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!r._canInitEmulator)return Yf(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Yf(nh(l,r.config.emulator)&&nh(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,Fd(s)?(Ud(`${i}//${s}${o}`),$d("Auth",!0)):function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Zp(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function em(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class tm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jf("not implemented")}_getIdTokenResponse(e){return Jf("not implemented")}_linkToIdToken(e,t){return Jf("not implemented")}_getReauthenticationResolver(e){return Jf("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nm(e,t){return dp(e,"POST","/v1/accounts:signInWithIdp",lp(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm extends tm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rm(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vf("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const s=new rm(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return nm(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,nm(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nm(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ih(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends im{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class am extends sm{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return Yf("providerId"in t&&"signInMethod"in t,"argument-error"),rm._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Yf(e.idToken||e.accessToken,"argument-error"),rm._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return am.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return am.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:a}=e;if(!(n||r||t||i))return null;if(!a)return null;try{return new am(a)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(o){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om extends sm{constructor(){super("facebook.com")}static credential(e){return rm._fromParams({providerId:om.PROVIDER_ID,signInMethod:om.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return om.credentialFromTaggedObject(e)}static credentialFromError(e){return om.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return om.credential(e.oauthAccessToken)}catch{return null}}}om.FACEBOOK_SIGN_IN_METHOD="facebook.com",om.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class lm extends sm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rm._fromParams({providerId:lm.PROVIDER_ID,signInMethod:lm.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return lm.credentialFromTaggedObject(e)}static credentialFromError(e){return lm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return lm.credential(t,n)}catch{return null}}}lm.GOOGLE_SIGN_IN_METHOD="google.com",lm.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class cm extends sm{constructor(){super("github.com")}static credential(e){return rm._fromParams({providerId:cm.PROVIDER_ID,signInMethod:cm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cm.credentialFromTaggedObject(e)}static credentialFromError(e){return cm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return cm.credential(e.oauthAccessToken)}catch{return null}}}cm.GITHUB_SIGN_IN_METHOD="github.com",cm.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class um extends sm{constructor(){super("twitter.com")}static credential(e,t){return rm._fromParams({providerId:um.PROVIDER_ID,signInMethod:um.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return um.credentialFromTaggedObject(e)}static credentialFromError(e){return um.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return um.credential(t,n)}catch{return null}}}um.TWITTER_SIGN_IN_METHOD="twitter.com",um.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class dm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Ep._fromIdTokenResponse(e,n,r),s=hm(n);return new dm({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=hm(n);return new dm({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function hm(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fm(e){var t;if(Cf(e.app))return Promise.reject(Kf(e));const n=Qp(e);if(await n._initializationPromise,null==(t=n.currentUser)?void 0:t.isAnonymous)return new dm({user:n.currentUser,providerId:null,operationType:"signIn"});const r=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await async function(e,t){return dp(e,"POST","/v1/accounts:signUp",lp(e,t))}(n,{returnSecureToken:!0}),i=await dm._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm extends Hd{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,pm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new pm(e,t,n,r)}}function mm(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw pm._fromErrorAndOperation(e,n,t,r);throw n})}function gm(e,t,n,r){return uh(e).onAuthStateChanged(t,n,r)}const ym="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ym,"1"),this.storage.removeItem(ym),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm extends _m{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Bp()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}vm.type="LOCAL";const wm=vm;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends _m{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bm.type="SESSION";const km=bm;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Cm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Cm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Sm(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cm.receivers=[];class Im{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=Sm("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Em(){return void 0!==Tm().WorkerGlobalScope&&"function"==typeof Tm().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const xm="firebaseLocalStorageDb",Nm="firebaseLocalStorage",Pm="fbase_key";class Rm{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Am(e,t){return e.transaction([Nm],t?"readwrite":"readonly").objectStore(Nm)}function Om(){const e=indexedDB.open(xm,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Nm,{keyPath:Pm})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Nm)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(xm);return new Rm(e).toPromise()}(),t(await Om()))})})}async function Dm(e,t,n){const r=Am(e,!0).put({[Pm]:t,value:n});return new Rm(r).toPromise()}function Lm(e,t){const n=Am(e,!0).delete(t);return new Rm(n).toPromise()}class Mm{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Om()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Em()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cm._getInstance(Em()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new Im(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null==(e=n[0])?void 0:e.fulfilled)&&(null==(t=n[0])?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null==(t=null==navigator?void 0:navigator.serviceWorker)?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Om();return await Dm(e,ym,"1"),await Lm(e,ym),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dm(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Am(e,!1).get(t),r=await new Rm(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Lm(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Am(e,!1).getAll();return new Rm(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Mm.type="LOCAL";const jm=Mm;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Fm(e,t){return t?Np(t):(Yf(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new np(3e4,6e4);class Um extends tm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nm(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zm(e){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t,n=!1){if(Cf(e.app))return Promise.reject(Kf(e));const r="signIn",i=await mm(e,r,t),s=await dm._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}(e.auth,new Um(e),e.bypassAuthState)}function Wm(e){const{auth:t,user:n}=e;return Yf(n,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,n=!1){const{auth:r}=e;if(Cf(r.app))return Promise.reject(Kf(r));const i="reauthenticate";try{const s=await wp(e,mm(r,i,t,e),n);Yf(s.idToken,r,"internal-error");const a=_p(s.idToken);Yf(a,r,"internal-error");const{sub:o}=a;return Yf(e.uid===o,r,"user-mismatch"),dm._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&Vf(r,"user-mismatch"),s}}(n,new Um(e),e.bypassAuthState)}async function $m(e){const{auth:t,user:n}=e;return Yf(n,t,"internal-error"),async function(e,t,n=!1){const r=await wp(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return dm._forOperation(e,"link",r)}(n,new Um(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zm;case"linkViaPopup":case"linkViaRedirect":return $m;case"reauthViaPopup":case"reauthViaRedirect":return Wm;default:Vf(this.auth,"internal-error")}}resolve(e){Xf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=new np(2e3,1e4);async function Vm(e,t,n){if(Cf(e.app))return Promise.reject(Hf(e,"operation-not-supported-in-this-environment"));const r=Qp(e);!function(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Vf(e,"argument-error"),Gf(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,im);const i=Fm(r,n);return new Hm(r,"signInViaPopup",t,i).executeNotNull()}class Hm extends Bm{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Hm.currentPopupAction&&Hm.currentPopupAction.cancel(),Hm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Yf(e,this.auth,"internal-error"),e}async onExecution(){Xf(1===this.filter.length,"Popup operations only handle one event");const e=Sm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Hf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null==(e=this.authWindow)?void 0:e.associatedEvent)||null}cancel(){this.reject(Hf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null==(n=null==(t=this.authWindow)?void 0:t.window)?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hf(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,qm.get())};e()}}Hm.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Gm="pendingRedirect",Km=new Map;class Qm extends Bm{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Km.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Ap(Gm,e.config.apiKey,e.name)}(t),r=function(e){return Np(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Km.set(this.auth._key(),e)}return this.bypassAuthState||Km.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ym(e,t){Km.set(e._key(),t)}async function Jm(e,t,n=!1){if(Cf(e.app))return Promise.reject(Kf(e));const r=Qp(e),i=Fm(r,t),s=new Qm(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eg(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!eg(e)){const r=(null==(n=e.error.code)?void 0:n.split("auth/")[1])||"internal-error";t.onError(Hf(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zm(e))}saveEventToCache(e){this.cachedEventUids.add(Zm(e)),this.lastProcessedEventTime=Date.now()}}function Zm(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function eg({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const tg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ng=/^https?/;async function rg(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return cp(e,"GET","/v1/projects",t)}(e);for(const n of t)try{if(ig(n))return}catch{}Vf(e,"unauthorized-domain")}function ig(e){const t=Zf(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ng.test(n))return!1;if(tg.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=new np(3e4,6e4);function ag(){const e=Tm().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function og(e){return new Promise((t,n)=>{var r,i,s,a;function o(){ag(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ag(),n(Hf(e,"network-request-failed"))},timeout:sg.get()})}if(null==(i=null==(r=Tm().gapi)?void 0:r.iframes)?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null==(s=Tm().gapi)?void 0:s.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return Tm()[t]=()=>{gapi.load?o():n(Hf(e,"network-request-failed"))},(a=`${Jp.gapiScript}?onload=${t}`,Jp.loadJS(a)).catch(e=>n(e))}o()}}).catch(e=>{throw lg=null,e})}let lg=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const cg=new np(5e3,15e3),ug={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hg(e){const t=e.config;Yf(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?rp(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Tf},i=dg.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ih(r).slice(1)}`}async function fg(e){const t=await function(e){return lg=lg||og(e),lg}(e),n=Tm().gapi;return Yf(n,e,"internal-error"),t.open({where:document.body,url:hg(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ug,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Hf(e,"network-request-failed"),s=Tm().setTimeout(()=>{r(i)},cg.get());function a(){Tm().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class mg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function gg(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...pg,width:r.toString(),height:i.toString(),top:s,left:a},c=Bd().toLowerCase();n&&(o=jp(c)?"_blank":n),Lp(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=Bd()){var t;return $p(e)&&!!(null==(t=window.navigator)?void 0:t.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",o),new mg(null);const d=window.open(t||"",o,u);Yf(d,e,"popup-blocked");try{d.focus()}catch(h){}return new mg(d)}const yg="__/auth/handler",_g="emulator/auth/handler",vg=encodeURIComponent("fac");async function wg(e,t,n,r,i,s){Yf(e.config.authDomain,e,"auth-domain-config-required"),Yf(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Tf,eventId:i};if(t instanceof im){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",eh(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))a[e]=t}if(t instanceof sm){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${vg}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${yg}`;return rp(e,_g)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${ih(o).slice(1)}${c}`}const bg="webStorageSupport";const kg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=km,this._completeRedirectFn=Jm,this._overrideRedirectResult=Ym}async _openPopup(e,t,n,r){var i;Xf(null==(i=this.eventManagers[e._key()])?void 0:i.manager,"_initialize() not called before _openPopup()");return gg(e,await wg(e,t,n,Zf(),r),Sm())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Tm().location.href=e}(await wg(e,t,n,Zf(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Xf(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await fg(e),n=new Xm(e);return t.register("authEvent",t=>{Yf(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bg,{type:bg},n=>{var r;const i=null==(r=null==n?void 0:n[0])?void 0:r[bg];void 0!==i&&t(!!i),Vf(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rg(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qp()||Mp()||$p()}};var Cg="@firebase/auth",Sg="1.12.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ig{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null==(e=this.auth.currentUser)?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Yf(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Tg=Md("authIdTokenMaxAge")||300;let Eg=null;function xg(e=xf()){const t=kf(e,"auth");if(t.isInitialized())return t.getImmediate();const n=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){const n=kf(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(nh(n.getOptions(),t??{}))return e;Vf(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:kg,persistence:[jm,wm,km]}),r=Md("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Tg)return;const r=null==t?void 0:t.token;Eg!==r&&(Eg=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){uh(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){uh(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=Od("auth");return s&&Xp(n,`http://${s}`),n}var Ng;Jp={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");var i;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Hf("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",((null==(i=document.getElementsByTagName("head"))?void 0:i[0])??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ng="Browser",bf(new dh("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;Yf(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:s,authDomain:a,clientPlatform:Ng,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vp(Ng)},l=new Kp(n,r,i,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Np);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),bf(new dh("auth-internal",e=>{const t=Qp(e.getProvider("auth").getImmediate());return new Ig(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nf(Cg,Sg,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ng)),Nf(Cg,Sg,"esm2020");var Pg,Rg;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Nf("firebase","12.8.0","app"),(Rg=Pg||(Pg={})).Unimplemented="UNIMPLEMENTED",Rg.Unavailable="UNAVAILABLE";class Ag extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const Og=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>null!==t?t.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),s=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},a=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=i,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==i(),n.isPluginAvailable=e=>{const t=a.get(e);return!!(null==t?void 0:t.platforms.has(i()))||!!s(e)},n.registerPlugin=(e,o={})=>{const l=a.get(e);if(l)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),l.proxy;const c=i(),u=s(e);let d;const h=r=>{let i;const s=(...s)=>{const a=(async()=>(!d&&c in o?d=d="function"==typeof o[c]?await o[c]():o[c]:null!==t&&!d&&"web"in o&&(d=d="function"==typeof o.web?await o.web():o.web),d))().then(t=>{const a=((t,r)=>{var i,s;if(!u){if(t)return null===(s=t[r])||void 0===s?void 0:s.bind(t);throw new Ag(`"${e}" plugin is not implemented on ${c}`,Pg.Unimplemented)}{const s=null==u?void 0:u.methods.find(e=>r===e.name);if(s)return"promise"===s.rtype?t=>n.nativePromise(e,r.toString(),t):(t,i)=>n.nativeCallback(e,r.toString(),t,i);if(t)return null===(i=t[r])||void 0===i?void 0:i.bind(t)}})(t,r);if(a){const e=a(...s);return i=null==e?void 0:e.remove,e}throw new Ag(`"${e}.${r}()" is not implemented on ${c}`,Pg.Unimplemented)});return"addListener"===r&&(a.remove=async()=>i()),a};return s.toString=()=>`${r.toString()}() { [capacitor code] }`,Object.defineProperty(s,"name",{value:r,writable:!1,configurable:!1}),s},f=h("addListener"),p=h("removeListener"),m=(e,t)=>{const n=f({eventName:e},t),r=async()=>{const r=await n;p({eventName:e,callbackId:r},t)},i=new Promise(e=>n.then(()=>e({remove:r})));return i.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},i},g=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return u?m:f;case"removeListener":return p;default:return h(t)}}});return r[e]=g,a.set(e,{name:e,proxy:g,platforms:new Set([...Object.keys(o),...u?[c]:[]])}),g},n.Exception=Ag,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},Dg=(e=>e.Capacitor=Og(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),Lg=Dg.registerPlugin;class Mg{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new Dg.Exception(e,Pg.Unimplemented)}unavailable(e="not available"){return new Dg.Exception(e,Pg.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const jg=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Fg=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Ug extends Mg{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=Fg(n).trim(),r=Fg(r).trim(),t[n]=r}),t}async setCookie(e){try{const t=jg(e.key),n=jg(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),s=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${r}; path=${i}; ${s};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Lg("CapacitorCookies",{web:()=>new Ug});const zg=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((n,r,i)=>(n[r]=e[t[i]],n),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(r.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(r.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(r.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class Wg extends Mg{async request(e){const t=zg(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce((e,n)=>{const[r,i]=n;let s,a;return Array.isArray(i)?(a="",i.forEach(e=>{s=t?encodeURIComponent(e):e,a+=`${r}=${s}&`}),a.slice(0,-1)):(s=t?encodeURIComponent(i):i,a=`${r}=${s}`),`${e}&${a}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),r=n?`${e.url}?${n}`:e.url,i=await fetch(r,t),s=i.headers.get("content-type")||"";let a,o,{responseType:l="text"}=i.ok?e:{};switch(s.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":o=await i.blob(),a=await(async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)}))(o);break;case"json":a=await i.json();break;default:a=await i.text()}const c={};return i.headers.forEach((e,t)=>{c[t]=e}),{data:a,headers:c,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}var $g,Bg,qg,Vg;Lg("CapacitorHttp",{web:()=>new Wg}),(Bg=$g||($g={})).Dark="DARK",Bg.Light="LIGHT",Bg.Default="DEFAULT",(Vg=qg||(qg={})).StatusBar="StatusBar",Vg.NavigationBar="NavigationBar";class Hg extends Mg{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Lg("SystemBars",{web:()=>new Hg});var Gg={};const Kg="@firebase/database",Qg="1.1.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Yg="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Jg{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Yd(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Qd(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Xd(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Jg(t)}}catch(t){}return new Xg},ey=Zg("localStorage"),ty=Zg("sessionStorage"),ny=new bh("@firebase/database"),ry=function(){let e=1;return function(){return e++}}(),iy=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,wd(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new sh;n.update(t);const r=n.digest();return Cd.encodeByteArray(r)},sy=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=sy.apply(null,r):t+="object"==typeof r?Yd(r):r,t+=" "}return t};let ay=null,oy=!0;const ly=function(...e){if(!0===oy&&(oy=!1,null===ay&&!0===ty.get("logging_enabled")&&(wd(!0,"Can't turn on custom loggers persistently."),ny.logLevel=mh.VERBOSE,ay=ny.log.bind(ny))),ay){const t=sy.apply(null,e);ay(t)}},cy=function(e){return function(...t){ly(e,...t)}},uy=function(...e){const t="FIREBASE INTERNAL ERROR: "+sy(...e);ny.error(t)},dy=function(...e){const t=`FIREBASE FATAL ERROR: ${sy(...e)}`;throw ny.error(t),new Error(t)},hy=function(...e){const t="FIREBASE WARNING: "+sy(...e);ny.warn(t)},fy=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},py="[MIN_NAME]",my="[MAX_NAME]",gy=function(e,t){if(e===t)return 0;if(e===py||t===my)return-1;if(t===py||e===my)return 1;{const n=Sy(e),r=Sy(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},yy=function(e,t){return e===t?0:e<t?-1:1},_y=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Yd(t))},vy=function(e){if("object"!=typeof e||null===e)return Yd(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Yd(t[r]),n+=":",n+=vy(e[t[r]]);return n+="}",n},wy=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function by(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const ky=function(e){wd(!fy(e),"Invalid JSON number");const t=1023;let n,r,i,s,a;0===e?(r=0,i=0,n=1/e==-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const o=[];for(a=52;a;a-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)o.push(r%2?1:0),r=Math.floor(r/2);o.push(n?1:0),o.reverse();const l=o.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Cy=new RegExp("^-?(0*)\\d{1,10}$"),Sy=function(e){if(Cy.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Iy=function(e){try{e()}catch(t){setTimeout(()=>{const e=t.stack||"";throw hy("Exception was thrown by user callback.",e),t},Math.floor(0))}},Ty=function(e,t){const n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ey{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Cf(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null==(t=this.appCheckProvider)||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){hy(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(ly("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hy(e)}}class Ny{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ny.OWNER="owner";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Py=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ry="ac",Ay="websocket",Oy="long_polling";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Dy{constructor(e,t,n,r,i=!1,s="",a=!1,o=!1,l=null){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ey.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ey.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Ly(e,t,n){let r;if(wd("string"==typeof t,"typeof type must == string"),wd("object"==typeof n,"typeof params must == object"),t===Ay)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Oy)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return by(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.counters_={}}incrementCounter(e,t=1){Xd(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return xd(this.counters_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy={},Fy={};function Uy(e){const t=e.toString();return jy[t]||(jy[t]=new My),jy[t]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zy{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Iy(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="start";class $y{constructor(e,t,n,r,i,s,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cy(e),this.stats_=Uy(t),this.urlFn=e=>(this.appCheckToken&&(e[Ry]=this.appCheckToken),Ly(t,Oy,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new zy(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new By((...e)=>{const[t,n,r,i,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===Wy)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_()}},(...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);const e={};e[Wy]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Ry]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Py.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){$y.forceAllow_=!0}static forceDisallow(){$y.forceDisallow_=!0}static isAvailable(){return!!$y.forceAllow_||!($y.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Yd(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Id(t),r=wy(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Yd(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class By{constructor(e,t,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ry(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=By.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){ly("frame writing exception"),i.stack&&ly(i.stack),ly(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ly("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{ly("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qy=null;"undefined"!=typeof MozWebSocket?qy=MozWebSocket:"undefined"!=typeof WebSocket&&(qy=WebSocket);class Vy{constructor(e,t,n,r,i,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cy(this.connId),this.stats_=Uy(t),this.connURL=Vy.connectionURL_(t,s,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={v:"5"};return"undefined"!=typeof location&&location.hostname&&Py.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Ry]=r),i&&(s.p=i),Ly(e,Ay,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ey.set("previous_websocket_failure",!0);try{let e;this.mySock=new qy(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Vy.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==qy&&!Vy.forceDisallow_}static previouslyFailed(){return ey.isInMemoryStorage||!0===ey.get("previous_websocket_failure")}markConnectionHealthy(){ey.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Qd(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(wd(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=Yd(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=wy(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Vy.responsesRequiredToBeHealthy=2,Vy.healthyTimeout=3e4;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hy{static get ALL_TRANSPORTS(){return[$y,Vy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Vy&&Vy.isAvailable();let n=t&&!Vy.previouslyFailed();if(e.webSocketOnly&&(t||hy("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Vy];else{const e=this.transports_=[];for(const t of Hy.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Hy.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Hy.globalTransportInitialized_=!1;class Gy{constructor(e,t,n,r,i,s,a,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cy("c:"+this.id+":"),this.transportManager_=new Hy(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ty(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=_y("t",e),n=_y("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=_y("t",e),n=_y("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=_y("t",e);if("d"in e){const n=e.d;if("h"===t){const e={...n};this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?uy("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uy("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&hy("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Ty(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ty(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ey.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){this.allowedEvents_=e,this.listeners_={},wd(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){wd(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy extends Qy{static getInstance(){return new Yy}constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||qd()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return wd("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Xy(){return new Jy("")}function Zy(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function e_(e){return e.pieces_.length-e.pieceNum_}function t_(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Jy(e.pieces_,t)}function n_(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function r_(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function i_(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Jy(t,0)}function s_(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Jy)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Jy(n,0)}function a_(e){return e.pieceNum_>=e.pieces_.length}function o_(e,t){const n=Zy(e),r=Zy(t);if(null===n)return t;if(n===r)return o_(t_(e),t_(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function l_(e,t){const n=r_(e,0),r=r_(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=gy(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function c_(e,t){if(e_(e)!==e_(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function u_(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(e_(e)>e_(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class d_{constructor(e,t){this.errorPrefix_=t,this.parts_=r_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=ch(this.parts_[n]);h_(this)}}function h_(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+f_(e))}function f_(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_ extends Qy{static getInstance(){return new p_}constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}getInitialEvent(e){return wd("visible"===e,"Unknown event type: "+e),[this.visible_]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_=1e3;class g_ extends Ky{constructor(e,t,n,r,i,s,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=g_.nextPersistentConnectionId_++,this.log_=cy("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=m_,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");p_.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Yy.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Yd(i)),wd(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new jd,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),wd(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),wd(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,i=>{const s=i.d,a=i.s;g_.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&Xd(e,"w")){const n=Zd(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();hy(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Jd(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Jd(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),wd(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Yd(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):uy("Unrecognized action received from server: "+Yd(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){wd(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=m_,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=m_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=m_),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+g_.nextConnectionId_++,s=this.lastSessionId;let a=!1,o=null;const l=function(){o?o.close():(a=!0,r())},c=function(e){wd(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[e,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?ly("getToken() completed but was canceled"):(ly("getToken() completed. Creating connection."),this.authToken_=e&&e.accessToken,this.appCheckToken_=l&&l.token,o=new Gy(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,e=>{hy(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},s))}catch(e){this.log_("Failed to get token: "+e),a||(this.repoInfo_.nodeAdmin&&hy(e),l())}}}interrupt(e){ly("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ly("Resuming connection for reason: "+e),delete this.interruptReasons_[e],eh(this.interruptReasons_)&&(this.reconnectDelay_=m_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>vy(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Jy(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){ly("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){ly("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};e["sdk.js."+Yg.replace(/\./g,"-")]=1,qd()?e["framework.cordova"]=1:Vd()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Yy.getInstance().currentlyOnline();return eh(this.interruptReasons_)&&e}}g_.nextPersistentConnectionId_=0,g_.nextConnectionId_=0;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class y_{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new y_(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new y_(py,e),r=new y_(py,t);return 0!==this.compare(n,r)}minPost(){return y_.MIN}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v_;class w_ extends __{static get __EMPTY_NODE(){return v_}static set __EMPTY_NODE(e){v_=e}compare(e,t){return gy(e.name,t.name)}isDefinedOn(e){throw bd("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return y_.MIN}maxPost(){return new y_(my,v_)}makePost(e,t){return wd("string"==typeof e,"KeyIndex indexValue must always be a string."),new y_(e,v_)}toString(){return".key"}}const b_=new w_;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class C_{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:C_.RED,this.left=null!=r?r:S_.EMPTY_NODE,this.right=null!=i?i:S_.EMPTY_NODE}copy(e,t,n,r,i){return new C_(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return S_.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return S_.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,C_.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,C_.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}C_.RED=!0,C_.BLACK=!1;class S_{constructor(e,t=S_.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new S_(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,C_.BLACK,null,null))}remove(e){return new S_(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,C_.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new k_(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new k_(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new k_(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new k_(this.root_,null,this.comparator_,!0,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function I_(e,t){return gy(e.name,t.name)}function T_(e,t){return gy(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E_;S_.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new C_(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const x_=function(e){return"number"==typeof e?"number:"+ky(e):"string:"+e},N_=function(e){if(e.isLeafNode()){const t=e.val();wd("string"==typeof t||"number"==typeof t||"object"==typeof t&&Xd(t,".sv"),"Priority must be a string or number.")}else wd(e===E_||e.isEmpty(),"priority of unexpected type.");wd(e===E_||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let P_,R_,A_;class O_{static set __childrenNodeConstructor(e){P_=e}static get __childrenNodeConstructor(){return P_}constructor(e,t=O_.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,wd(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),N_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new O_(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:O_.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return a_(e)?this:".priority"===Zy(e)?this.priorityNode_:O_.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:O_.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=Zy(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(wd(".priority"!==n||1===e_(e),".priority must be the last token in a path"),this.updateImmediateChild(n,O_.__childrenNodeConstructor.EMPTY_NODE.updateChild(t_(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+x_(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?ky(this.value_):this.value_,this.lazyHash_=iy(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===O_.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof O_.__childrenNodeConstructor?-1:(wd(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=O_.VALUE_TYPE_ORDER.indexOf(t),i=O_.VALUE_TYPE_ORDER.indexOf(n);return wd(r>=0,"Unknown leaf type: "+t),wd(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}O_.VALUE_TYPE_ORDER=["object","boolean","number","string"];const D_=new class extends __{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?gy(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return y_.MIN}maxPost(){return new y_(my,new O_("[PRIORITY-POST]",A_))}makePost(e,t){const n=R_(e);return new y_(t,new O_("[PRIORITY-POST]",n))}toString(){return".priority"}},L_=Math.log(2);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/L_,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const j_=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let a,o;if(0===s)return null;if(1===s)return a=e[t],o=n?n(a):a,new C_(o,a.node,C_.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return a=e[l],o=n?n(a):a,new C_(o,a.node,C_.BLACK,c,u)}},s=function(t){let r=null,s=null,a=e.length;const o=function(t,r){const s=a-t,o=a;a-=t;const c=i(s+1,o),u=e[s],d=n?n(u):u;l(new C_(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?o(r,C_.BLACK):(o(r,C_.BLACK),o(r,C_.RED))}return s}(new M_(e.length));return new S_(r||t,s)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F_;const U_={};class z_{static get Default(){return wd(U_&&D_,"ChildrenNode.ts has not been loaded"),F_=F_||new z_({".priority":U_},{".priority":D_}),F_}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Zd(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof S_?t:null}hasIndex(e){return Xd(this.indexSet_,e.toString())}addIndex(e,t){wd(e!==b_,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(y_.Wrap);let s,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();s=r?j_(n,e.getCompare()):U_;const o=e.toString(),l={...this.indexSet_};l[o]=e;const c={...this.indexes_};return c[o]=s,new z_(c,l)}addToIndexes(e,t){const n=th(this.indexes_,(n,r)=>{const i=Zd(this.indexSet_,r);if(wd(i,"Missing index implementation for "+r),n===U_){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(y_.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),j_(n,i.getCompare())}return U_}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new y_(e.name,r))),i.insert(e,e.node)}});return new z_(n,this.indexSet_)}removeFromIndexes(e,t){const n=th(this.indexes_,n=>{if(n===U_)return n;{const r=t.get(e.name);return r?n.remove(new y_(e.name,r)):n}});return new z_(n,this.indexSet_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W_;class $_{static get EMPTY_NODE(){return W_||(W_=new $_(new S_(T_),null,z_.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&N_(this.priorityNode_),this.children_.isEmpty()&&wd(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||W_}updatePriority(e){return this.children_.isEmpty()?this:new $_(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?W_:t}}getChild(e){const t=Zy(e);return null===t?this:this.getImmediateChild(t).getChild(t_(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(wd(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new y_(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?W_:this.priorityNode_;return new $_(r,s,i)}}updateChild(e,t){const n=Zy(e);if(null===n)return t;{wd(".priority"!==Zy(e)||1===e_(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(t_(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(D_,(s,a)=>{t[s]=a.val(e),n++,i&&$_.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1}),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+x_(this.getPriority().val())+":"),this.forEachChild(D_,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":iy(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new y_(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new y_(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new y_(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,y_.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,y_.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===B_?-1:0}withIndex(e){if(e===b_||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new $_(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===b_||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(D_),n=t.getIterator(D_);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===b_?null:this.indexMap_.get(e.toString())}}$_.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const B_=new class extends $_{constructor(){super(new S_(T_),$_.EMPTY_NODE,z_.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $_.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(y_,{MIN:{value:new y_(py,$_.EMPTY_NODE)},MAX:{value:new y_(my,B_)}}),w_.__EMPTY_NODE=$_.EMPTY_NODE,O_.__childrenNodeConstructor=$_,E_=B_,function(e){A_=e}(B_);function q_(e,t=null){if(null===e)return $_.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),wd(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){return new O_(e,q_(t))}if(e instanceof Array){let n=$_.EMPTY_NODE;return by(e,(t,r)=>{if(Xd(e,t)&&"."!==t.substring(0,1)){const e=q_(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(q_(t))}{const n=[];let r=!1;if(by(e,(e,t)=>{if("."!==e.substring(0,1)){const i=q_(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new y_(e,i)))}}),0===n.length)return $_.EMPTY_NODE;const i=j_(n,I_,e=>e.name,T_);if(r){const e=j_(n,D_.getCompare());return new $_(i,q_(t),new z_({".priority":e},{".priority":D_}))}return new $_(i,q_(t),z_.Default)}}!function(e){R_=e}(q_);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class V_ extends __{constructor(e){super(),this.indexPath_=e,wd(!a_(e)&&".priority"!==Zy(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?gy(e.name,t.name):i}makePost(e,t){const n=q_(e),r=$_.EMPTY_NODE.updateChild(this.indexPath_,n);return new y_(t,r)}maxPost(){const e=$_.EMPTY_NODE.updateChild(this.indexPath_,B_);return new y_(my,e)}toString(){return r_(this.indexPath_,0).join("/")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=new class extends __{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?gy(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return y_.MIN}maxPost(){return y_.MAX}makePost(e,t){const n=q_(e);return new y_(t,n)}toString(){return".value"}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(e){return{type:"value",snapshotNode:e}}function K_(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Q_(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Y_(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class J_{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){wd(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Q_(t,a)):wd(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(K_(t,n)):s.trackChildChange(Y_(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(D_,(e,r)=>{t.hasChild(e)||n.trackChildChange(Q_(e,r))}),t.isLeafNode()||t.forEachChild(D_,(t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Y_(t,r,i))}else n.trackChildChange(K_(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?$_.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this.indexedFilter_=new J_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=X_.getStartPost_(e),this.endPost_=X_.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new y_(t,n))||(n=$_.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=$_.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority($_.EMPTY_NODE);const i=this;return t.forEachChild(D_,(e,t)=>{i.matches(new y_(e,t))||(r=r.updateImmediateChild(e,$_.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new X_(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new y_(t,n))||(n=$_.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=$_.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=$_.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority($_.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,$_.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const a=e;wd(a.numChildren()===this.limit_,"");const o=new y_(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(o);if(a.hasChild(t)){const e=a.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||a.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:s(u,o);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Y_(t,n,e)),a.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Q_(t,e));const n=a.updateImmediateChild(t,$_.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(K_(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,o)>=0?(null!=i&&(i.trackChildChange(Q_(l.name,l.node)),i.trackChildChange(K_(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,$_.EMPTY_NODE)):e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=D_}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return wd(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return wd(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:py}hasEnd(){return this.endSet_}getIndexEndValue(){return wd(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return wd(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:my}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return wd(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===D_}copy(){const e=new ev;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function tv(e){const t={};if(e.isDefault())return t;let n;if(e.index_===D_?n="$priority":e.index_===H_?n="$value":e.index_===b_?n="$key":(wd(e.index_ instanceof V_,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Yd(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=Yd(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+Yd(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=Yd(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+Yd(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function nv(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==D_&&(t.i=e.index_.toString()),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv extends Ky{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(wd(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=cy("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=rv.getListenId_(e,n),a={};this.listens_[s]=a;const o=tv(e._queryParams);this.restRequest_(i+".json",o,(e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(i,o,!1,n),Zd(this.listens_,s)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=rv.getListenId_(e,t);delete this.listens_[n]}get(e){const t=tv(e._queryParams),n=e._path.toString(),r=new jd;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ih(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=Qd(a.responseText)}catch(e){hy("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&hy("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.rootNode_=$_.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(){return{value:null,children:new Map}}function av(e,t,n){if(a_(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=Zy(t);e.children.has(r)||e.children.set(r,sv());av(e.children.get(r),t=t_(t),n)}}function ov(e,t){if(a_(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(D_,(t,n)=>{av(e,new Jy(t),n)}),ov(e,t)}}if(e.children.size>0){const n=Zy(t);if(t=t_(t),e.children.has(n)){ov(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function lv(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,(e,r)=>{lv(r,new Jy(t.toString()+"/"+e),n)})}class cv{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&by(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new cv(e);const n=1e4+2e4*Math.random();Ty(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;by(e,(e,r)=>{r>0&&Xd(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),Ty(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dv,hv;function fv(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(hv=dv||(dv={}))[hv.OVERWRITE=0]="OVERWRITE",hv[hv.MERGE=1]="MERGE",hv[hv.ACK_USER_WRITE=2]="ACK_USER_WRITE",hv[hv.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class pv{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=dv.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(a_(this.path)){if(null!=this.affectedTree.value)return wd(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Jy(e));return new pv(Xy(),t,this.revert)}}return wd(Zy(this.path)===e,"operationForChild called for unrelated child."),new pv(t_(this.path),this.affectedTree,this.revert)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,t){this.source=e,this.path=t,this.type=dv.LISTEN_COMPLETE}operationForChild(e){return a_(this.path)?new mv(this.source,Xy()):new mv(this.source,t_(this.path))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=dv.OVERWRITE}operationForChild(e){return a_(this.path)?new gv(this.source,Xy(),this.snap.getImmediateChild(e)):new gv(this.source,t_(this.path),this.snap)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=dv.MERGE}operationForChild(e){if(a_(this.path)){const t=this.children.subtree(new Jy(e));return t.isEmpty()?null:t.value?new gv(this.source,Xy(),t.value):new yv(this.source,Xy(),t)}return wd(Zy(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new yv(this.source,t_(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(a_(e))return this.isFullyInitialized()&&!this.filtered_;const t=Zy(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function wv(e,t,n,r,i,s){const a=r.filter(e=>e.type===n);a.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw bd("Should only compare child_ events.");const r=new y_(t.childName,t.snapshotNode),i=new y_(n.childName,n.snapshotNode);return e.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,n)),a.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function bv(e,t){return{eventCache:e,serverCache:t}}function kv(e,t,n,r){return bv(new _v(t,n,r),e.serverCache)}function Cv(e,t,n,r){return bv(e.eventCache,new _v(t,n,r))}function Sv(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Iv(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tv;class Ev{static fromObject(e){let t=new Ev(null);return by(e,(e,n)=>{t=t.set(new Jy(e),n)}),t}constructor(e,t=(()=>(Tv||(Tv=new S_(yy)),Tv))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Xy(),value:this.value};if(a_(e))return null;{const n=Zy(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(t_(e),t);if(null!=i){return{path:s_(new Jy(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(a_(e))return this;{const t=Zy(e),n=this.children.get(t);return null!==n?n.subtree(t_(e)):new Ev(null)}}set(e,t){if(a_(e))return new Ev(t,this.children);{const n=Zy(e),r=(this.children.get(n)||new Ev(null)).set(t_(e),t),i=this.children.insert(n,r);return new Ev(this.value,i)}}remove(e){if(a_(e))return this.children.isEmpty()?new Ev(null):new Ev(null,this.children);{const t=Zy(e),n=this.children.get(t);if(n){const r=n.remove(t_(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Ev(null):new Ev(this.value,i)}return this}}get(e){if(a_(e))return this.value;{const t=Zy(e),n=this.children.get(t);return n?n.get(t_(e)):null}}setTree(e,t){if(a_(e))return t;{const n=Zy(e),r=(this.children.get(n)||new Ev(null)).setTree(t_(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Ev(this.value,i)}}fold(e){return this.fold_(Xy(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(s_(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Xy(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(a_(e))return null;{const r=Zy(e),i=this.children.get(r);return i?i.findOnPath_(t_(e),s_(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Xy(),t)}foreachOnPath_(e,t,n){if(a_(e))return this;{this.value&&n(t,this.value);const r=Zy(e),i=this.children.get(r);return i?i.foreachOnPath_(t_(e),s_(t,r),n):new Ev(null)}}foreach(e){this.foreach_(Xy(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(s_(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this.writeTree_=e}static empty(){return new xv(new Ev(null))}}function Nv(e,t,n){if(a_(t))return new xv(new Ev(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const a=o_(i,t);return s=s.updateChild(a,n),new xv(e.writeTree_.set(i,s))}{const r=new Ev(n),i=e.writeTree_.setTree(t,r);return new xv(i)}}}function Pv(e,t,n){let r=e;return by(n,(e,n)=>{r=Nv(r,s_(t,e),n)}),r}function Rv(e,t){if(a_(t))return xv.empty();{const n=e.writeTree_.setTree(t,new Ev(null));return new xv(n)}}function Av(e,t){return null!=Ov(e,t)}function Ov(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(o_(n.path,t)):null}function Dv(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(D_,(e,n)=>{t.push(new y_(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new y_(e,n.value))}),t}function Lv(e,t){if(a_(t))return e;{const n=Ov(e,t);return new xv(null!=n?new Ev(n):e.writeTree_.subtree(t))}}function Mv(e){return e.writeTree_.isEmpty()}function jv(e,t){return Fv(Xy(),e.writeTree_,t)}function Fv(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?(wd(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Fv(s_(e,t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(s_(e,".priority"),r)),n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(e,t){return Xv(t,e)}function zv(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);wd(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&Wv(t,r.path)?i=!1:u_(r.path,t.path)&&(s=!0)),a--}if(i){if(s)return function(e){e.visibleWrites=Bv(e.allWrites,$v,Xy()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Rv(e.visibleWrites,r.path);else{by(r.children,t=>{e.visibleWrites=Rv(e.visibleWrites,s_(r.path,t))})}return!0}return!1}function Wv(e,t){if(e.snap)return u_(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&u_(s_(e.path,n),t))return!0;return!1}function $v(e){return e.visible}function Bv(e,t,n){let r=xv.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)u_(n,e)?(t=o_(n,e),r=Nv(r,t,s.snap)):u_(e,n)&&(t=o_(e,n),r=Nv(r,Xy(),s.snap.getChild(t)));else{if(!s.children)throw bd("WriteRecord should have .snap or .children");if(u_(n,e))t=o_(n,e),r=Pv(r,t,s.children);else if(u_(e,n))if(t=o_(e,n),a_(t))r=Pv(r,Xy(),s.children);else{const e=Zd(s.children,Zy(t));if(e){const n=e.getChild(t_(t));r=Nv(r,Xy(),n)}}}}}return r}function qv(e,t,n,r,i){if(r||i){const s=Lv(e.visibleWrites,t);if(!i&&Mv(s))return n;if(i||null!=n||Av(s,Xy())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(u_(e.path,t)||u_(t,e.path))};return jv(Bv(e.allWrites,s,t),n||$_.EMPTY_NODE)}return null}{const r=Ov(e.visibleWrites,t);if(null!=r)return r;{const r=Lv(e.visibleWrites,t);if(Mv(r))return n;if(null!=n||Av(r,Xy())){return jv(r,n||$_.EMPTY_NODE)}return null}}}function Vv(e,t,n,r){return qv(e.writeTree,e.treePath,t,n,r)}function Hv(e,t){return function(e,t,n){let r=$_.EMPTY_NODE;const i=Ov(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(D_,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const i=Lv(e.visibleWrites,t);return n.forEachChild(D_,(e,t)=>{const n=jv(Lv(i,new Jy(e)),t);r=r.updateImmediateChild(e,n)}),Dv(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return Dv(Lv(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function Gv(e,t,n,r){return function(e,t,n,r,i){wd(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=s_(t,n);if(Av(e.visibleWrites,s))return null;{const t=Lv(e.visibleWrites,s);return Mv(t)?i.getChild(n):jv(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Kv(e,t){return function(e,t){return Ov(e.visibleWrites,t)}(e.writeTree,s_(e.treePath,t))}function Qv(e,t,n,r,i,s){return function(e,t,n,r,i,s,a){let o;const l=Lv(e.visibleWrites,t),c=Ov(l,Xy());if(null!=c)o=c;else{if(null==n)return[];o=jv(l,n)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),n=s?o.getReverseIteratorFrom(r,a):o.getIteratorFrom(r,a);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function Yv(e,t,n){return function(e,t,n,r){const i=s_(t,n),s=Ov(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return jv(Lv(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Jv(e,t){return Xv(s_(e.treePath,t),e.writeTree)}function Xv(e,t){return{treePath:e,writeTree:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;wd("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),wd(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Y_(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Q_(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,K_(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw bd("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Y_(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class tw{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new _v(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Yv(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Iv(this.viewCache_),i=Qv(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(e,t,n,r,i){const s=new Zv;let a,o;if(n.type===dv.OVERWRITE){const l=n;l.source.fromUser?a=sw(e,t,l.path,l.snap,r,i,s):(wd(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!a_(l.path),a=iw(e,t,l.path,l.snap,r,i,o,s))}else if(n.type===dv.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,r,i,s,a){let o=t;return r.foreach((r,l)=>{const c=s_(n,r);aw(t,Zy(c))&&(o=sw(e,o,c,l,i,s,a))}),r.foreach((r,l)=>{const c=s_(n,r);aw(t,Zy(c))||(o=sw(e,o,c,l,i,s,a))}),o}(e,t,l.path,l.children,r,i,s):(wd(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=lw(e,t,l.path,l.children,r,i,o,s))}else if(n.type===dv.ACK_USER_WRITE){const o=n;a=o.revert?function(e,t,n,r,i,s){let a;if(null!=Kv(r,n))return t;{const o=new tw(r,t,i),l=t.eventCache.getNode();let c;if(a_(n)||".priority"===Zy(n)){let n;if(t.serverCache.isFullyInitialized())n=Vv(r,Iv(t));else{const e=t.serverCache.getNode();wd(e instanceof $_,"serverChildren would be complete if leaf node"),n=Hv(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=Zy(n);let u=Yv(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,t_(n),o,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,$_.EMPTY_NODE,t_(n),o,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Vv(r,Iv(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=Kv(r,Xy()),kv(t,c,a,e.filter.filtersNodes())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,o.path,r,i,s):function(e,t,n,r,i,s,a){if(null!=Kv(i,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(a_(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return iw(e,t,n,l.getNode().getChild(n),i,s,o,a);if(a_(n)){let r=new Ev(null);return l.getNode().forEachChild(b_,(e,t)=>{r=r.set(new Jy(e),t)}),lw(e,t,n,r,i,s,o,a)}return t}{let c=new Ev(null);return r.foreach((e,t)=>{const r=s_(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))}),lw(e,t,n,c,i,s,o,a)}}(e,t,o.path,o.affectedTree,r,i,s)}else{if(n.type!==dv.LISTEN_COMPLETE)throw bd("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const s=t.serverCache,a=Cv(t,s.getNode(),s.isFullyInitialized()||a_(n),s.isFiltered());return rw(e,a,n,r,ew,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Sv(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(G_(Sv(t)))}}(t,a,l),{viewCache:a,changes:l}}function rw(e,t,n,r,i,s){const a=t.eventCache;if(null!=Kv(r,n))return t;{let o,l;if(a_(n))if(wd(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Iv(t),i=Hv(r,n instanceof $_?n:$_.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Vv(r,Iv(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=Zy(n);if(".priority"===c){wd(1===e_(n),"Can't have a priority with additional path components");const i=a.getNode();l=t.serverCache.getNode();const s=Gv(r,n,i,l);o=null!=s?e.filter.updatePriority(i,s):a.getNode()}else{const u=t_(n);let d;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Gv(r,n,a.getNode(),l);d=null!=e?a.getNode().getImmediateChild(c).updateChild(u,e):a.getNode().getImmediateChild(c)}else d=Yv(r,c,t.serverCache);o=null!=d?e.filter.updateChild(a.getNode(),c,d,u,i,s):a.getNode()}}return kv(t,o,a.isFullyInitialized()||a_(n),e.filter.filtersNodes())}}function iw(e,t,n,r,i,s,a,o){const l=t.serverCache;let c;const u=a?e.filter:e.filter.getIndexedFilter();if(a_(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=Zy(n);if(!l.isCompleteForPath(n)&&e_(n)>1)return t;const i=t_(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,ew,null)}const d=Cv(t,c,l.isFullyInitialized()||a_(n),u.filtersNodes());return rw(e,d,n,i,new tw(i,d,s),o)}function sw(e,t,n,r,i,s,a){const o=t.eventCache;let l,c;const u=new tw(i,t,s);if(a_(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=kv(t,c,!0,e.filter.filtersNodes());else{const i=Zy(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=kv(t,c,o.isFullyInitialized(),o.isFiltered());else{const s=t_(n),c=o.getNode().getImmediateChild(i);let d;if(a_(s))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===n_(s)&&e.getChild(i_(s)).isEmpty()?e:e.updateChild(s,r):$_.EMPTY_NODE}if(c.equals(d))l=t;else{l=kv(t,e.filter.updateChild(o.getNode(),i,d,s,u,a),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function aw(e,t){return e.eventCache.isCompleteForChild(t)}function ow(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function lw(e,t,n,r,i,s,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=a_(n)?r:new Ev(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){const l=ow(0,t.serverCache.getNode().getImmediateChild(n),r);c=iw(e,c,new Jy(n),l,i,s,a,o)}}),l.children.inorderTraversal((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=ow(0,t.serverCache.getNode().getImmediateChild(n),r);c=iw(e,c,new Jy(n),l,i,s,a,o)}}),c}class cw{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new J_(n.getIndex()),i=(s=n).loadsAllData()?new J_(s.getIndex()):s.hasLimit()?new Z_(s):new X_(s);var s;this.processor_=function(e){return{filter:e}}(i);const a=t.serverCache,o=t.eventCache,l=r.updateFullNode($_.EMPTY_NODE,a.getNode(),null),c=i.updateFullNode($_.EMPTY_NODE,o.getNode(),null),u=new _v(l,a.isFullyInitialized(),r.filtersNodes()),d=new _v(c,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=bv(d,u),this.eventGenerator_=new vv(this.query_)}get query(){return this.query_}}function uw(e,t){const n=Iv(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!a_(t)&&!n.getImmediateChild(Zy(t)).isEmpty())?n.getChild(t):null}function dw(e){return 0===e.eventRegistrations_.length}function hw(e,t,n){const r=[];if(n){wd(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function fw(e,t,n,r){t.type===dv.MERGE&&null!==t.source.queryId&&(wd(Iv(e.viewCache_),"We should always have a full cache before handling merges"),wd(Sv(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=nw(e.processor_,i,t,n,r);var a,o;return a=e.processor_,o=s.viewCache,wd(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),wd(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),wd(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,pw(e,s.changes,s.viewCache.eventCache.getNode(),null)}function pw(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach(t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),wv(e,i,"child_removed",t,r,n),wv(e,i,"child_added",t,r,n),wv(e,i,"child_moved",s,r,n),wv(e,i,"child_changed",t,r,n),wv(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mw,gw;class yw{constructor(){this.views=new Map}}function _w(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return wd(null!=s,"SyncTree gave us an op for an invalid query."),fw(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(fw(s,t,n,r));return i}}function vw(e,t,n,r,i){const s=t._queryIdentifier,a=e.views.get(s);if(!a){let e=Vv(n,i?r:null),s=!1;e?s=!0:r instanceof $_?(e=Hv(n,r),s=!1):(e=$_.EMPTY_NODE,s=!1);const a=bv(new _v(e,s,!1),new _v(r,i,!1));return new cw(t,a)}return a}function ww(e,t,n,r,i,s){const a=vw(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(D_,(e,t)=>{r.push(K_(e,t))});return n.isFullyInitialized()&&r.push(G_(n.getNode())),pw(e,r,n.getNode(),t)}(a,n)}function bw(e,t,n,r){const i=t._queryIdentifier,s=[];let a=[];const o=Tw(e);if("default"===i)for(const[l,c]of e.views.entries())a=a.concat(hw(c,n,r)),dw(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(a=a.concat(hw(t,n,r)),dw(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return o&&!Tw(e)&&s.push(new(wd(mw,"Reference.ts has not been loaded"),mw)(t._repo,t._path)),{removed:s,events:a}}function kw(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Cw(e,t){let n=null;for(const r of e.views.values())n=n||uw(r,t);return n}function Sw(e,t){if(t._queryParams.loadsAllData())return Ew(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Iw(e,t){return null!=Sw(e,t)}function Tw(e){return null!=Ew(e)}function Ew(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xw=1;class Nw{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ev(null),this.pendingWriteTree_={visibleWrites:xv.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Pw(e,t,n,r,i){return function(e,t,n,r,i){wd(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Nv(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Uw(e,new gv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Rw(e,t,n,r){!function(e,t,n,r){wd(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Pv(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=Ev.fromObject(n);return Uw(e,new yv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Aw(e,t,n=!1){const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(zv(e.pendingWriteTree_,t)){let t=new Ev(null);return null!=r.snap?t=t.set(Xy(),!0):by(r.children,e=>{t=t.set(new Jy(e),!0)}),Uw(e,new pv(r.path,t,n))}return[]}function Ow(e,t,n){return Uw(e,new gv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Dw(e,t,n,r,i=!1){const s=t._path,a=e.syncPointTree_.get(s);let o=[];if(a&&("default"===t._queryIdentifier||Iw(a,t))){const l=bw(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(o=l.events,!i){const n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),i=e.syncPointTree_.findOnPath(s,(e,t)=>Tw(t));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&Tw(t)){return[Ew(t)]}{let e=[];return t&&(e=kw(t)),by(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=$w(e,r);e.listenProvider_.startListening(Kw(i),Bw(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(Kw(t),n)}else c.forEach(t=>{const n=e.queryToTagMap.get(qw(t));e.listenProvider_.stopListening(Kw(t),n)})}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=qw(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return o}function Lw(e,t,n,r){const i=Vw(e,r);if(null!=i){const r=Hw(i),s=r.path,a=r.queryId,o=o_(s,t);return Gw(e,s,new gv(fv(a),o,n))}return[]}function Mw(e,t,n,r=!1){const i=t._path;let s=null,a=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{const n=o_(e,i);s=s||Cw(t,n),a=a||Tw(t)});let o,l=e.syncPointTree_.get(i);if(l?(a=a||Tw(l),s=s||Cw(l,Xy())):(l=new yw,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)o=!0;else{o=!1,s=$_.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild((e,t)=>{const n=Cw(t,Xy());n&&(s=s.updateImmediateChild(e,n))})}const c=Iw(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=qw(t);wd(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=xw++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=ww(l,t,n,Uv(e.pendingWriteTree_,i),s,o);if(!c&&!a&&!r){const n=Sw(l,t);u=u.concat(function(e,t,n){const r=t._path,i=Bw(e,t),s=$w(e,n),a=e.listenProvider_.startListening(Kw(t),i,s.hashFn,s.onComplete),o=e.syncPointTree_.subtree(r);if(i)wd(!Tw(o.value),"If we're adding a query, it shouldn't be shadowed");else{const t=o.fold((e,t,n)=>{if(!a_(e)&&t&&Tw(t))return[Ew(t).query];{let e=[];return t&&(e=e.concat(kw(t).map(e=>e.query))),by(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Kw(r),Bw(e,r))}}return a}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,n))}return u}function jw(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=Cw(n,o_(e,t));if(r)return r});return qv(r,t,i,n,!0)}function Fw(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const i=o_(e,n);r=r||Cw(t,i)});let i=e.syncPointTree_.get(n);i?r=r||Cw(i,Xy()):(i=new yw,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,a=s?new _v(r,!0,!1):null;return function(e){return Sv(e.viewCache_)}(vw(i,t,Uv(e.pendingWriteTree_,t._path),s?a.getNode():$_.EMPTY_NODE,s))}function Uw(e,t){return zw(t,e.syncPointTree_,null,Uv(e.pendingWriteTree_,Xy()))}function zw(e,t,n,r){if(a_(e.path))return Ww(e,t,n,r);{const i=t.get(Xy());null==n&&null!=i&&(n=Cw(i,Xy()));let s=[];const a=Zy(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=n?n.getImmediateChild(a):null,t=Jv(r,a);s=s.concat(zw(o,l,e,t))}return i&&(s=s.concat(_w(i,e,r,n))),s}}function Ww(e,t,n,r){const i=t.get(Xy());null==n&&null!=i&&(n=Cw(i,Xy()));let s=[];return t.children.inorderTraversal((t,i)=>{const a=n?n.getImmediateChild(t):null,o=Jv(r,t),l=e.operationForChild(t);l&&(s=s.concat(Ww(l,i,a,o)))}),i&&(s=s.concat(_w(i,e,r,n))),s}function $w(e,t){const n=t.query,r=Bw(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||$_.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=Vw(e,n);if(r){const n=Hw(r),i=n.path,s=n.queryId,a=o_(i,t);return Gw(e,i,new mv(fv(s),a))}return[]}(e,n._path,r):function(e,t){return Uw(e,new mv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Dw(e,n,null,r)}}}}function Bw(e,t){const n=qw(t);return e.queryToTagMap.get(n)}function qw(e){return e._path.toString()+"$"+e._queryIdentifier}function Vw(e,t){return e.tagToQueryMap.get(t)}function Hw(e){const t=e.indexOf("$");return wd(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Jy(e.substr(0,t))}}function Gw(e,t,n){const r=e.syncPointTree_.get(t);wd(r,"Missing sync point for query tag that we're tracking");return _w(r,n,Uv(e.pendingWriteTree_,t),null)}function Kw(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(wd(gw,"Reference.ts has not been loaded"),gw)(e._repo,e._path):e}class Qw{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Qw(t)}node(){return this.node_}}class Yw{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=s_(this.path_,e);return new Yw(this.syncTree_,t)}node(){return jw(this.syncTree_,this.path_)}}const Jw=function(e,t,n){return e&&"object"==typeof e?(wd(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Xw(e[".sv"],t,n):"object"==typeof e[".sv"]?Zw(e[".sv"],t):void wd(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Xw=function(e,t,n){if("timestamp"===e)return n.timestamp;wd(!1,"Unexpected server value: "+e)},Zw=function(e,t,n){e.hasOwnProperty("increment")||wd(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&wd(!1,"Unexpected increment value: "+r);const i=t.node();if(wd(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},eb=function(e,t,n,r){return nb(t,new Yw(n,e),r)},tb=function(e,t,n){return nb(e,new Qw(t),n)};function nb(e,t,n){const r=e.getPriority().val(),i=Jw(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=Jw(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new O_(s,q_(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new O_(i))),r.forEachChild(D_,(e,r)=>{const i=nb(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))}),s}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function ib(e,t){let n=t instanceof Jy?t:new Jy(t),r=e,i=Zy(n);for(;null!==i;){const e=Zd(r.node.children,i)||{children:{},childCount:0};r=new rb(i,r,e),n=t_(n),i=Zy(n)}return r}function sb(e){return e.node.value}function ab(e,t){e.node.value=t,db(e)}function ob(e){return e.node.childCount>0}function lb(e,t){by(e.node.children,(n,r)=>{t(new rb(n,e,r))})}function cb(e,t,n,r){n&&t(e),lb(e,e=>{cb(e,t,!0)})}function ub(e){return new Jy(null===e.parent?e.name:ub(e.parent)+"/"+e.name)}function db(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===sb(e)&&!ob(e)}(n),i=Xd(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,db(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,db(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.parent,e.name,e)}const hb=/[\[\].#$\/\u0000-\u001F\u007F]/,fb=/[\[\].#$\u0000-\u001F\u007F]/,pb=10485760,mb=function(e){return"string"==typeof e&&0!==e.length&&!hb.test(e)},gb=function(e){return"string"==typeof e&&0!==e.length&&!fb.test(e)},yb=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!fy(e)||e&&"object"==typeof e&&Xd(e,".sv")},_b=function(e,t,n,r){vb(lh(e,"value"),t,n)},vb=function(e,t,n){const r=n instanceof Jy?new d_(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+f_(r));if("function"==typeof t)throw new Error(e+"contains a function "+f_(r)+" with contents = "+t.toString());if(fy(t))throw new Error(e+"contains "+t.toString()+" "+f_(r));if("string"==typeof t&&t.length>pb/3&&ch(t)>pb)throw new Error(e+"contains a string greater than "+pb+" utf8 bytes "+f_(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(by(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!mb(t)))throw new Error(e+" contains an invalid key ("+t+") "+f_(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,o;o=t,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(o),a.byteLength_+=ch(o),h_(a),vb(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=ch(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw new Error(e+' contains ".value" child '+f_(r)+" in addition to actual children.")}},wb=function(e,t,n,r){const i=lh(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];by(t,(e,t)=>{const r=new Jy(e);if(vb(i,t,s_(n,r)),".priority"===n_(r)&&!yb(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=r_(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!mb(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(l_);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&u_(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},bb=function(e,t,n,r){if(!gb(n))throw new Error(lh(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},kb=function(e,t){if(".info"===Zy(t))throw new Error(e+" failed = Can't modify data under /.info/")},Cb=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!mb(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),gb(e)}(n))throw new Error(lh(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Sb{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ib(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||c_(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Tb(e,t,n){Ib(e,n),xb(e,e=>c_(e,t))}function Eb(e,t,n){Ib(e,n),xb(e,e=>u_(e,t)||u_(t,e))}function xb(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(Nb(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Nb(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();ay&&ly("event: "+n.toString()),Iy(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sb,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sv(),this.transactionQueueTree_=new rb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Rb(e,t,n){if(e.stats_=Uy(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new rv(e.repoInfo_,(t,n,r,i)=>{Db(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Lb(e,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Yd(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new g_(e.repoInfo_,t,(t,n,r,i)=>{Db(e,t,n,r,i)},t=>{Lb(e,t)},t=>{!function(e,t){by(t,(t,n)=>{Mb(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return Fy[n]||(Fy[n]=t()),Fy[n]}(e.repoInfo_,()=>new uv(e.stats_,e.server_)),e.infoData_=new iv,e.infoSyncTree_=new Nw({startListening:(t,n,r,i)=>{let s=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(s=Ow(e.infoSyncTree_,t._path,a),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),Mb(e,"connected",!1),e.serverSyncTree_=new Nw({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{const s=i(n,r);Eb(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Ab(e){const t=e.infoData_.getNode(new Jy(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ob(e){return(t=(t={timestamp:Ab(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Db(e,t,n,r,i){e.dataUpdateCount++;const s=new Jy(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=th(n,e=>q_(e));a=function(e,t,n,r){const i=Vw(e,r);if(i){const r=Hw(i),s=r.path,a=r.queryId,o=o_(s,t),l=Ev.fromObject(n);return Gw(e,s,new yv(fv(a),o,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=q_(n);a=Lw(e.serverSyncTree_,s,t,i)}else if(r){const t=th(n,e=>q_(e));a=function(e,t,n){const r=Ev.fromObject(n);return Uw(e,new yv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=q_(n);a=Ow(e.serverSyncTree_,s,t)}let o=s;a.length>0&&(o=Vb(e,s)),Eb(e.eventQueue_,o,a)}function Lb(e,t){Mb(e,"connected",t),!1===t&&function(e){Wb(e,"onDisconnectEvents");const t=Ob(e),n=sv();lv(e.onDisconnect_,Xy(),(r,i)=>{const s=eb(r,i,e.serverSyncTree_,t);av(n,r,s)});let r=[];lv(n,Xy(),(t,n)=>{r=r.concat(Ow(e.serverSyncTree_,t,n));const i=Yb(e,t);Vb(e,i)}),e.onDisconnect_=sv(),Eb(e.eventQueue_,Xy(),r)}(e)}function Mb(e,t,n){const r=new Jy("/.info/"+t),i=q_(n);e.infoData_.updateSnapshot(r,i);const s=Ow(e.infoSyncTree_,r,i);Eb(e.eventQueue_,r,s)}function jb(e){return e.nextWriteId_++}function Fb(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&ov(e.onDisconnect_,t),$b(e,n,r,i)})}function Ub(e,t,n,r){const i=q_(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(n,s)=>{"ok"===n&&av(e.onDisconnect_,t,i),$b(e,r,n,s)})}function zb(e,t,n){let r;r=".info"===Zy(t._path)?Dw(e.infoSyncTree_,t,n):Dw(e.serverSyncTree_,t,n),Tb(e.eventQueue_,t._path,r)}function Wb(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),ly(n,...t)}function $b(e,t,n,r){t&&Iy(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}})}function Bb(e,t,n){return jw(e.serverSyncTree_,t,n)||$_.EMPTY_NODE}function qb(e,t=e.transactionQueueTree_){if(t||Qb(e,t),sb(t)){const n=Gb(e,t);wd(n.length>0,"Sending zero length transaction queue");n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),i=Bb(e,t,r);let s=i;const a=i.hash();for(let c=0;c<n.length;c++){const e=n[c];wd(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=o_(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const o=s.val(!0),l=t;e.server_.put(l.toString(),o,r=>{Wb(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Aw(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();Qb(e,ib(e.transactionQueueTree_,t)),qb(e,e.transactionQueueTree_),Eb(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Iy(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{hy("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Vb(e,t)}},a)}(e,ub(t),n)}else ob(t)&&lb(t,t=>{qb(e,t)})}function Vb(e,t){const n=Hb(e,t),r=ub(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(e=>0===e.status),a=s.map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){const s=t[o],l=o_(n,s.path);let c,u=!1;if(wd(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)u=!0,c=s.abortReason,i=i.concat(Aw(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)u=!0,c="maxretry",i=i.concat(Aw(e.serverSyncTree_,s.currentWriteId,!0));else{const n=Bb(e,s.path,a);s.currentInputSnapshot=n;const r=t[o].update(n.val());if(void 0!==r){vb("transaction failed: Data returned ",r,s.path);let t=q_(r);"object"==typeof r&&null!=r&&Xd(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=s.currentWriteId,l=Ob(e),c=tb(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=jb(e),a.splice(a.indexOf(o),1),i=i.concat(Pw(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(Aw(e.serverSyncTree_,o,!0))}else u=!0,c="nodata",i=i.concat(Aw(e.serverSyncTree_,s.currentWriteId,!0))}Eb(e.eventQueue_,n,i),i=[],u&&(t[o].status=2,function(e){setTimeout(e,Math.floor(0))}(t[o].unwatcher),t[o].onComplete&&("nodata"===c?r.push(()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot)):r.push(()=>t[o].onComplete(new Error(c),!1,null))))}Qb(e,e.transactionQueueTree_);for(let o=0;o<r.length;o++)Iy(r[o]);qb(e,e.transactionQueueTree_)}(e,Gb(e,n),r),r}function Hb(e,t){let n,r=e.transactionQueueTree_;for(n=Zy(t);null!==n&&void 0===sb(r);)r=ib(r,n),n=Zy(t=t_(t));return r}function Gb(e,t){const n=[];return Kb(e,t,n),n.sort((e,t)=>e.order-t.order),n}function Kb(e,t,n){const r=sb(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);lb(t,t=>{Kb(e,t,n)})}function Qb(e,t){const n=sb(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,ab(t,n.length>0?n:void 0)}lb(t,t=>{Qb(e,t)})}function Yb(e,t){const n=ub(Hb(e,t)),r=ib(e.transactionQueueTree_,t);return function(e,t){let n=e.parent;for(;null!==n;){if(t(n))return!0;n=n.parent}}(r,t=>{Jb(e,t)}),Jb(e,r),cb(r,t=>{Jb(e,t)}),n}function Jb(e,t){const n=sb(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(wd(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(wd(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Aw(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?ab(t,void 0):n.length=s+1,Eb(e.eventQueue_,ub(t),i);for(let e=0;e<r.length;e++)Iy(r[e])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=function(e,t){const n=Zb(e),r=n.namespace;"firebase.com"===n.domain&&dy(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||dy("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&hy("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Dy(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Jy(n.pathString)}},Zb=function(e){let t="",n="",r="",i="",s="",a=!0,o="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):hy(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:o,pathString:i,namespace:s}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ek{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Yd(this.snapshot.exportVal())}}class tk{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return wd(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new jd;return Fb(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){kb("OnDisconnect.remove",this._path);const e=new jd;return Ub(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){kb("OnDisconnect.set",this._path),_b("OnDisconnect.set",e,this._path);const t=new jd;return Ub(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){kb("OnDisconnect.setWithPriority",this._path),_b("OnDisconnect.setWithPriority",e,this._path),function(e,t){if(fy(t))throw new Error(lh(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!yb(t))throw new Error(lh(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}("OnDisconnect.setWithPriority",t);const n=new jd;return function(e,t,n,r,i){const s=q_(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),(n,r)=>{"ok"===n&&av(e.onDisconnect_,t,s),$b(0,i,n,r)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){kb("OnDisconnect.update",this._path),wb("OnDisconnect.update",e,this._path);const t=new jd;return function(e,t,n,r){if(eh(n))return ly("onDisconnect().update() called with empty data.  Don't do anything."),void $b(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(i,s)=>{"ok"===i&&by(n,(n,r)=>{const i=q_(r);av(e.onDisconnect_,s_(t,n),i)}),$b(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return a_(this._path)?null:n_(this._path)}get ref(){return new sk(this._repo,this._path)}get _queryIdentifier(){const e=nv(this._queryParams),t=vy(e);return"{}"===t?"default":t}get _queryObject(){return nv(this._queryParams)}isEqual(e){if(!((e=uh(e))instanceof ik))return!1;const t=this._repo===e._repo,n=c_(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class sk extends ik{constructor(e,t){super(e,t,new ev,!1)}get parent(){const e=i_(this._path);return null===e?null:new sk(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ak{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Jy(e),n=lk(this.ref,e);return new ak(this._node.getChild(t),n,D_)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,(t,n)=>e(new ak(n,lk(this.ref,t),D_)))}hasChild(e){const t=new Jy(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ok(e,t){return(e=uh(e))._checkNotDeleted("ref"),void 0!==t?lk(e._root,t):e._root}function lk(e,t){var n,r,i;return null===Zy((e=uh(e))._path)?(n="child",r="path",(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),bb(n,r,i)):bb("child","path",t),new sk(e._repo,s_(e._path,t))}function ck(e){return e=uh(e),new rk(e._repo,e._path)}function uk(e){return kb("remove",e._path),dk(e,null)}function dk(e,t){e=uh(e),kb("set",e._path),_b("set",t,e._path);const n=new jd;return function(e,t,n,r,i){Wb(e,"set",{path:t.toString(),value:n,priority:r});const s=Ob(e),a=q_(n,r),o=jw(e.serverSyncTree_,t),l=tb(a,o,s),c=jb(e),u=Pw(e.serverSyncTree_,t,l,c,!0);Ib(e.eventQueue_,u),e.server_.put(t.toString(),a.val(!0),(n,r)=>{const s="ok"===n;s||hy("set at "+t+" failed: "+n);const a=Aw(e.serverSyncTree_,c,!s);Eb(e.eventQueue_,t,a),$b(0,i,n,r)});const d=Yb(e,t);Vb(e,d),Eb(e.eventQueue_,d,[])}(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function hk(e,t){wb("update",t,e._path);const n=new jd;return function(e,t,n,r){Wb(e,"update",{path:t.toString(),value:n});let i=!0;const s=Ob(e),a={};if(by(n,(n,r)=>{i=!1,a[n]=eb(s_(t,n),q_(r),e.serverSyncTree_,s)}),i)ly("update() called with empty data.  Don't do anything."),$b(0,r,"ok",void 0);else{const i=jb(e),s=Rw(e.serverSyncTree_,t,a,i);Ib(e.eventQueue_,s),e.server_.merge(t.toString(),n,(n,s)=>{const a="ok"===n;a||hy("update at "+t+" failed: "+n);const o=Aw(e.serverSyncTree_,i,!a),l=o.length>0?Vb(e,t):t;Eb(e.eventQueue_,l,o),$b(0,r,n,s)}),by(n,n=>{const r=Yb(e,s_(t,n));Vb(e,r)}),Eb(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function fk(e){e=uh(e);const t=new nk(()=>{}),n=new pk(t);return function(e,t,n){const r=Fw(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then(r=>{const i=q_(r).withIndex(t._queryParams.getIndex());let s;if(Mw(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=Ow(e.serverSyncTree_,t._path,i);else{const n=Bw(e.serverSyncTree_,t);s=Lw(e.serverSyncTree_,t._path,i,n)}return Eb(e.eventQueue_,t._path,s),Dw(e.serverSyncTree_,t,n,null,!0),i},n=>(Wb(e,"get for query "+Yd(t)+" failed: "+n),Promise.reject(new Error(n))))}(e._repo,e,n).then(t=>new ak(t,new sk(e._repo,e._path),e._queryParams.getIndex()))}class pk{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new ek("value",this,new ak(e.snapshotNode,new sk(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new tk(this,e,t):null}matches(e){return e instanceof pk&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}function mk(e,t,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{zb(e._repo,e,o),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const a=new nk(n,s||void 0),o=new pk(a);return function(e,t,n){let r;r=".info"===Zy(t._path)?Mw(e.infoSyncTree_,t,n):Mw(e.serverSyncTree_,t,n),Tb(e.eventQueue_,t._path,r)}(e._repo,e,o),()=>zb(e._repo,e,o)}function gk(e,t,n,r){return mk(e,0,t,n,r)}class yk{}class _k extends yk{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ik(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}function vk(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new _k(e)}class wk extends yk{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){!function(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}(e,"orderByChild");const t=new Jy(this._path);if(a_(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new V_(t),r=function(e,t){const n=e.copy();return n.index_=t,n}(e._queryParams,n);return function(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===b_){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==py)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==my)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===D_){if(null!=t&&!yb(t)||null!=n&&!yb(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(wd(e.getIndex()instanceof V_||e.getIndex()===H_,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}(r),new ik(e._repo,e._path,r,!0)}}function bk(e){return bb("orderByChild","path",e),new wk(e)}function kk(e,...t){let n=uh(e);for(const r of t)n=r._apply(n);return n}!function(e){wd(!mw,"__referenceConstructor has already been defined"),mw=e}(sk),function(e){wd(!gw,"__referenceConstructor has already been defined"),gw=e}(sk);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ck={};let Sk=!1;function Ik(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||dy("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ly("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a,o=Xb(s,i),l=o.repoInfo;"undefined"!=typeof process&&Gg&&(a=Gg.FIREBASE_DATABASE_EMULATOR_HOST),a?(s=`http://${a}?ns=${l.namespace}`,o=Xb(s,i),l=o.repoInfo):o.repoInfo.secure;const c=new xy(e.name,e.options,t);Cb("Invalid Firebase Database URL",o),a_(o.path)||dy("Database URL must point to the root of a Firebase Database (not including a child path).");const u=function(e,t,n,r){let i=Ck[t.name];i||(i={},Ck[t.name]=i);let s=i[e.toURLString()];s&&dy("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Pb(e,Sk,n,r),i[e.toURLString()]=s,s}(l,e,c,new Ey(e,n));return new Tk(u,e)}class Tk{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Rb(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sk(this._repo,Xy())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Ck[t];n&&n[e.key]===e||dy(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&dy("Cannot call "+e+" on a deleted database.")}}function Ek(e=xf(),t){const n=kf(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Dd("database");e&&function(e,t,n,r={}){e=uh(e),e._checkNotDeleted("useEmulator");const i=`${t}:${n}`,s=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&nh(r,s.repoInfo_.emulatorOptions))return;dy("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&dy('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Ny(Ny.OWNER);else if(r.mockUserToken){const t="string"==typeof r.mockUserToken?r.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Td(JSON.stringify({alg:"none",type:"JWT"})),Td(JSON.stringify(s)),""].join(".")}(r.mockUserToken,e.app.options.projectId);a=new Ny(t)}Fd(t)&&(Ud(t),$d("Database",!0));!function(e,t,n,r){const i=t.lastIndexOf(":"),s=Fd(t.substring(0,i));e.repoInfo_=new Dy(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(s,i,r,a)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,...e)}return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const xk={".sv":"timestamp"};function Nk(){return xk}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Rk(e,t,n){if(e=uh(e),kb("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const r=new jd,i=gk(e,()=>{});return function(e,t,n,r,i,s){Wb(e,"transaction on "+t);const a={path:t,update:n,onComplete:r,status:null,order:ry(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},o=Bb(e,t,void 0);a.currentInputSnapshot=o;const l=a.update(o.val());if(void 0===l)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{vb("transaction failed: Data returned ",l,a.path),a.status=0;const n=ib(e.transactionQueueTree_,t),r=sb(n)||[];let i;r.push(a),ab(n,r),"object"==typeof l&&null!==l&&Xd(l,".priority")?(i=Zd(l,".priority"),wd(yb(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(jw(e.serverSyncTree_,t)||$_.EMPTY_NODE).getPriority().val();const s=Ob(e),c=q_(l,i),u=tb(c,o,s);a.currentOutputSnapshotRaw=c,a.currentOutputSnapshotResolved=u,a.currentWriteId=jb(e);const d=Pw(e.serverSyncTree_,t,u,a.currentWriteId,a.applyLocally);Eb(e.eventQueue_,t,d),qb(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(t,n,i)=>{let s=null;t?r.reject(t):(s=new ak(i,new sk(e._repo,e._path),D_),r.resolve(new Pk(n,s)))},i,!0),r.promise}g_.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},g_.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},function(e){Yg=Tf,bf(new dh("database",(e,{instanceIdentifier:t})=>Ik(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),Nf(Kg,Qg,e),Nf(Kg,Qg,"esm2020")}();function Ak(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function Ok(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>Ok(e));if("function"==typeof e||"object"==typeof e)return Ak(e,e=>Ok(e));throw new Error("Data cannot be encoded in JSON: "+e)}function Dk(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>Dk(e)):"function"==typeof e||"object"==typeof e?Ak(e,e=>Dk(e)):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk="functions",Mk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk extends Hd{constructor(e,t,n){super(`${Lk}/${e}`,t||""),this.details=n,Object.setPrototypeOf(this,jk.prototype)}}function Fk(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"==typeof t){if(!Mk[t])return new jk("internal","internal");r=Mk[t],i=t}const s=e.message;"string"==typeof s&&(i=s),n=e.details,void 0!==n&&(n=Dk(n))}}catch(s){}return"ok"===r?null:new jk(r,i,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t,n,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Cf(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(e=>this.auth=e,()=>{}),this.messaging||n.get().then(e=>this.messaging=e,()=>{}),this.appCheck||null==r||r.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null==e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="us-central1",Wk=/^data: (.*?)(?:\n|$)/;class $k{constructor(e,t,n,r,i=zk,s=(...e)=>fetch(...e)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new Uk(e,t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(i);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=zk}catch(a){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){return`${this.emulatorOrigin}/${t}/${this.region}/${e}`}return null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function Bk(e,t,n){const r=n=>function(e,t,n,r){const i=e._url(t);return async function(e,t,n,r){n=Ok(n);const i={data:n},s=await Hk(e,r),a=r.timeout||7e4,o=function(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new jk("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(a),l=await Promise.race([Vk(t,i,s,e.fetchImpl,e),o.promise,e.cancelAllRequests]);if(o.cancel(),!l)throw new jk("cancelled","Firebase Functions instance was deleted.");const c=Fk(l.status,l.json);if(c)throw c;if(!l.json)throw new jk("internal","Response is not valid JSON object.");let u=l.json.data;void 0===u&&(u=l.json.result);if(void 0===u)throw new jk("internal","Response is missing data field.");return{data:Dk(u)}}(e,i,n,r)}(e,t,n,{});return r.stream=(n,r)=>function(e,t,n,r){const i=e._url(t);return async function(e,t,n,r){var i;n=Ok(n);const s={data:n},a=await Hk(e,r);let o,l,c;a["Content-Type"]="application/json",a.Accept="text/event-stream";try{o=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(s),headers:a,signal:null==r?void 0:r.signal,credentials:qk(e)})}catch(h){if(h instanceof Error&&"AbortError"===h.name){const e=new jk("cancelled","Request was cancelled.");return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const e=Fk(0,null);return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const u=new Promise((e,t)=>{l=e,c=t});null==(i=null==r?void 0:r.signal)||i.addEventListener("abort",()=>{const e=new jk("cancelled","Request was cancelled.");c(e)});const d=function(e,t,n,r){const i=(e,r)=>{const i=e.match(Wk);if(!i)return;const s=i[1];try{const e=JSON.parse(s);if("result"in e)return void t(Dk(e.result));if("message"in e)return void r.enqueue(Dk(e.message));if("error"in e){const t=Fk(0,e);return r.error(t),void n(t)}}catch(a){if(a instanceof jk)return r.error(a),void n(a)}},s=new TextDecoder;return new ReadableStream({start(t){let a="";return o();async function o(){if(null==r?void 0:r.aborted){const e=new jk("cancelled","Request was cancelled");return t.error(e),n(e),Promise.resolve()}try{const{value:l,done:c}=await e.read();if(c)return a.trim()&&i(a.trim(),t),void t.close();if(null==r?void 0:r.aborted){const r=new jk("cancelled","Request was cancelled");return t.error(r),n(r),void(await e.cancel())}a+=s.decode(l,{stream:!0});const u=a.split("\n");a=u.pop()||"";for(const e of u)e.trim()&&i(e.trim(),t);return o()}catch(l){const e=l instanceof jk?l:Fk(0,null);t.error(e),n(e)}}},cancel:()=>e.cancel()})}(o.body.getReader(),l,c,null==r?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const e=d.getReader();return{async next(){const{value:t,done:n}=await e.read();return{value:t,done:n}},return:async()=>(await e.cancel(),{done:!0,value:void 0})}}},data:u}}(e,i,n,r||{})}(e,t,n,r),r}function qk(e){return e.emulatorOrigin&&Fd(e.emulatorOrigin)?"include":void 0}async function Vk(e,t,n,r,i){let s;n["Content-Type"]="application/json";try{s=await r(e,{method:"POST",body:JSON.stringify(t),headers:n,credentials:qk(i)})}catch(o){return{status:0,json:null}}let a=null;try{a=await s.json()}catch(o){}return{status:s.status,json:a}}async function Hk(e,t){const n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),null!==r.appCheckToken&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}const Gk="@firebase/functions",Kk="0.13.1";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Qk(e=xf(),t=zk){const n=kf(uh(e),Lk).getImmediate({identifier:t}),r=Dd("functions");return r&&function(e,t,n){!function(e,t,n){const r=Fd(t);e.emulatorOrigin=`http${r?"s":""}://${t}:${n}`,r&&(Ud(e.emulatorOrigin+"/backends"),$d("Functions",!0))}(uh(e),t,n)}(n,...r),n}function Yk(e,t,n){return Bk(uh(e),t)}!function(e){bf(new dh(Lk,(e,{instanceIdentifier:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("messaging-internal"),s=e.getProvider("app-check-internal");return new $k(n,r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Nf(Gk,Kk,e),Nf(Gk,Kk,"esm2020")}();const Jk={apiKey:void 0,authDomain:void 0,databaseURL:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0};let Xk,Zk=null,eC=null,tC=null,nC=null;const rC=new Promise(e=>{Xk=e});let iC=!1;const sC=()=>{var e;if(!Boolean(Jk.apiKey&&Jk.authDomain&&Jk.projectId))return console.warn("Firebase not configured. Add environment variables to enable online features."),null;if(!Zk){Zk=Ef(Jk);if(Dg.isNativePlatform()&&(null==(e=Dg.Plugins)?void 0:e.FirebaseAuthentication)){console.log(" Using native Firebase Authentication plugin");const e=Dg.Plugins.FirebaseAuthentication;eC={signInAnonymously:async()=>{const t=await e.signInAnonymously();return eC.currentUser=t.user,t},signOut:()=>e.signOut(),currentUser:null,onAuthStateChanged:t=>(e.getCurrentUser().then(e=>{eC.currentUser=e.user,t(e.user)}).catch(()=>t(null)),e.addListener("authStateChange",e=>{eC.currentUser=e.user,t(e.user)}),()=>{})}}else eC=xg(Zk);tC=Ek(Zk),nC=Qk(Zk,"europe-west1"),eC.onAuthStateChanged(e=>{e?iC||(iC=!0,Xk(e)):eC.signInAnonymously().catch(e=>{console.warn("Anonymous auth failed:",e),iC||(iC=!0,Xk(null))})})}return{app:Zk,auth:eC,database:tC,functions:nC}},aC=()=>(eC||sC(),eC),oC=()=>(tC||sC(),tC),lC=()=>(nC||sC(),nC);function cC(){const[e,t]=U.useState(null),[n,r]=U.useState(!0),[i,s]=U.useState(null);U.useEffect(()=>{const e=aC();if(!e)return void r(!1);const n=e,i="function"==typeof n.onAuthStateChanged?n.onAuthStateChanged(e=>{t(e),r(!1),s(null)}):gm(e,e=>{t(e),r(!1),s(null)},e=>{console.error("Auth state error:",e),s(e.message),r(!1)});return()=>i()},[]);const a=U.useCallback(async()=>{const e=aC();if(!e)return s("Firebase not configured"),null;try{r(!0),s(null);const n=e,i="function"==typeof n.signInAnonymously?await n.signInAnonymously():await fm(e);return t(i.user),i.user}catch(n){const e=n instanceof Error?n.message:"Sign in failed";return s(e),console.error("Anonymous sign in error:",n),null}finally{r(!1)}},[]),o=U.useCallback(async()=>{const e=aC();if(!e)return s("Firebase not configured"),null;try{r(!0),s(null);const n=new lm,i=await Vm(e,n);return t(i.user),i.user}catch(n){const e=n instanceof Error?n.message:"Google sign in failed";return s(e),console.error("Google sign in error:",n),null}finally{r(!1)}},[]),l=U.useCallback(async()=>{const e=aC();if(!e)return s("Firebase not configured"),null;try{r(!0),s(null);const n=new om,i=await Vm(e,n);return t(i.user),i.user}catch(n){const e=n instanceof Error?n.message:"Facebook sign in failed";return s(e),console.error("Facebook sign in error:",n),null}finally{r(!1)}},[]),c=U.useCallback(async()=>{const e=aC();if(!e)return s("Firebase not configured"),null;try{r(!0),s(null);const n=new am("apple.com"),i=await Vm(e,n);return t(i.user),i.user}catch(n){const e=n instanceof Error?n.message:"Apple sign in failed";return s(e),console.error("Apple sign in error:",n),null}finally{r(!1)}},[]),u=U.useCallback(async()=>{const e=aC();if(e)try{const n=e;"function"==typeof n.signOut?await n.signOut():await function(e){return uh(e).signOut()}(e),t(null)}catch(n){const e=n instanceof Error?n.message:"Sign out failed";s(e),console.error("Sign out error:",n)}},[]);return{user:e,isLoading:n,isAuthenticated:!!e,isAnonymous:(null==e?void 0:e.isAnonymous)??!1,error:i,signInAnonymous:a,signInWithGoogle:o,signInWithFacebook:l,signInWithApple:c,signOut:u}}function uC(e){return e<=1?0:Math.floor(50*e*Math.pow(1.08,e-1))}const dC={count:1,names:["Player 1","Player 2","Player 3","Player 4"],gameMode:501,aiPlayers:[!1,!1,!1,!1],aiDifficulty:[null,null,null,null],legsPerSet:3,setsToWin:1,flags:["","","",""]},hC=()=>({dartsThrown:0,totalScore:0,averagePerDart:0,averagePerTurn:0,highest3DartScore:0,checkoutPercentage:0,triples:0,doubles:0,bulls:0,one80s:0});function fC(e){const[t,n]=U.useState("landing"),[r,i]=U.useState([]),[s,a]=U.useState(0),[o,l]=U.useState(0),[c,u]=U.useState(0),[d,h]=U.useState([]),[f,p]=U.useState([]),[m,g]=U.useState(0),[y,_]=U.useState({x:id,y:id}),[v,w]=U.useState(!1),[b,k]=U.useState(0),[C,S]=U.useState(!1),[I,T]=U.useState({}),[E,x]=U.useState(null),[N,P]=U.useState(null),[R,A]=U.useState(null),[O,D]=U.useState([]),[L,M]=U.useState([]),[j,F]=U.useState(null),[z,W]=U.useState(dC),$=U.useMemo(()=>r[s]||null,[r,s]),B=U.useMemo(()=>r.length>1&&r.some(e=>e.isAI),[r]),q=U.useMemo(()=>!!$&&($.score<=170&&$.score>=2),[$]),V=U.useCallback(()=>{var t,r;const s=`match_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,o=`leg_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,c=[],d={};for(let e=0;e<z.count;e++){const t=`player_${e}`;c.push({id:t,name:z.names[e]||`Player ${e+1}`,score:z.gameMode,isAI:z.aiPlayers[e]||!1,aiDifficulty:z.aiDifficulty[e],flag:z.flags[e]||""}),d[t]=hC()}i(c),T(d),a(0),l(0),u(0),h([]),p([]),g(0),x(null),F(null),D(new Array(z.count).fill(0)),M(new Array(z.count).fill(0)),n("playing"),null==(t=null==e?void 0:e.onMatchStart)||t.call(e,s),null==(r=null==e?void 0:e.onLegStart)||r.call(e,o)},[z,e]),H=U.useCallback(()=>{var t;const n=`leg_${Date.now()}_${Math.random().toString(36).slice(2,8)}`;i(e=>e.map(e=>({...e,score:z.gameMode}))),a(0),l(0),u(0),h([]),p([]),g(0),x(null),null==(t=null==e?void 0:e.onLegStart)||t.call(e,n)},[z.gameMode,e]),G=U.useCallback((t=!1)=>{var n;t&&$&&c>0&&i(e=>e.map(e=>e.id===$.id?{...e,score:e.score+c}:e)),!t&&$&&c>0&&(T(e=>{const t=e[$.id]||{dartsThrown:0,totalScore:0,averagePerDart:0,averagePerTurn:0,highest3DartScore:0,checkoutPercentage:0,triples:0,doubles:0,bulls:0,one80s:0};return{...e,[$.id]:{...t,highest3DartScore:Math.max(t.highest3DartScore,c),one80s:t.one80s+(180===c?1:0)}}}),null==(n=null==e?void 0:e.onTurnComplete)||n.call(e,{turnScore:c,is180:180===c})),a(e=>(e+1)%r.length),l(0),u(0),h([]),p([])},[$,c,r.length,e]),K=U.useCallback(t=>{var i,a,o;if(!$)return;null==(i=null==e?void 0:e.onCheckout)||i.call(e,t),null==(a=null==e?void 0:e.onLegComplete)||a.call(e,{won:!0,dartsUsed:m});const l=[...O];if(l[s]=(l[s]||0)+1,D(l),l[s]>=z.legsPerSet){const t=[...L];t[s]=(t[s]||0)+1,M(t),t[s]>=z.setsToWin?(null==(o=null==e?void 0:e.onGameComplete)||o.call(e,!0),F($),x($),n("gameOver")):(D(new Array(r.length).fill(0)),H())}else H()},[$,s,O,L,m,e,z,r.length,H]),Q=U.useCallback((t,n)=>{var r;const s=function(e,t){const n=e-id,r=t-id,i=Math.sqrt(n*n+r*r);if(i>ud)return{score:0,multiplier:0,segment:"MISS",position:{x:e,y:t},isBust:!1};if(i<=10)return{score:50,multiplier:2,segment:"BULL",position:{x:e,y:t},isBust:!1};if(i<=ad)return{score:25,multiplier:1,segment:"25",position:{x:e,y:t},isBust:!1};let s=Math.atan2(r,n)*(180/Math.PI)+90;s<0&&(s+=360);const a=Math.floor((s+9)/18)%20,o=sd[a];return i>=cd&&i<=ud?{score:2*o,multiplier:2,segment:`D${o}`,position:{x:e,y:t},isBust:!1}:i>=od&&i<=ld?{score:3*o,multiplier:3,segment:`T${o}`,position:{x:e,y:t},isBust:!1}:{score:o,multiplier:1,segment:`${o}`,position:{x:e,y:t},isBust:!1}}(t,n);$&&(s.isBust=function(e,t,n){const r=e-t;return r<0||1===r||0===r&&2!==n}($.score,s.score,s.multiplier));const a={id:`dart_${Date.now()}_${Math.random()}`,x:t,y:n,score:s.score,multiplier:s.multiplier,segment:s.segment};if(h(e=>[...e,a]),p(e=>[...e,s]),l(e=>e+1),g(e=>e+1),null==(r=null==e?void 0:e.onThrow)||r.call(e,{score:s.score,segment:s.segment,multiplier:s.multiplier,isBull:"BULL"===s.segment,isTriple:3===s.multiplier}),s.isBust)return A(s),setTimeout(()=>{A(null),G(!0)},1500),s;if(u(e=>e+s.score),$&&(i(e=>e.map(e=>e.id===$.id?{...e,score:e.score-s.score}:e)),T(e=>{const t=e[$.id]||{dartsThrown:0,totalScore:0,averagePerDart:0,averagePerTurn:0,highest3DartScore:0,checkoutPercentage:0,triples:0,doubles:0,bulls:0,one80s:0};return{...e,[$.id]:{...t,dartsThrown:t.dartsThrown+1,totalScore:t.totalScore+s.score,triples:t.triples+(3===s.multiplier?1:0),doubles:t.doubles+(2===s.multiplier?1:0),bulls:t.bulls+("BULL"===s.segment||"25"===s.segment?1:0)}}}),$.score-s.score===0)){const e=c+s.score;K(e)}return A(s),setTimeout(()=>A(null),1500),s},[$,c,e,G,K]),Y=U.useCallback(()=>{n("landing"),i([]),a(0),l(0),u(0),h([]),p([]),T({}),x(null),F(null),D([]),M([]),P(null),A(null),_({x:id,y:id}),w(!1),k(0),S(!1)},[]);return{gameState:t,players:r,currentPlayerIndex:s,dartsThrown:o,currentTurnScore:c,dartPositions:d,aimPosition:y,isAiming:v,power:b,isPowerCharging:C,gameStats:I,winner:E,checkout:N,legScores:O,setScores:L,matchWinner:j,showScorePopup:R,currentTurnThrows:f,playerSetup:z,currentPlayer:$,hasAIOpponent:B,isCheckoutPosition:q,setGameState:n,setPlayerSetup:W,startGame:V,throwDart:Q,endTurn:G,setAimPosition:_,setIsAiming:w,setPower:k,setIsPowerCharging:S,resetGame:Y,resetLeg:H,setPlayers:i,setCurrentPlayerIndex:a,setDartsThrown:l,setCurrentTurnScore:u,setDartPositions:h,setWinner:x}}const pC={throw:{frequency:200,duration:.1,type:"sine",gain:.3},hit:{frequency:400,duration:.15,type:"sine",gain:.4},bull:{frequency:800,duration:.2,type:"sine",gain:.5},double:{frequency:600,duration:.15,type:"sine",gain:.4},triple:{frequency:700,duration:.15,type:"sine",gain:.45},miss:{frequency:150,duration:.2,type:"sawtooth",gain:.2},bust:{frequency:100,duration:.3,type:"sawtooth",gain:.3},checkout:{frequency:1e3,duration:.4,type:"sine",gain:.5},180:{frequency:880,duration:.5,type:"sine",gain:.6},click:{frequency:500,duration:.05,type:"square",gain:.2},success:{frequency:600,duration:.2,type:"sine",gain:.4},error:{frequency:200,duration:.3,type:"sawtooth",gain:.3}};const mC={themeId:"classic",neonColor:"cyan",savedAt:(new Date).toISOString()};function gC(){return function(e,t,n={}){const{serializer:r=JSON.stringify,deserializer:i=JSON.parse,validator:s}=n,[a,o]=U.useState(()=>{try{const n=localStorage.getItem(e);if(null===n)return t;const r=i(n);if(s){if(!s(r))return console.warn(`Invalid data in localStorage for key "${e}", using default`),t}else console.warn(`SECURITY: No validator for localStorage key "${e}". User-manipulated data may cause unexpected behavior.`);return r}catch(n){return console.error(`Error reading localStorage key "${e}":`,n),t}});U.useEffect(()=>{try{localStorage.setItem(e,r(a))}catch(t){console.error(`Error writing to localStorage key "${e}":`,t)}},[e,a,r]);const l=U.useCallback(e=>{o(t=>e instanceof Function?e(t):e)},[]),c=U.useCallback(()=>{try{localStorage.removeItem(e),o(t)}catch(n){console.error(`Error removing localStorage key "${e}":`,n)}},[e,t]);return[a,l,c]}("quikdarts_theme",mC,{validator:e=>{if(!e||"object"!=typeof e)return!1;const t=e;return"string"==typeof t.themeId&&"string"==typeof t.neonColor}})}function yC(){const[e,t]=gC(),n="string"==typeof(r=e.themeId)&&r in pd?e.themeId:hd.id;var r;const i="string"==typeof(s=e.neonColor)&&Object.values(dd).includes(s)?e.neonColor:dd.CYAN;var s;const a=U.useMemo(()=>{const e=pd[n]||hd;if(n===fd.id){const t=function(e){const t={cyan:{primary:"#00ffff",secondary:"#00d4ff",glow:"rgba(0, 255, 255, 0.6)"},magenta:{primary:"#ff00ff",secondary:"#ff44aa",glow:"rgba(255, 0, 255, 0.6)"},green:{primary:"#00ff66",secondary:"#44ff88",glow:"rgba(0, 255, 102, 0.6)"},orange:{primary:"#ff8800",secondary:"#ffaa44",glow:"rgba(255, 136, 0, 0.6)"}};return t[e]||t.cyan}(i);return{...e,colors:{...e.colors,wire:t.primary,numbers:t.primary},wireStyle:{...e.wireStyle,glowColor:t.glow}}}return e},[n,i]),o=U.useMemo(()=>Object.values(pd).map(e=>({id:e.id,name:e.name,description:e.description,premiumOnly:e.premiumOnly})),[]),l=U.useCallback(e=>{t(t=>({...t,themeId:e,savedAt:(new Date).toISOString()}))},[t]),c=U.useCallback(e=>{t(t=>({...t,neonColor:e,savedAt:(new Date).toISOString()}))},[t]);return{theme:a,themeId:n,neonColor:i,availableThemes:o,selectTheme:l,selectNeonColor:c}}function _C(e,t,n,r){const i=[e];return void 0!==n&&i.push(n),i.push(t),void 0!==r&&i.push(String(r)),i.join(":")}const vC=[{id:"first_game",name:"First Steps",description:"Every champion starts somewhere. Complete your first game.",icon:"",rarity:"common",mode:"any",statKey:"totalGamesPlayed",target:1},{id:"first_win",name:"First Victory",description:"The taste of victory never gets old. Win your first game.",icon:"",rarity:"common",mode:"any",statKey:"totalGamesWon",target:1},{id:"first_180",name:"Maximum! I",description:"The crowd goes wild! Hit your first perfect 180.",icon:"",rarity:"uncommon",mode:"any",statKey:"total180s",target:1,chain:"maximum",tier:1},{id:"ten_180s",name:"Maximum! II",description:"Consistency is key. Land 10 maximum scores.",icon:"",rarity:"rare",mode:"any",statKey:"total180s",target:10,chain:"maximum",tier:2},{id:"fifty_180s",name:"Maximum! III",description:"Only the elite reach this level. Hit 50 perfect 180s.",icon:"",rarity:"epic",mode:"any",statKey:"total180s",target:50,chain:"maximum",tier:3},{id:"hundred_180s",name:"Maximum! IV",description:"Legendary precision. 100 perfect 180s.",icon:"",rarity:"legendary",mode:"any",statKey:"total180s",target:100,chain:"maximum",tier:4},{id:"first_bull",name:"Bullseye! I",description:"Right in the center! Hit your first bullseye.",icon:"",rarity:"common",mode:"any",statKey:"totalBulls",target:1,chain:"bullseye",tier:1},{id:"fifty_bulls",name:"Bullseye! II",description:"Precision personified. Find the bullseye 50 times.",icon:"",rarity:"rare",mode:"any",statKey:"totalBulls",target:50,chain:"bullseye",tier:2},{id:"hundred_bulls",name:"Bullseye! III",description:"The center is your home. 100 bullseyes and counting.",icon:"",rarity:"epic",mode:"any",statKey:"totalBulls",target:100,chain:"bullseye",tier:3},{id:"twofifty_bulls",name:"Bullseye! IV",description:"Master of the center. 250 bullseyes.",icon:"",rarity:"legendary",mode:"any",statKey:"totalBulls",target:250,chain:"bullseye",tier:4},{id:"checkout_100",name:"Checkout I",description:"Nerves of steel. Checkout 100+ in one visit.",icon:"",rarity:"uncommon",mode:"any",statKey:"highestCheckout",target:100,isThreshold:!0,chain:"checkout",tier:1},{id:"checkout_150",name:"Checkout II",description:"The impossible made possible. Checkout 150+ points.",icon:"",rarity:"rare",mode:"any",statKey:"highestCheckout",target:150,isThreshold:!0,chain:"checkout",tier:2},{id:"checkout_170",name:"Checkout III",description:"The ultimate finish. Checkout 170 - the maximum.",icon:"",rarity:"legendary",mode:"any",statKey:"highestCheckout",target:170,isThreshold:!0,chain:"checkout",tier:3},{id:"fifty_triples",name:"Triple I",description:"Treble trouble for opponents. Hit 50 triples.",icon:"3",rarity:"uncommon",mode:"any",statKey:"totalTriples",target:50,chain:"triple",tier:1},{id:"two_hundred_triples",name:"Triple II",description:"The triple 20 is your playground. 200 triples.",icon:"3",rarity:"rare",mode:"any",statKey:"totalTriples",target:200,chain:"triple",tier:2},{id:"five_hundred_triples",name:"Triple III",description:"Triple mastery achieved. 500 triples.",icon:"3",rarity:"epic",mode:"any",statKey:"totalTriples",target:500,chain:"triple",tier:3},{id:"five_wins",name:"Victory I",description:"You're heating up! Claim 5 victories.",icon:"",rarity:"uncommon",mode:"any",statKey:"totalGamesWon",target:5,chain:"victory",tier:1},{id:"twenty_wins",name:"Victory II",description:"They fear your name. Dominate with 20 wins.",icon:"",rarity:"rare",mode:"any",statKey:"totalGamesWon",target:20,chain:"victory",tier:2},{id:"fifty_wins",name:"Victory III",description:"A true champion emerges. Conquer 50 games.",icon:"",rarity:"epic",mode:"any",statKey:"totalGamesWon",target:50,chain:"victory",tier:3},{id:"hundred_wins",name:"Victory IV",description:"Unstoppable force. 100 victories.",icon:"",rarity:"legendary",mode:"any",statKey:"totalGamesWon",target:100,chain:"victory",tier:4},{id:"perfect9_first",name:"Perfect 9",description:"The holy grail of darts. Complete a leg with 9 perfect darts.",icon:"",rarity:"legendary",mode:"any",statKey:"totalNineDarters",target:1,chain:"perfect9",tier:1},{id:"perfect9_ten",name:"Perfect 9 Master",description:"Lightning strikes twice... and again. Complete 10 nine-darters.",icon:"",rarity:"mythic",mode:"any",statKey:"totalNineDarters",target:10,chain:"perfect9",tier:2},{id:"perfect9_hundred",name:"Perfect 9 Legend",description:"Perfection personified. Complete 100 nine-darters.",icon:"",rarity:"mythic",mode:"any",statKey:"totalNineDarters",target:100,chain:"perfect9",tier:3},{id:"first_online",name:"Global I",description:"Step into the arena. Face your first online opponent.",icon:"",rarity:"common",mode:"online",statKey:"totalOnlineGames",target:1,chain:"global",tier:1},{id:"first_online_win",name:"Global II",description:"Real opponents, real pressure, real victory.",icon:"",rarity:"uncommon",mode:"online",statKey:"totalOnlineWins",target:1,chain:"global",tier:2},{id:"ten_online_wins",name:"Global III",description:"Battle-tested. Defeat 10 online challengers.",icon:"",rarity:"rare",mode:"online",statKey:"totalOnlineWins",target:10,chain:"global",tier:3},{id:"fifty_online_wins",name:"Global IV",description:"World-class competitor. 50 online victories.",icon:"",rarity:"epic",mode:"online",statKey:"totalOnlineWins",target:50,chain:"global",tier:4},{id:"first_wagered_win",name:"High Stakes I",description:"Fortune favors the bold. Win your first wagered match.",icon:"",rarity:"uncommon",mode:"online",statKey:"totalWageredWins",target:1,chain:"highstakes",tier:1},{id:"ten_wagered_wins",name:"High Stakes II",description:"A consistent winner. 10 wagered victories.",icon:"",rarity:"rare",mode:"online",statKey:"totalWageredWins",target:10,chain:"highstakes",tier:2},{id:"fifty_wagered_wins",name:"High Stakes III",description:"The house fears you. 50 wagered wins.",icon:"",rarity:"epic",mode:"online",statKey:"totalWageredWins",target:50,chain:"highstakes",tier:3},{id:"profit_1k",name:"Profit I",description:"Money talks. Earn 1,000 net coins from wagered matches.",icon:"",rarity:"rare",mode:"online",statKey:"totalWageredProfit",target:1e3,chain:"profit",tier:1},{id:"profit_10k",name:"Profit II",description:"A small fortune. 10,000 net coins earned.",icon:"",rarity:"epic",mode:"online",statKey:"totalWageredProfit",target:1e4,chain:"profit",tier:2},{id:"profit_100k",name:"Profit III",description:"Darts tycoon. 100,000 net coins earned.",icon:"",rarity:"legendary",mode:"online",statKey:"totalWageredProfit",target:1e5,chain:"profit",tier:3},{id:"daily_streak_3",name:"Dedicated I",description:"Building a habit. Play 3 days in a row.",icon:"",rarity:"uncommon",mode:"any",statKey:"currentDailyStreak",target:3,isThreshold:!0,chain:"dedicated",tier:1},{id:"daily_streak_7",name:"Dedicated II",description:"A full week of darts. 7-day streak.",icon:"",rarity:"rare",mode:"any",statKey:"currentDailyStreak",target:7,isThreshold:!0,chain:"dedicated",tier:2},{id:"daily_streak_30",name:"Dedicated III",description:"True dedication. 30-day streak achieved.",icon:"",rarity:"epic",mode:"any",statKey:"currentDailyStreak",target:30,isThreshold:!0,chain:"dedicated",tier:3},{id:"weekly_challenge_complete",name:"Challenge Accepted",description:"Complete your first weekly challenge.",icon:"",rarity:"rare",mode:"any"}],wC=[{id:"weekly_180_sprint",name:"Maximum Week",description:"Hit 10 perfect 180s this week",icon:"",rarity:"rare",statKey:"weekly180s",target:10,week:1,reward:"180 Master Badge"},{id:"weekly_bulls_blitz",name:"Bulls Week",description:"Hit 25 bullseyes this week",icon:"",rarity:"rare",statKey:"weeklyBulls",target:25,week:2,reward:"Bullseye Badge"},{id:"weekly_win_streak",name:"Victory Week",description:"Win 10 games this week",icon:"",rarity:"rare",statKey:"weeklyWins",target:10,week:3,reward:"Champion Badge"},{id:"weekly_triple_threat",name:"Triples Week",description:"Hit 50 triples this week",icon:"3",rarity:"rare",statKey:"weeklyTriples",target:50,week:4,reward:"Triple Badge"}],bC=new Map(vC.map(e=>[e.id,e]));function kC(){const e=new Date,t=new Date(e.getFullYear(),0,1),n=Math.floor((e.getTime()-t.getTime())/864e5);return(Math.ceil((n+t.getDay()+1)/7)-1)%4+1}function CC(){const e=kC();return wC.find(t=>t.week===e)}function SC(){return{schemaVersion:1,unlockedIds:new Set,stats:{totalGamesPlayed:0,totalGamesWon:0,totalOnlineGames:0,totalOnlineWins:0,totalWageredGames:0,totalWageredWins:0,totalWageredProfit:0,total180s:0,totalNineDarters:0,totalBulls:0,totalTriples:0,highestCheckout:0,currentDailyStreak:0,longestDailyStreak:0,lastPlayDate:null},processedEventIds:new Set}}function IC(){return{schemaVersion:1,weekNumber:kC(),challengeId:CC().id,stats:{weekly180s:0,weeklyBulls:0,weeklyWins:0,weeklyTriples:0},completed:!1,completedChallenges:[]}}function TC(e,t,n){if(t.processedEventIds.has(e.eventId))return{newUnlocks:[],statsUpdated:!1,weeklyProgressUpdated:!1};if(t.processedEventIds.add(e.eventId),t.processedEventIds.size>5e3){const e=Array.from(t.processedEventIds),n=e.length-5e3;for(let r=0;r<n;r++)t.processedEventIds.delete(e[r])}const r=function(e,t){let n=!1;switch(e.type){case"GAME_COMPLETE":t.totalGamesPlayed++,n=!0,e.won&&t.totalGamesWon++,e.isOnline&&(t.totalOnlineGames++,e.won&&t.totalOnlineWins++),e.isWagered&&(t.totalWageredGames++,e.won&&t.totalWageredWins++);break;case"LEG_COMPLETE":e.won&&9===e.dartsUsed&&(t.totalNineDarters++,n=!0);break;case"THROW":e.isBull&&(t.totalBulls++,n=!0),e.isTriple&&(t.totalTriples++,n=!0);break;case"TURN_COMPLETE":e.is180&&(t.total180s++,n=!0);break;case"CHECKOUT":e.checkoutValue>t.highestCheckout&&(t.highestCheckout=e.checkoutValue,n=!0);break;case"WAGERED_PAYOUT":{const r=e.payout-e.stake;t.totalWageredProfit+=r,n=!0;break}case"DAILY_LOGIN":n=function(e,t){const n=t,r=e.lastPlayDate;if(r===n)return!1;if(null===r)return e.currentDailyStreak=1,e.longestDailyStreak=1,e.lastPlayDate=n,!0;const i=new Date(r+"T00:00:00Z"),s=new Date(n+"T00:00:00Z"),a=Math.floor((s.getTime()-i.getTime())/864e5);1===a?(e.currentDailyStreak++,e.currentDailyStreak>e.longestDailyStreak&&(e.longestDailyStreak=e.currentDailyStreak)):a>1&&(e.currentDailyStreak=1);return e.lastPlayDate=n,!0}(t,e.date)}return n}(e,t.stats),i=function(e,t){const n=kC();if(t.weekNumber!==n){const e=CC();t.weekNumber=n,t.challengeId=e.id,t.stats={weekly180s:0,weeklyBulls:0,weeklyWins:0,weeklyTriples:0},t.completed=!1}let r=!1;switch(e.type){case"TURN_COMPLETE":e.is180&&(t.stats.weekly180s++,r=!0);break;case"THROW":e.isBull&&(t.stats.weeklyBulls++,r=!0),e.isTriple&&(t.stats.weeklyTriples++,r=!0);break;case"GAME_COMPLETE":e.won&&(t.stats.weeklyWins++,r=!0)}return r}(e,n),s=function(e){const t=[];for(const n of vC)e.unlockedIds.has(n.id)||EC(n,e.stats)&&(e.unlockedIds.add(n.id),t.push(n.id));return t}(t);return function(e,t){if(e.completed)return;const n=wC.find(t=>t.id===e.challengeId);if(!n)return;const r=e.stats[n.statKey];r>=n.target&&(e.completed=!0,e.completedChallenges.includes(n.id)||e.completedChallenges.push(n.id),1===e.completedChallenges.length&&t.unlockedIds.add("weekly_challenge_complete"))}(n,t),{newUnlocks:s,statsUpdated:r,weeklyProgressUpdated:i}}function EC(e,t){if(!e.statKey||void 0===e.target)return!1;const n=t[e.statKey];return"number"==typeof n&&(e.isThreshold,n>=e.target)}const xC="quikdarts_achievements",NC="quikdarts_stats",PC="quikdarts_weekly_challenge",RC="quikdarts_processed_events";function AC(){try{const e=localStorage.getItem(xC),t=e?JSON.parse(e):null,n=Array.isArray(t)?new Set(t):new Set,r=localStorage.getItem(NC),i=r?JSON.parse(r):null;if(((null==i?void 0:i.schemaVersion)??0)>1)return console.warn("[achievements/storage] Stats schema version is from future, resetting"),SC();const s=i?function(e){const t={totalGamesPlayed:0,totalGamesWon:0,totalOnlineGames:0,totalOnlineWins:0,totalWageredGames:0,totalWageredWins:0,totalWageredProfit:0,total180s:0,totalNineDarters:0,totalBulls:0,totalTriples:0,highestCheckout:0,currentDailyStreak:0,longestDailyStreak:0,lastPlayDate:null};return{totalGamesPlayed:e.totalGamesPlayed??t.totalGamesPlayed,totalGamesWon:e.totalGamesWon??t.totalGamesWon,totalOnlineGames:e.totalOnlineGames??t.totalOnlineGames,totalOnlineWins:e.totalOnlineWins??t.totalOnlineWins,totalWageredGames:e.totalWageredGames??t.totalWageredGames,totalWageredWins:e.totalWageredWins??t.totalWageredWins,totalWageredProfit:e.totalWageredProfit??t.totalWageredProfit,total180s:e.total180s??t.total180s,totalNineDarters:e.totalNineDarters??t.totalNineDarters,totalBulls:e.totalBulls??t.totalBulls,totalTriples:e.totalTriples??t.totalTriples,highestCheckout:e.highestCheckout??t.highestCheckout,currentDailyStreak:e.currentDailyStreak??t.currentDailyStreak,longestDailyStreak:e.longestDailyStreak??t.longestDailyStreak,lastPlayDate:e.lastPlayDate??t.lastPlayDate}}(i):{totalGamesPlayed:0,totalGamesWon:0,totalOnlineGames:0,totalOnlineWins:0,totalWageredGames:0,totalWageredWins:0,totalWageredProfit:0,total180s:0,totalNineDarters:0,totalBulls:0,totalTriples:0,highestCheckout:0,currentDailyStreak:0,longestDailyStreak:0,lastPlayDate:null},a=localStorage.getItem(RC),o=a?JSON.parse(a):null,l=Array.isArray(o)?new Set(o):new Set,c=Array.from(l);if(c.length>5e3){const e=c.length-5e3;for(let t=0;t<e;t++)l.delete(c[t])}return{schemaVersion:1,unlockedIds:n,stats:s,processedEventIds:l}}catch(e){return console.error("[achievements/storage] Failed to load achievements state:",e),SC()}}function OC(){try{const e=localStorage.getItem(PC);if(!e)return IC();const t=JSON.parse(e);return(t.schemaVersion??0)>1?(console.warn("[achievements/storage] Weekly challenge schema version is from future, resetting"),IC()):{schemaVersion:1,weekNumber:t.weekNumber??1,challengeId:t.challengeId??null,stats:t.stats??{weekly180s:0,weeklyBulls:0,weeklyWins:0,weeklyTriples:0},completed:t.completed??!1,completedChallenges:Array.isArray(t.completedChallenges)?t.completedChallenges:[]}}catch(e){return console.error("[achievements/storage] Failed to load weekly challenge state:",e),IC()}}function DC(e){const t=U.useRef(e);t.current=e;const n=U.useCallback(()=>{const{isOnline:e,isPractice:n,hasAIOpponent:r}=t.current;return e||!n&&r},[]),r=U.useRef(null),i=U.useRef(null),s=U.useRef(null),a=U.useRef(null),o=U.useRef(0),l=U.useRef(0);U.useEffect(()=>{null===r.current&&(r.current=AC()),null===i.current&&(i.current=OC())},[]);const c=U.useCallback(()=>(null===r.current&&(r.current=AC()),r.current),[]),u=U.useCallback(()=>(null===i.current&&(i.current=OC()),i.current),[]),d=U.useCallback(e=>{const n=c(),r=u(),i=TC(e,n,r);return function(e){try{localStorage.setItem(xC,JSON.stringify(Array.from(e.unlockedIds))),localStorage.setItem(NC,JSON.stringify(e.stats)),localStorage.setItem(RC,JSON.stringify(Array.from(e.processedEventIds)))}catch(t){console.error("[achievements/storage] Failed to save achievements state:",t)}}(n),function(e){try{const t={schemaVersion:e.schemaVersion,weekNumber:e.weekNumber,challengeId:e.challengeId,stats:e.stats,completed:e.completed,completedChallenges:e.completedChallenges};localStorage.setItem(PC,JSON.stringify(t))}catch(t){console.error("[achievements/storage] Failed to save weekly challenge state:",t)}}(r),i.newUnlocks.length>0&&t.current.onUnlock&&t.current.onUnlock(i.newUnlocks),i},[c,u]);return{startMatch:U.useCallback(e=>{s.current=e,a.current=null,o.current=0,l.current=0},[]),startLeg:U.useCallback(e=>{a.current=e,o.current=0,l.current=0},[]),emitThrow:U.useCallback(e=>{if(!n())return;const t=s.current,r=a.current;if(!t||!r)return;const i=o.current++,l={type:"THROW",eventId:_C(t,"THROW",r,i),ts:Date.now(),matchId:t,legId:r,throwIndex:i,score:e.score,segment:e.segment,multiplier:e.multiplier,isBull:e.isBull,isTriple:e.isTriple};d(l)},[n,d]),emitTurnComplete:U.useCallback(e=>{if(!n())return;const t=s.current,r=a.current;if(!t||!r)return;const i=l.current++,o={type:"TURN_COMPLETE",eventId:_C(t,"TURN_COMPLETE",r,i),ts:Date.now(),matchId:t,legId:r,turnIndex:i,turnScore:e.turnScore,is180:e.is180};d(o)},[n,d]),emitCheckout:U.useCallback(e=>{if(!n())return;const t=s.current,r=a.current;if(!t||!r)return;const i={type:"CHECKOUT",eventId:_C(t,"CHECKOUT",r),ts:Date.now(),matchId:t,legId:r,checkoutValue:e};d(i)},[n,d]),emitLegComplete:U.useCallback(e=>{if(!n())return;const t=s.current,r=a.current;if(!t||!r)return;const i={type:"LEG_COMPLETE",eventId:_C(t,"LEG_COMPLETE",r),ts:Date.now(),matchId:t,legId:r,dartsUsed:e.dartsUsed,won:e.won};d(i)},[n,d]),emitGameComplete:U.useCallback(e=>{if(!n())return;const r=s.current;if(!r)return;const i={type:"GAME_COMPLETE",eventId:_C(r,"GAME_COMPLETE"),ts:Date.now(),matchId:r,won:e,isOnline:t.current.isOnline,isWagered:t.current.isWagered};d(i)},[n,d]),emitWageredPayout:U.useCallback(e=>{const t=s.current;if(!t)return;const n={type:"WAGERED_PAYOUT",eventId:_C(t,"WAGERED_PAYOUT"),ts:Date.now(),matchId:t,payout:e.payout,stake:e.stake};d(n)},[d]),emitDailyLogin:U.useCallback(()=>{const e=(new Date).toISOString().split("T")[0],t={type:"DAILY_LOGIN",eventId:`daily:${e}`,ts:Date.now(),date:e};d(t)},[d]),getState:U.useCallback(()=>c(),[c]),getWeeklyState:u}}const LC=new Set;function MC(){const[e,t]=U.useState(0),[n,r]=U.useState(!1),[i,s]=U.useState(0),[a,o]=U.useState(!0),[l,c]=U.useState(!1),u=U.useRef(!1),d=U.useRef(null);U.useEffect(()=>{const e=aC(),n=oC(),i=lC();if(!e||!n)return void o(!1);const a=()=>{d.current&&(d.current(),d.current=null)},l=e=>{if(a(),t(0),r(!1),s(0),!e||e.isAnonymous)return void o(!1);o(!0);const l=e.uid,c=gk(ok(n,`users/${l}/wallet`),async e=>{const n=e.val();if(!n){if(!LC.has(l)&&i){LC.add(l);try{const e=Yk(i,"initializeNewUser");await e(),console.log("[useWallet] Wallet initialized for user:",l)}catch(y){console.error("[useWallet] Failed to initialize wallet:",y.message)}}return void o(!1)}t(n.coins||0);const a=n.lastDailyBonus||0,c=Date.now(),u=e=>e?new Date(e).toLocaleDateString("en-CA"):"",d=u(a),h=u(c);r(!a||d!==h);const f=n.lastAdReward||0,p=864e5,m=Math.floor(f/p),g=Math.floor(c/p)>m?0:n.adRewardsToday||0;s(Math.max(0,5-g)),o(!1)},e=>{console.error("[useWallet] Listener error:",e),o(!1)});d.current=c},c="function"==typeof e.onAuthStateChanged?e.onAuthStateChanged(l):gm(e,l);return()=>{c(),a()}},[]);return{coinBalance:e,dailyBonusAvailable:n,adsRemainingToday:i,isLoading:a,isClaimingBonus:l,claimDailyBonus:U.useCallback(async()=>{if(u.current)return;u.current=!0;const e=aC(),t=lC();if(!e||!t)return void(u.current=!1);const n=e.currentUser;if(n&&!n.isAnonymous){c(!0);try{const e=Yk(t,"claimDailyBonus"),n=(await e({timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})).data;if(n.success){r(!1);const e="number"==typeof n.coinsAwarded?n.coinsAwarded:0;alert(`+${e} coins claimed!`)}else{const e=n.error||"Failed to claim bonus";if(n.nextClaimTime){const t=new Date(n.nextClaimTime);alert(`${e}. Next claim available: ${t.toLocaleString()}`)}else alert(e)}}catch(i){console.error("[useWallet] claimDailyBonus error:",i.message),alert("Failed to claim daily bonus. Please try again.")}finally{c(!1),u.current=!1}}else u.current=!1},[])}}function jC({coinBalance:e,dailyBonusAvailable:t,isLoading:n,isClaimingBonus:r,onClaimBonus:i,onOpenShop:s}){return n?K.jsx("div",{className:"coin-display coin-display--loading",children:K.jsx("span",{className:"coin-display__balance",children:"..."})}):K.jsxs("div",{className:"coin-display",children:[K.jsxs("button",{className:"coin-display__balance-container",onClick:s,title:"Open Coin Shop",children:[K.jsx("img",{src:"/assets/coin-chip.png",alt:"Coins",className:"coin-display__icon",width:16,height:16}),K.jsx("span",{className:"coin-display__balance",children:(a=e,a>=1e6?(a/1e6).toFixed(1).replace(/\.0$/,"")+"M":a>=1e3?(a/1e3).toFixed(1).replace(/\.0$/,"")+"K":a.toString())})]}),t&&K.jsx("button",{className:"coin-display__bonus-badge",disabled:r||!i,onClick:i,title:"Claim daily bonus",children:r?"...":"+50 Free!"})]});var a}const FC=({size:e=20,color:t="currentColor",className:n})=>K.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:n,children:K.jsx("path",{d:"M22 2L13 11M22 2L18 22L13 11M22 2L2 7L13 11",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),UC=({size:e=20,color:t="currentColor",className:n})=>K.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:n,children:[K.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:t,strokeWidth:"2"}),K.jsx("path",{d:"M2 12H22M12 2C14.5 4.5 16 8 16 12C16 16 14.5 19.5 12 22C9.5 19.5 8 16 8 12C8 8 9.5 4.5 12 2Z",stroke:t,strokeWidth:"2"})]}),zC=({size:e=20,color:t="currentColor",className:n})=>K.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:n,children:[K.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:t,strokeWidth:"2"}),K.jsx("circle",{cx:"12",cy:"12",r:"6",stroke:t,strokeWidth:"2"}),K.jsx("circle",{cx:"12",cy:"12",r:"2",fill:t})]}),WC=({size:e=20,color:t="currentColor",className:n})=>K.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:n,children:[K.jsx("path",{d:"M8 21H16M12 17V21M6 4H18V8C18 11.3137 15.3137 14 12 14C8.68629 14 6 11.3137 6 8V4Z",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),K.jsx("path",{d:"M6 4H4V6C4 7.10457 4.89543 8 6 8V4ZM18 4V8C19.1046 8 20 7.10457 20 6V4H18Z",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),$C=({size:e=24,color:t="currentColor",className:n})=>K.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:n,children:K.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:t,strokeWidth:"2",strokeLinecap:"round"})}),BC=({size:e=16,className:t})=>K.jsx("img",{src:"/assets/coin-chip.png",alt:"","aria-hidden":"true",width:e,height:e,className:t,style:{objectFit:"contain"},decoding:"async"});function qC({size:e=24,className:t}){return K.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[K.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),K.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}const VC=({size:e=20,color:t="currentColor",className:n})=>K.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:n,children:[K.jsx("path",{d:"M11 5L6 9H2V15H6L11 19V5Z",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),K.jsx("path",{d:"M19.07 4.93C20.9447 6.80528 21.9979 9.34836 21.9979 12C21.9979 14.6516 20.9447 17.1947 19.07 19.07M15.54 8.46C16.4774 9.39764 17.004 10.6692 17.004 11.995C17.004 13.3208 16.4774 14.5924 15.54 15.53",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),HC=({size:e=20,color:t="currentColor",className:n})=>K.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:n,children:[K.jsx("path",{d:"M11 5L6 9H2V15H6L11 19V5Z",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),K.jsx("path",{d:"M23 9L17 15M17 9L23 15",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),GC=[{amount:50,label:"Casual",description:"Low stakes, perfect for warming up"},{amount:100,label:"Standard",description:"The most popular stake level"},{amount:500,label:"High Roller",description:"For confident players"},{amount:2500,label:"Champion",description:"Maximum risk, maximum reward"}];function KC(e){return e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString()}function QC({coinBalance:e,selectedStake:t,onSelectStake:n,onConfirm:r,onPlayFree:i,onClose:s,isLoading:a=!1}){const o=e>=t;return K.jsx("div",{className:"stake-selector-overlay",onClick:s,children:K.jsxs("div",{className:"stake-selector",onClick:e=>e.stopPropagation(),children:[K.jsx("button",{className:"stake-selector__close",onClick:s,children:K.jsx($C,{size:24})}),K.jsxs("div",{className:"stake-selector__header",children:[K.jsx("h2",{className:"stake-selector__title",children:"Choose Your Stake"}),K.jsxs("div",{className:"stake-selector__balance",children:[K.jsx(BC,{size:20}),K.jsxs("span",{children:["Your Balance: ",KC(e)]})]}),K.jsx("p",{className:"stake-selector__subtitle",children:"Winner takes the entire pot!"})]}),K.jsx("div",{className:"stake-selector__options",children:GC.map(r=>{const i=t===r.amount,s=e>=r.amount,a=2*r.amount;return K.jsxs("button",{className:`stake-option ${i?"stake-option--selected":""} ${s?"":"stake-option--disabled"}`,onClick:()=>s&&n(r.amount),disabled:!s,children:[K.jsxs("div",{className:"stake-option__left",children:[K.jsxs("div",{className:"stake-option__label-row",children:[K.jsx("span",{className:"stake-option__label",children:r.label}),!s&&K.jsxs("span",{className:"stake-option__need-more",children:["Need ",r.amount-e," more"]})]}),K.jsx("p",{className:"stake-option__description",children:r.description})]}),K.jsxs("div",{className:"stake-option__right",children:[K.jsxs("div",{className:"stake-option__amount",children:[K.jsx(BC,{size:14}),K.jsx("span",{children:KC(r.amount)})]}),K.jsxs("p",{className:"stake-option__win",children:["Win ",KC(a)]})]})]},r.amount)})}),K.jsxs("div",{className:"stake-selector__actions",children:[K.jsxs("button",{className:"btn btn-primary stake-selector__confirm",onClick:r,disabled:!o||a,children:[K.jsx(UC,{size:20}),a?"Creating...":`Play for ${KC(t)} Coins`]}),K.jsx("button",{className:"btn btn-ghost stake-selector__free",onClick:i,disabled:a,children:"Play Free Instead"})]})]})})}function YC({unlockedIds:e,onDismissed:t,dismissDelay:n=4e3}){const[r,i]=U.useState([]),[s,a]=U.useState(new Set);U.useEffect(()=>{const t=e.filter(e=>!s.has(e));if(0===t.length)return;const n=[];for(const e of t){const t=bC.get(e);t&&n.push({id:`${e}-${Date.now()}`,achievementId:e,name:t.name,icon:t.icon,rarity:t.rarity,exiting:!1})}n.length>0&&(i(e=>[...e,...n]),a(e=>{const n=new Set(e);return t.forEach(e=>n.add(e)),n}))},[e,s]),U.useEffect(()=>{if(0===r.length)return;const e=[];return r.forEach((t,r)=>{if(t.exiting)return;const s=setTimeout(()=>{i(e=>e.map(e=>e.id===t.id?{...e,exiting:!0}:e)),setTimeout(()=>{i(e=>e.filter(e=>e.id!==t.id))},300)},n+300*r);e.push(s)}),()=>{e.forEach(clearTimeout)}},[r,n]),U.useEffect(()=>{0===r.length&&s.size>0&&(null==t||t())},[r.length,s.size,t]);const o=U.useCallback(e=>{i(t=>t.map(t=>t.id===e?{...t,exiting:!0}:t)),setTimeout(()=>{i(t=>t.filter(t=>t.id!==e))},300)},[]);return 0===r.length?null:K.jsx("div",{className:"achievement-toast-container",children:r.map(e=>{return K.jsxs("div",{className:`achievement-toast achievement-toast--${e.rarity} ${e.exiting?"achievement-toast--exiting":""}`,onClick:()=>o(e.id),children:[K.jsx("div",{className:"achievement-toast__icon",children:e.icon}),K.jsxs("div",{className:"achievement-toast__content",children:[K.jsx("div",{className:"achievement-toast__header",children:"Achievement Unlocked!"}),K.jsx("div",{className:"achievement-toast__name",children:e.name}),K.jsx("div",{className:`achievement-toast__rarity achievement-toast__rarity--${e.rarity}`,children:(t=e.rarity,{common:"Common",uncommon:"Uncommon",rare:"Rare",epic:"Epic",legendary:"Legendary",mythic:"Mythic"}[t])})]})]},e.id);var t})})}const JC={common:{label:"Common",order:1},uncommon:{label:"Uncommon",order:2},rare:{label:"Rare",order:3},epic:{label:"Epic",order:4},legendary:{label:"Legendary",order:5},mythic:{label:"Mythic",order:6}},XC={maximum:{name:"Maximum!",icon:""},bullseye:{name:"Bullseye!",icon:""},checkout:{name:"Checkout",icon:""},triple:{name:"Triple",icon:"3"},victory:{name:"Victory",icon:""},perfect9:{name:"Perfect 9",icon:""},global:{name:"Global",icon:""},highstakes:{name:"High Stakes",icon:""},profit:{name:"Profit",icon:""},dedicated:{name:"Dedicated",icon:""}};function ZC({achievementsState:e,weeklyState:t,onClose:n}){const{unlockedIds:r,stats:i}=e,s=U.useMemo(()=>function(e){const t=new Map,n=[];for(const i of e)if(i.chain){const e=t.get(i.chain)||[];e.push(i),t.set(i.chain,e)}else n.push(i);const r=[];for(const[i,s]of t){const e=XC[i]||{name:i,icon:""};r.push({id:i,name:e.name,icon:e.icon,achievements:s.sort((e,t)=>(e.tier||0)-(t.tier||0))})}return n.length>0&&r.push({id:"standalone",name:"Special",icon:"",achievements:n}),r}(vC),[]),a=U.useMemo(()=>function(e,t){const n={common:{total:0,unlocked:0},uncommon:{total:0,unlocked:0},rare:{total:0,unlocked:0},epic:{total:0,unlocked:0},legendary:{total:0,unlocked:0},mythic:{total:0,unlocked:0}};let r=0,i=0;for(const s of e)r++,n[s.rarity].total++,t.has(s.id)&&(i++,n[s.rarity].unlocked++);return{total:r,unlocked:i,byRarity:n}}(vC,r),[r]),o=U.useMemo(()=>CC(),[]),l=U.useMemo(()=>function(e){const t=wC.find(t=>t.id===e.challengeId);if(!t)return null;const n=e.stats[t.statKey],r=t.target;return{current:n,target:r,percentage:Math.min(100,Math.floor(n/r*100))}}(t),[t]);return K.jsxs("div",{className:"achievement-gallery",children:[K.jsxs("div",{className:"achievement-gallery__header",children:[K.jsx("button",{className:"achievement-gallery__close",onClick:n,children:" Back"}),K.jsx("h1",{className:"achievement-gallery__title",children:"Achievements"}),K.jsxs("div",{className:"achievement-gallery__summary",children:[a.unlocked," / ",a.total]})]}),K.jsxs("div",{className:"achievement-gallery__content",children:[K.jsxs("div",{className:"weekly-challenge-card",children:[K.jsxs("div",{className:"weekly-challenge-card__header",children:[K.jsx("span",{className:"weekly-challenge-card__icon",children:o.icon}),K.jsxs("div",{className:"weekly-challenge-card__info",children:[K.jsx("div",{className:"weekly-challenge-card__label",children:"Weekly Challenge"}),K.jsx("div",{className:"weekly-challenge-card__name",children:o.name})]}),t.completed&&K.jsx("span",{className:"weekly-challenge-card__complete",children:""})]}),K.jsx("div",{className:"weekly-challenge-card__description",children:o.description}),l&&K.jsxs("div",{className:"weekly-challenge-card__progress",children:[K.jsx("div",{className:"progress-bar",children:K.jsx("div",{className:"progress-bar__fill",style:{width:`${l.percentage}%`}})}),K.jsxs("div",{className:"progress-bar__text",children:[l.current," / ",l.target]})]})]}),K.jsx("div",{className:"stats-breakdown",children:Object.entries(JC).sort(([,e],[,t])=>e.order-t.order).map(([e,t])=>{const n=a.byRarity[e];return 0===n.total?null:K.jsxs("div",{className:`stats-breakdown__item stats-breakdown__item--${e}`,children:[K.jsx("span",{className:"stats-breakdown__label",children:t.label}),K.jsxs("span",{className:"stats-breakdown__count",children:[n.unlocked,"/",n.total]})]},e)})}),s.map(e=>K.jsxs("div",{className:"achievement-group",children:[K.jsxs("div",{className:"achievement-group__header",children:[K.jsx("span",{className:"achievement-group__icon",children:e.icon}),K.jsx("span",{className:"achievement-group__name",children:e.name})]}),K.jsx("div",{className:"achievement-group__list",children:e.achievements.map(e=>{const t=r.has(e.id),n=t?null:function(e,t){const n=vC.find(t=>t.id===e);if(!n||!n.statKey||void 0===n.target)return null;const r=t[n.statKey];if("number"!=typeof r)return null;const i=n.target;return{current:r,target:i,percentage:Math.min(100,Math.floor(r/i*100))}}(e.id,i);return K.jsx(eS,{achievement:e,isUnlocked:t,progress:n},e.id)})})]},e.id))]})]})}function eS({achievement:e,isUnlocked:t,progress:n}){return K.jsxs("div",{className:`achievement-card achievement-card--${e.rarity} ${t?"achievement-card--unlocked":"achievement-card--locked"}`,children:[K.jsx("div",{className:"achievement-card__icon",children:t?e.icon:""}),K.jsxs("div",{className:"achievement-card__content",children:[K.jsx("div",{className:"achievement-card__name",children:e.name}),K.jsx("div",{className:"achievement-card__description",children:t?e.description:"???"}),!t&&n&&K.jsxs("div",{className:"achievement-card__progress",children:[K.jsx("div",{className:"progress-bar progress-bar--small",children:K.jsx("div",{className:"progress-bar__fill",style:{width:`${n.percentage}%`}})}),K.jsxs("span",{className:"progress-bar__text",children:[n.current,"/",n.target]})]})]}),K.jsx("div",{className:`achievement-card__rarity achievement-card__rarity--${e.rarity}`,children:JC[e.rarity].label})]})}function tS(e){return e.toLocaleString()}function nS({onClose:e,onViewAchievements:t,unlockedAchievementCount:n,totalAchievementCount:r}){const{user:i}=cC(),{userProfile:s,userProgression:a,userStreaks:o,isSavingNickname:l,saveNickname:c}=function(){const[e,t]=U.useState(null),[n,r]=U.useState(null),[i,s]=U.useState(null),[a,o]=U.useState(!0),[l,c]=U.useState(!1),u=U.useRef(null);return U.useEffect(()=>{const e=aC(),n=oC();if(!e||!n)return void o(!1);const i=()=>{u.current&&(u.current(),u.current=null)},a=e=>{if(i(),t(null),r(null),s(null),!e||e.isAnonymous)return void o(!1);o(!0);const a=e.uid,l=ok(n,`users/${a}/profile`),c=ok(n,`users/${a}/progression`),d=ok(n,`users/${a}/streaks`),h=[],f=gk(l,e=>{t(e.val()||null),o(!1)},e=>{console.error("[useProfile] Profile listener error:",e),o(!1)});h.push(f);const p=gk(c,e=>{r(e.val()||null)},e=>{console.error("[useProfile] Progression listener error:",e)});h.push(p);const m=gk(d,e=>{s(e.val()||null)},e=>{console.error("[useProfile] Streaks listener error:",e)});h.push(m),u.current=()=>{h.forEach(e=>e())}},l="function"==typeof e.onAuthStateChanged?e.onAuthStateChanged(a):gm(e,a);return()=>{l(),i()}},[]),{userProfile:e,userProgression:n,userStreaks:i,isLoading:a,isSavingNickname:l,saveNickname:U.useCallback(async e=>{const t=aC(),n=oC();if(!t||!n)return!1;const r=t.currentUser;if(!r||r.isAnonymous)return!1;const i=e.trim();if(i.length<1||i.length>20)return!1;c(!0);try{const e=ok(n,`users/${r.uid}/profile`);return await hk(e,{displayName:i}),!0}catch(s){return console.error("[useProfile] saveNickname error:",s.message),!1}finally{c(!1)}},[])}}(),{coinBalance:u}=MC(),[d,h]=U.useState(!1),[f,p]=U.useState(""),m=(null==a?void 0:a.level)||1,g=(null==a?void 0:a.xp)||0,y=uC(m),_=uC(m+1),v=_>y?(g-y)/(_-y):1,w=(null==a?void 0:a.gamesPlayed)||0,b=(null==a?void 0:a.gamesWon)||0,k=w>0?(b/w*100).toFixed(1):"0.0",C=(null==o?void 0:o.currentWinStreak)||0,S=(null==o?void 0:o.bestWinStreak)||0,I=function(e){return e>=80?"Legend":e>=60?"Master":e>=40?"Expert":e>=25?"Veteran":e>=15?"Skilled":e>=8?"Amateur":e>=3?"Novice":"Rookie"}(m),T=(null==s?void 0:s.displayName)||(null==i?void 0:i.displayName)||"Player",E=r>0?n/r*100:0,x=U.useMemo(()=>{var e;return(null==(e=T[0])?void 0:e.toUpperCase())||"P"},[T]),N=U.useCallback(()=>{p(T),h(!0)},[T]),P=U.useCallback(()=>{h(!1),p("")},[]),R=U.useCallback(async()=>{const e=f.trim();if(e.length<1||e.length>20)return;await c(e)&&(h(!1),p(""))},[f,c]),A=U.useCallback(()=>{const e=(null==s?void 0:s.uniqueId)||"N/A";navigator.clipboard.writeText(e).then(()=>{console.log("Player ID copied to clipboard")}).catch(()=>{console.log("Failed to copy ID")})},[null==s?void 0:s.uniqueId]),O=U.useCallback(e=>{"Enter"===e.key&&R(),"Escape"===e.key&&P()},[R,P]);return K.jsxs("div",{className:"profile-screen",children:[K.jsx("div",{className:"profile-screen__bg"}),K.jsxs("div",{className:"profile-screen__container",children:[K.jsxs("div",{className:"profile-screen__header",children:[K.jsx("h1",{className:"profile-screen__title",children:"Profile"}),K.jsx("button",{className:"btn btn-ghost",onClick:e,children:"Back"})]}),K.jsxs("div",{className:"profile-screen__content",children:[K.jsxs("div",{className:"profile-card",children:[K.jsxs("div",{className:"profile-card__avatar-wrapper",children:[(null==i?void 0:i.photoURL)?K.jsx("img",{src:i.photoURL,alt:"Profile",className:"profile-card__avatar-img",referrerPolicy:"no-referrer"}):K.jsx("div",{className:"profile-card__avatar-initial",children:x}),K.jsx("div",{className:"profile-card__level-badge",children:m})]}),d?K.jsxs("div",{className:"profile-card__nickname-edit",children:[K.jsx("input",{type:"text",value:f,onChange:e=>p(e.target.value.slice(0,20)),placeholder:"Enter nickname...",maxLength:20,autoFocus:!0,className:"profile-card__nickname-input",onKeyDown:O}),K.jsxs("div",{className:"profile-card__nickname-actions",children:[K.jsx("button",{onClick:R,disabled:l,className:"profile-card__save-btn",children:l?"Saving...":"Save"}),K.jsx("button",{onClick:P,className:"profile-card__cancel-btn",children:"Cancel"})]})]}):K.jsxs("div",{className:"profile-card__name-row",children:[K.jsx("h2",{className:"profile-card__name",children:T}),K.jsx("button",{onClick:N,className:"profile-card__edit-btn",title:"Edit display name",children:""})]}),K.jsxs("div",{className:"profile-card__rank",children:[(null==s?void 0:s.flag)||""," ",I]}),K.jsxs("div",{className:"profile-card__id-box",children:[K.jsx("div",{className:"profile-card__id-label",children:"Player ID"}),K.jsxs("div",{className:"profile-card__id-row",children:[K.jsx("span",{className:"profile-card__id-value",children:(null==s?void 0:s.uniqueId)||"N/A"}),K.jsx("button",{onClick:A,className:"profile-card__copy-btn",title:"Copy ID",children:""})]})]}),K.jsxs("div",{className:"profile-card__coins",children:[K.jsx(BC,{size:20}),K.jsx("span",{className:"profile-card__coins-value",children:tS(u)})]})]}),K.jsxs("div",{className:"profile-stats",children:[K.jsxs("div",{className:"stats-card",children:[K.jsxs("div",{className:"stats-card__header",children:[K.jsx("span",{className:"stats-card__label",children:"Level Progress"}),K.jsxs("span",{className:"stats-card__value-accent",children:["Level ",m]})]}),K.jsx("div",{className:"progress-bar progress-bar--large",children:K.jsx("div",{className:"progress-bar__fill progress-bar__fill--accent",style:{width:100*v+"%"}})}),K.jsxs("div",{className:"stats-card__footer",children:[K.jsxs("span",{children:[tS(g)," XP"]}),K.jsxs("span",{children:[tS(_)," XP"]})]})]}),K.jsxs("div",{className:"stats-card",children:[K.jsx("h3",{className:"stats-card__title",children:"Player Stats"}),K.jsxs("div",{className:"stats-grid",children:[K.jsxs("div",{className:"stats-grid__item",children:[K.jsx("div",{className:"stats-grid__label",children:"Games Played"}),K.jsx("div",{className:"stats-grid__value",children:w})]}),K.jsxs("div",{className:"stats-grid__item",children:[K.jsx("div",{className:"stats-grid__label",children:"Games Won"}),K.jsx("div",{className:"stats-grid__value stats-grid__value--success",children:b})]}),K.jsxs("div",{className:"stats-grid__item",children:[K.jsx("div",{className:"stats-grid__label",children:"Win Rate"}),K.jsxs("div",{className:"stats-grid__value stats-grid__value--accent",children:[k,"%"]})]}),K.jsxs("div",{className:"stats-grid__item",children:[K.jsx("div",{className:"stats-grid__label",children:"Total Coins"}),K.jsx("div",{className:"stats-grid__value stats-grid__value--accent",children:tS(u)})]})]})]}),K.jsxs("div",{className:"stats-card",children:[K.jsx("h3",{className:"stats-card__title",children:"Win Streaks"}),K.jsxs("div",{className:"stats-grid stats-grid--half",children:[K.jsxs("div",{className:"stats-grid__item",children:[K.jsx("div",{className:"stats-grid__label",children:"Current Streak"}),K.jsxs("div",{className:"stats-grid__value "+(C>0?"stats-grid__value--success":""),children:[C," ",C>0&&""]})]}),K.jsxs("div",{className:"stats-grid__item",children:[K.jsx("div",{className:"stats-grid__label",children:"Best Streak"}),K.jsxs("div",{className:"stats-grid__value stats-grid__value--accent",children:[S," "]})]})]})]}),K.jsxs("div",{className:"stats-card",children:[K.jsxs("div",{className:"stats-card__header",children:[K.jsx("h3",{className:"stats-card__title",style:{margin:0},children:"Achievements"}),K.jsx("button",{onClick:t,className:"stats-card__link",children:"View All "})]}),K.jsxs("div",{className:"stats-card__header",style:{marginTop:"12px"},children:[K.jsx("span",{className:"stats-card__label",children:"Progress"}),K.jsxs("span",{className:"stats-card__value-accent",children:[n," / ",r]})]}),K.jsx("div",{className:"progress-bar progress-bar--small",children:K.jsx("div",{className:"progress-bar__fill progress-bar__fill--accent",style:{width:`${E}%`}})})]})]})]})]})]})}const rS=[{id:"starter",coins:500,price:"$0.99",popular:!1},{id:"popular",coins:1200,price:"$1.99",popular:!0},{id:"best_value",coins:3500,price:"$4.99",popular:!1},{id:"pro",coins:8e3,price:"$9.99",popular:!1},{id:"champion",coins:2e4,price:"$19.99",popular:!1}];function iS(e){return e.toLocaleString()}function sS({coinBalance:e,onClose:t}){const[n,r]=U.useState(!1),i=U.useCallback(async e=>{const t=lC(),i=aC();if(!t||!i)return void console.error("Firebase not initialized");const s=i.currentUser;if(s&&!s.isAnonymous){if(!n){r(!0);try{const n=Yk(t,"createStripeCheckout"),r=(await n({packageId:e,successUrl:window.location.origin+"?purchase=success",cancelUrl:window.location.origin+"?purchase=cancelled"})).data;r.success&&r.url?window.location.href=r.url:console.error("Failed to start checkout")}catch(a){console.error("Purchase error:",a.message)}finally{r(!1)}}}else console.log("User must be signed in to purchase")},[n]),s=U.useCallback(e=>{e.target===e.currentTarget&&t()},[t]);return K.jsx("div",{className:"coin-shop-overlay",onClick:s,children:K.jsxs("div",{className:"coin-shop",children:[K.jsx("button",{className:"coin-shop__close",onClick:t,children:K.jsx($C,{size:24})}),K.jsxs("div",{className:"coin-shop__header",children:[K.jsx("h2",{className:"coin-shop__title",children:"Coin Shop"}),K.jsxs("div",{className:"coin-shop__balance",children:[K.jsx(BC,{size:20}),K.jsxs("span",{children:["Your Balance: ",iS(e)]})]}),K.jsx("p",{className:"coin-shop__subtitle",children:"Purchase coins to play wagered matches!"})]}),K.jsx("div",{className:"coin-shop__packages",children:rS.map(e=>K.jsxs("button",{className:"coin-package "+(e.popular?"coin-package--popular":""),onClick:()=>i(e.id),disabled:n,children:[e.popular&&K.jsx("span",{className:"coin-package__badge",children:"POPULAR"}),K.jsxs("div",{className:"coin-package__coins",children:[K.jsx(BC,{size:24}),K.jsx("span",{children:iS(e.coins)})]}),K.jsx("span",{className:"coin-package__price",children:e.price})]},e.id))}),K.jsx("p",{className:"coin-shop__footer",children:"Secure payment via Stripe. Coins are non-refundable."})]})})}function aS({enabled:e,onToggle:t}){return K.jsx("button",{className:"sound-toggle",onClick:()=>t(!e),title:e?"Mute sounds":"Unmute sounds","aria-label":e?"Mute sounds":"Unmute sounds",children:e?K.jsx(VC,{size:24}):K.jsx(HC,{size:24})})}function oS({themeId:e}){const t=pd[e];return t?K.jsxs("div",{className:"theme-preview",children:[K.jsx("div",{className:"theme-preview__swatch",style:{backgroundColor:t.colors.segment1}}),K.jsx("div",{className:"theme-preview__swatch",style:{backgroundColor:t.colors.segment2}}),K.jsx("div",{className:"theme-preview__swatch",style:{backgroundColor:t.colors.double}}),K.jsx("div",{className:"theme-preview__swatch",style:{backgroundColor:t.colors.triple}}),K.jsx("div",{className:"theme-preview__swatch",style:{backgroundColor:t.colors.wire}})]}):null}function lS({currentThemeId:e,onSelectTheme:t,onClose:n}){const r=Object.values(pd);return K.jsx("div",{className:"theme-selector-overlay",onClick:n,children:K.jsxs("div",{className:"theme-selector",onClick:e=>e.stopPropagation(),children:[K.jsx("button",{className:"theme-selector__close",onClick:n,children:K.jsx($C,{size:24})}),K.jsx("h2",{className:"theme-selector__title",children:"Dartboard Theme"}),K.jsx("div",{className:"theme-selector__options",children:r.map(n=>{const r=e===n.id,i=n.premiumOnly;return K.jsxs("button",{className:`theme-option ${r?"theme-option--selected":""} ${i?"theme-option--premium":""}`,onClick:()=>t(n.id),children:[K.jsxs("div",{className:"theme-option__info",children:[K.jsxs("span",{className:"theme-option__name",children:[n.name,i&&K.jsx("span",{className:"theme-option__badge",children:"Premium"})]}),K.jsx("span",{className:"theme-option__description",children:n.description})]}),K.jsx(oS,{themeId:n.id}),r&&K.jsx("span",{className:"theme-option__check",children:""})]},n.id)})})]})})}const cS="games",uS="matchmaking_queue/casual";let dS=null,hS=null,fS=null,pS=null,mS=null,gS=null,yS=null,_S=null,vS=!1,wS=!1,bS=null,kS=null;function CS(e){return"string"!=typeof e?"Player":e.slice(0,20).replace(/[<>]/g,"")}function SS(e){return"string"!=typeof e||e.length<1||e.length>8?"":e}function IS(e){const t=parseInt(e,10);return isNaN(t)||t<1||t>100?1:t}function TS(e){return"string"!=typeof e?null:e.startsWith("https://")?e.slice(0,500):null}async function ES(e,t,n){var r,i,s,a;await NS();const o=oC(),l=lC();if(!o)return void(null==(r=n.onError)||r.call(n,"Firebase not configured"));if(!l)return void(null==(i=n.onError)||i.call(n,"Cloud Functions not available"));const c=await rC;if(!c)return void(null==(s=n.onError)||s.call(n,"Authentication required for online play"));bS=c.uid,wS=!1,null==(a=n.onSearching)||a.call(n);const u=ok(o,uS);setTimeout(async()=>{var r;try{const r=kk(u,bk("timestamp"),vk(1)),i=await fk(r);if(i.exists()){const r=i.val(),s=Object.keys(r)[0],a=r[s];if(s!==bS)return void(await async function(e,t,n,r,i,s,a){var o,l,c,u;if(!bS)return void(null==(o=s.onError)||o.call(s,"Not authenticated"));wS=!0;try{const o=Yk(a,"createGame"),u=(await o({player1Id:e,player1Name:CS(t.name),player1Flag:SS(t.flag),player2Id:bS,player2Name:CS(n.displayName)||"Player",player2Flag:SS(n.flag)||"",gameMode:r,isWagered:!1})).data;if(!u.success||!u.gameId)return null==(l=s.onError)||l.call(s,u.error||"Failed to create game"),void(wS=!1);const d=u.gameId,h=lk(i,e);await hk(h,{matchedGameId:d,matchedByName:CS(n.displayName)||"Player",matchedByFlag:SS(n.flag)||""}),kS=1,null==(c=s.onFound)||c.call(s,{roomId:d,playerIndex:1,opponent:{name:CS(t.name),flag:SS(t.flag),level:IS(t.level),avatarUrl:TS(t.avatarUrl)}})}catch(d){console.error("[matchmaking] Error creating game:",d),null==(u=s.onError)||u.call(s,d.message||"Failed to create game"),wS=!1}}(s,a,e,t,u,n,l))}await async function(e,t,n){if(!bS)return;const r=ok(e,uS),i=lk(r,bS);dS=i;const s={playerId:bS,name:CS(t.displayName)||"Player",flag:SS(t.flag)||"",level:t.level||1,avatarUrl:TS(t.avatarUrl)||null,timestamp:Nk()};await dk(i,s),hS=ck(i),await hS.remove(),fS=gk(i,async t=>{var r,i,s,a,o,l;if(wS)return;if(!t.exists())return;const c=t.val();if(c.matchedGameId){wS=!0,await NS();const t=c.matchedGameId,d=c.matchedByName||"Opponent",h=c.matchedByFlag||"",f=ok(e,`${cS}/${t}`);try{const e=(await fk(f)).val();if(!e||(null==(r=e.player1)?void 0:r.id)!==bS)return console.error("[matchmaking] Invalid game data"),wS=!1,void(null==(i=n.onError)||i.call(n,"Invalid game data"));kS=0,null==(o=n.onFound)||o.call(n,{roomId:t,playerIndex:0,opponent:{name:CS(d),flag:SS(h),level:IS(null==(s=e.player2)?void 0:s.level),avatarUrl:TS(null==(a=e.player2)?void 0:a.avatarUrl)}})}catch(u){console.error("[matchmaking] Failed to read game:",u),wS=!1,null==(l=n.onError)||l.call(n,"Failed to join game")}}}),pS=setTimeout(async()=>{var e;wS||(await NS(),null==(e=n.onTimeout)||e.call(n))},6e4)}(o,e,n)}catch(i){console.error("[matchmaking] Error checking queue:",i),null==(r=n.onError)||r.call(n,i.message||"Failed to join queue")}},500)}async function xS(){await NS(),bS=null}async function NS(){wS=!1,pS&&(clearTimeout(pS),pS=null),fS&&(fS(),fS=null),hS&&(await hS.cancel(),hS=null),dS&&(await uk(dS),dS=null)}function PS(e,t,n){var r;const i=oC();if(!i)return void(null==(r=n.onError)||r.call(n,"Firebase not configured"));kS=t,vS=!1;const s=ok(i,`${cS}/${e}`);mS=s;const a=0===t?"player1":"player2",o=0===t?"player2":"player1",l=lk(s,a),c=lk(s,`${a}/connected`);hk(l,{connected:!0,lastHeartbeat:Date.now()}).catch(e=>{var t;null==(t=n.onError)||t.call(n,"Failed to set presence: "+e.message)}),yS=ck(c),yS.set(!1).catch(e=>{console.error("[gameRoom] Failed to register onDisconnect:",e)});let u=!1;_S=setInterval(()=>{u||hk(l,{lastHeartbeat:Date.now()}).catch(e=>{var t;u||(u=!0,null==(t=n.onError)||t.call(n,"Heartbeat failed: "+e.message))})},3e3),gS=gk(s,e=>{var t,r;const i=e.val();if(!(i&&i.player1&&i.player2&&i.gameMode))return;const s=i[o];if(s){if(!0===s.connected&&(vS=!0),vS&&!i.winner){const e=!1===s.connected,r=s.lastHeartbeat&&Date.now()-s.lastHeartbeat>15e3;(e||r)&&(vS=!1,null==(t=n.onOpponentDisconnect)||t.call(n,CS(s.name)))}null==(r=n.onGameUpdate)||r.call(n,i)}},e=>{var t;console.error("[gameRoom] Listener error:",e),null==(t=n.onError)||t.call(n,"Connection to game lost")})}function RS(){if(_S&&(clearInterval(_S),_S=null),yS&&(yS.cancel().catch(()=>{}),yS=null),mS&&null!==kS){dk(lk(mS,`${0===kS?"player1":"player2"}/connected`),!1).catch(()=>{})}gS&&(gS(),gS=null),mS=null,kS=null,vS=!1}async function AS(e){const t=lC();if(!t)return{success:!1,error:"Cloud Functions not available"};try{const n=Yk(t,"createEscrow"),r=(await n(e)).data;return r.success||console.error("[createEscrow] Failed:",r.error),r}catch(n){return console.error("[createEscrow] Error:",n.message),{success:!1,error:n.message||"Failed to create escrow"}}}async function OS(e){const t=lC();if(!t)return{success:!1,error:"Cloud Functions not available"};try{const n=Yk(t,"refundEscrow"),r=(await n(e)).data;return r.success||console.error("[refundEscrow] Failed:",r.error),r}catch(n){return console.error("[refundEscrow] Error:",n.message),{success:!1,error:n.message||"Failed to refund escrow"}}}let DS=null,LS=null,MS=null,jS=null,FS=null,US=null,zS=!1;async function WS(e,t){var n;try{const r=await Rk(e,e=>{if(e&&!e.claimedBy&&!e.matchedGameId)return{...e,claimedBy:t}});return r.committed&&(null==(n=r.snapshot.val())?void 0:n.claimedBy)===t}catch(r){return console.error("[tryClaimOpponent] Transaction failed:",r),!1}}async function $S(e,t,n,r){var i,s,a,o,l,c,u;await VS();const d=oC(),h=lC();if(!d||!h)return void(null==(i=r.onError)||i.call(r,"Firebase not configured"));const f=await rC;if(!f||f.isAnonymous)return void(null==(s=r.onError)||s.call(r,"Please sign in to play wagered matches"));const p=f.uid;bS=p,US=`${Date.now()}-${Math.random().toString(36).slice(2,11)}`,zS=!1,null==(a=r.onSearching)||a.call(r);const m=ok(d,`matchmaking_queue/wagered/${t}`);try{OS({escrowId:"cleanup_pending",reason:"cleanup_before_new_match",idempotencyKey:`${US}-cleanup`});const i=kk(m,bk("timestamp"),vk(5)),s=await fk(i);if(s.exists()){const i=s.val();for(const[s,a]of Object.entries(i)){if(s===p)continue;if(a.claimedBy||a.matchedGameId)continue;if(!a.escrowId)continue;const i=lk(m,s);if(await WS(i,p)){const l=await AS({escrowId:a.escrowId,stakeAmount:t,idempotencyKey:US});if(l.success)return FS=a.escrowId,null==(o=r.onEscrowCreated)||o.call(r,a.escrowId,l.newBalance??0),void(await BS(s,a,e,n,t,m,r,h));await hk(i,{claimedBy:null})}}}const a=await AS({stakeAmount:t,idempotencyKey:US});if(!a.success||!a.escrowId)return void(null==(l=r.onError)||l.call(r,a.error||"Failed to create escrow"));FS=a.escrowId,null==(c=r.onEscrowCreated)||c.call(r,a.escrowId,a.newBalance??0),await async function(e,t,n,r,i,s,a){if(!bS)return;const o=lk(i,bS);DS=o;const l={playerId:bS,name:CS(t.displayName)||"Player",flag:SS(t.flag)||"",level:t.level||1,avatarUrl:TS(t.avatarUrl)||null,timestamp:Nk(),escrowId:r,stakeAmount:n};await dk(o,l),LS=ck(o),await LS.remove(),MS=gk(o,async t=>{var i,s,o,l,c,u,d;if(zS)return;if(!t.exists())return;const h=t.val();if(h.matchedGameId){zS=!0,await VS();const t=h.matchedGameId,p=h.matchedByName||"Opponent",m=h.matchedByFlag||"",g=ok(e,`${cS}/${t}`);try{const e=(await fk(g)).val();if(!e||(null==(i=e.player1)?void 0:i.id)!==bS)return zS=!1,void(null==(s=a.onError)||s.call(a,"Invalid game data"));kS=0,null==(u=a.onFound)||u.call(a,{roomId:t,playerIndex:0,opponent:{name:CS(p),flag:SS(m),level:IS(null==(o=e.player2)?void 0:o.level),avatarUrl:TS(null==(l=e.player2)?void 0:l.avatarUrl)},escrowId:(null==(c=e.wager)?void 0:c.escrowId)||r,stakeAmount:n})}catch(f){zS=!1,null==(d=a.onError)||d.call(a,"Failed to join game")}}}),jS=setTimeout(async()=>{var e;zS||(await qS(),null==(e=a.onTimeout)||e.call(a))},9e4)}(d,e,t,a.escrowId,m,0,r)}catch(g){console.error("[wageredMatchmaking] Error:",g),null==(u=r.onError)||u.call(r,g.message||"Failed to start wagered match"),await VS()}}async function BS(e,t,n,r,i,s,a,o){var l,c,u,d;if(!bS||!FS)return void(null==(l=a.onError)||l.call(a,"Not authenticated"));zS=!0;const h=lk(s,e);try{const s=Yk(o,"createGame"),l=(await s({player1Id:e,player1Name:CS(t.name),player1Flag:SS(t.flag),player2Id:bS,player2Name:CS(n.displayName)||"Player",player2Flag:SS(n.flag)||"",gameMode:r,isWagered:!0,escrowId:FS,stakeAmount:i})).data;if(!l.success||!l.gameId)return FS&&US&&await OS({escrowId:FS,reason:"create_game_failed",idempotencyKey:`${US}-refund-create-game`}),await hk(h,{claimedBy:null}),null==(c=a.onError)||c.call(a,l.error||"Failed to create game"),void(zS=!1);const d=l.gameId;await hk(h,{matchedGameId:d,matchedByName:CS(n.displayName)||"Player",matchedByFlag:SS(n.flag)||""}),kS=1,null==(u=a.onFound)||u.call(a,{roomId:d,playerIndex:1,opponent:{name:CS(t.name),flag:SS(t.flag),level:IS(t.level),avatarUrl:TS(t.avatarUrl)},escrowId:FS,stakeAmount:i})}catch(f){console.error("[wageredMatchmaking] Error creating game:",f),FS&&US&&await OS({escrowId:FS,reason:"create_game_failed",idempotencyKey:`${US}-refund-create-game`}),await hk(h,{claimedBy:null}),null==(d=a.onError)||d.call(a,f.message||"Failed to create game"),zS=!1}}async function qS(){FS&&US&&await OS({escrowId:FS,reason:"user_cancelled",idempotencyKey:`${US}-refund`}),await VS()}async function VS(){zS=!1,jS&&(clearTimeout(jS),jS=null),MS&&(MS(),MS=null),LS&&(await LS.cancel(),LS=null),DS&&(await uk(DS),DS=null),FS=null,US=null}function HS(){const[e,t]=U.useState(!1),[n,r]=U.useState(!1),[i,s]=U.useState(!1),[a,o]=U.useState([]),[l,c]=U.useState(!1),[u,d]=U.useState(null),[h,f]=U.useState(null),[p,m]=U.useState(null),[g,y]=U.useState(!1),[_,v]=U.useState(!1),[w,b]=U.useState(!1),[k,C]=U.useState(!1),[S,I]=U.useState(50),[T,E]=U.useState(!1),[x,N]=U.useState(!1),[P,R]=U.useState(null),A=U.useRef(null),O=DC({isOnline:e,isPractice:n,hasAIOpponent:i,isWagered:T,onUnlock:e=>{o(t=>[...t,...e])}}),D=U.useMemo(()=>({onMatchStart:O.startMatch,onLegStart:O.startLeg,onThrow:O.emitThrow,onTurnComplete:O.emitTurnComplete,onCheckout:O.emitCheckout,onLegComplete:O.emitLegComplete,onGameComplete:O.emitGameComplete}),[O.startMatch,O.startLeg,O.emitThrow,O.emitTurnComplete,O.emitCheckout,O.emitLegComplete,O.emitGameComplete]),L=U.useCallback(()=>{o([])},[]),{gameState:M,setGameState:j,players:F,setPlayers:z,currentPlayerIndex:W,setCurrentPlayerIndex:$,dartsThrown:B,setDartsThrown:q,currentTurnScore:V,setCurrentTurnScore:H,dartPositions:G,setDartPositions:Q,aimPosition:Y,setAimPosition:J,power:X,setPower:Z,isPowerCharging:ee,setIsPowerCharging:te,gameStats:ne,winner:re,setWinner:ie,checkout:se,legScores:ae,setScores:oe,playerSetup:le,setPlayerSetup:ce,startGame:ue,throwDart:de,endTurn:he,resetGame:fe}=fC(D),{playSound:pe,soundEnabled:me,setSoundEnabled:ge}=function(){const[e,t]=U.useState(!0),n=U.useRef(null),r=U.useCallback(()=>{if(!n.current)try{n.current=new(window.AudioContext||window.webkitAudioContext)}catch(e){return console.warn("Web Audio API not supported:",e),null}return"suspended"===n.current.state&&n.current.resume(),n.current},[]),i=U.useCallback((t,n=.1,i=.3)=>{if(!e)return;const s=r();if(s)try{const e=s.createOscillator(),r=s.createGain();e.connect(r),r.connect(s.destination),e.frequency.setValueAtTime(t,s.currentTime),r.gain.setValueAtTime(i,s.currentTime),r.gain.exponentialRampToValueAtTime(.01,s.currentTime+n),e.start(s.currentTime),e.stop(s.currentTime+n)}catch(a){console.warn("Error playing tone:",a)}},[e,r]),s=U.useCallback(t=>{if(!e)return;const n=pC[t];if(!n)return;const i=r();if(i)try{const e=i.createOscillator(),r=i.createGain();if(e.type=n.type,e.connect(r),r.connect(i.destination),e.frequency.setValueAtTime(n.frequency,i.currentTime),r.gain.setValueAtTime(n.gain,i.currentTime),r.gain.exponentialRampToValueAtTime(.01,i.currentTime+n.duration),"180"===t||"checkout"===t){const e=i.createOscillator(),t=i.createGain();e.type="sine",e.connect(t),t.connect(i.destination),e.frequency.setValueAtTime(1.5*n.frequency,i.currentTime),t.gain.setValueAtTime(.5*n.gain,i.currentTime),t.gain.exponentialRampToValueAtTime(.01,i.currentTime+n.duration),e.start(i.currentTime),e.stop(i.currentTime+n.duration)}e.start(i.currentTime),e.stop(i.currentTime+n.duration)}catch(s){console.warn("Error playing sound:",s)}},[e,r]);return{soundEnabled:e,setSoundEnabled:t,playSound:s,playTone:i}}(),{theme:ye,themeId:_e,selectTheme:ve}=yC(),{coinBalance:we,dailyBonusAvailable:be,isLoading:ke,isClaimingBonus:Ce,claimDailyBonus:Se}=MC(),{user:Ie,isLoading:Te,isAnonymous:Ee,signInWithGoogle:xe,signInWithFacebook:Ne,signInWithApple:Pe,signOut:Re}=cC();U.useEffect(()=>()=>{xS(),qS(),RS()},[]);const Ae=U.useCallback(()=>{xS(),qS(),RS(),f(null),m(null),E(!1),v(!1),c(!1),N(!1),d(null),R(null),A.current=null,t(!1),r(!1),s(!1),fe()},[fe]);U.useEffect(()=>{if(!p||!h)return;const{player1:e,player2:t,currentPlayer:n,dartsThrown:r,currentTurnScore:i,dartPositions:s,status:a,winner:o}=p;if(e&&t){if("playing"!==M&&"gameOver"!==M&&j("playing"),z([{id:e.id??"player1",name:e.name??"Player 1",flag:e.flag??"",score:"number"==typeof e.score?e.score:0,isAI:!1},{id:t.id??"player2",name:t.name??"Player 2",flag:t.flag??"",score:"number"==typeof t.score?t.score:0,isAI:!1}]),$(n??0),q(r??0),H(i??0),s){const e=Object.entries(s);e.sort((e,t)=>parseInt(e[0])-parseInt(t[0]));const t=e.map(([e,t])=>{const n=t;return{id:`dart_${e}`,x:n.x,y:n.y,score:0,multiplier:1,segment:""}});Q(t)}else Q([]);if("finished"===a&&void 0!==o){const n=0===o?e:t;ie({id:`player_${o}`,name:n.name,score:0,isAI:!1,flag:n.flag}),T&&h&&A.current!==h.roomId&&(A.current=h.roomId,async function(e){const t=lC();if(!t)return{success:!1,error:"Cloud Functions not available"};try{const n=Yk(t,"settleGame"),r=(await n(e)).data;return r.success||console.error("[settleGame] Failed:",r.error),r}catch(n){return console.error("[settleGame] Error:",n.message),{success:!1,error:n.message||"Failed to settle game"}}}({gameId:h.roomId}).then(e=>{e.success&&e.winnerPayout&&R(e.winnerPayout)}).catch(e=>{console.error("[settleGame] Error:",e)})),"gameOver"!==M&&j("gameOver")}}},[p,h,M,j,z,$,q,H,Q,ie]);const Oe=U.useCallback(async()=>{if(l)return await xS(),await qS(),RS(),c(!1),N(!1),d(null),f(null),m(null),void E(!1);await qS(),c(!0),d(null),E(!1),t(!0);ES({displayName:(null==Ie?void 0:Ie.displayName)??"Player",flag:"",level:1},le.gameMode,{onFound:e=>{c(!1),f(e),PS(e.roomId,e.playerIndex,{onGameUpdate:e=>{m(e)},onOpponentDisconnect:e=>{RS(),f(null),m(null),d(`${e} disconnected`)},onError:e=>{d(e)}})},onError:e=>{c(!1),d(e)},onTimeout:()=>{c(!1),d("No opponent found")}})},[l,le.gameMode,null==Ie?void 0:Ie.displayName]),De=U.useCallback(async()=>{if(l||x)return await xS(),await qS(),RS(),c(!1),N(!1),d(null),f(null),m(null),void E(!1);v(!0)},[l,x]),Le=U.useCallback(async()=>{if(we<S)return void d("Insufficient balance");v(!1),N(!0),d(null),E(!0),t(!0),await xS();$S({displayName:(null==Ie?void 0:Ie.displayName)??"Player",flag:"",level:1},S,le.gameMode,{onEscrowCreated:()=>{N(!1),c(!0)},onFound:e=>{c(!1),N(!1),f(e),PS(e.roomId,e.playerIndex,{onGameUpdate:e=>{m(e)},onOpponentDisconnect:e=>{const t=null==h?void 0:h.roomId;RS(),f(null),m(null),T&&t?async function(e){const t=lC();if(!t)return{success:!1,error:"Cloud Functions not available"};try{const n=Yk(t,"forfeitGame"),r=(await n(e)).data;return r.success||console.error("[forfeitGame] Failed:",r.error),r}catch(n){return console.error("[forfeitGame] Error:",n.message),{success:!1,error:n.message||"Failed to forfeit game"}}}({gameId:t,reason:"disconnect",claimWin:!0}).then(t=>{t.success&&void 0!==t.winnerPayout?(R(t.winnerPayout),d(`${e} disconnected. You won ${t.winnerPayout} coins!`),j("gameOver")):d(`${e} disconnected`)}).catch(t=>{console.error("[forfeitGame] Error:",t),d(`${e} disconnected`)}):d(`${e} disconnected`)},onError:e=>{d(e)}})},onError:e=>{c(!1),N(!1),E(!1),d(e)},onTimeout:()=>{c(!1),N(!1),E(!1),d("No opponent found")}})},[we,S,le.gameMode,null==Ie?void 0:Ie.displayName]),Me=U.useCallback(()=>{v(!1)},[]),je=U.useCallback(async()=>{v(!1),await Oe()},[Oe]),Fe=U.useRef(null),Ue=U.useRef(1),ze=U.useCallback(async(e,t)=>{var n,r;if("playing"!==M||B>=3)return;if(g)return;if(h){if(!p)return void console.warn("[handleBoardClick] No game snapshot yet");if(W!==h.playerIndex)return void console.log("[handleBoardClick] Not our turn");try{y(!0);const i=await async function(e){const t=lC();if(!t)return console.error("[submitThrow] Cloud Functions not available"),null;const n=Yk(t,"submitThrow");let r=null;for(let s=0;s<3;s++)try{console.log(`[submitThrow] Attempt ${s+1}:`,e.dartPosition);const t=(await n(e)).data;return t.success?(console.log("[submitThrow] Accepted:",t.label,t.score,"pts"),t):(console.error("[submitThrow] Rejected by server:",t.error),null)}catch(i){if(r=i,console.error(`[submitThrow] Attempt ${s+1} failed:`,i.message),"functions/failed-precondition"===i.code||"functions/permission-denied"===i.code)return null;s<2&&await new Promise(e=>setTimeout(e,200*(s+1)))}return console.error("[submitThrow] All retries failed:",r),null}({gameId:h.roomId,dartPosition:{x:e,y:t}});i?0===i.score?pe("miss"):(null==(n=i.label)?void 0:n.startsWith("T"))?pe("triple"):(null==(r=i.label)?void 0:r.startsWith("D"))?pe("double"):"BULL"===i.label?pe("bull"):pe("hit"):console.warn("[handleBoardClick] submitThrow failed")}finally{y(!1)}return}const i=de(e,t);i.isBust?pe("bust"):0===i.score?pe("miss"):3===i.multiplier?pe("triple"):2===i.multiplier?pe("double"):"BULL"===i.segment?pe("bull"):pe("hit"),V+i.score===180&&pe("180"),B+1>=3&&setTimeout(()=>he(),1e3)},[M,B,de,pe,V,he,h,g,p,W]),We=U.useCallback((e,t)=>{"playing"===M&&J({x:e,y:t})},[M,J]),$e=U.useCallback(()=>{"playing"!==M||B>=3||(te(!0),Z(0),Ue.current=1,Fe.current=setInterval(()=>{Z(e=>{const t=e+2*Ue.current;return t>=100?(Ue.current=-1,100):t<=0?(Ue.current=1,0):t})},20))},[M,B,te,Z]),Be=U.useCallback(()=>{ee&&(Fe.current&&(clearInterval(Fe.current),Fe.current=null),te(!1),pe("throw"),ze(Y.x,Y.y))},[ee,te,ze,Y,pe]);return U.useEffect(()=>()=>{Fe.current&&clearInterval(Fe.current)},[]),U.useEffect(()=>{re&&pe("checkout")},[re,pe]),"landing"===M?K.jsxs("div",{className:"app",children:[K.jsxs("div",{className:"landing",children:[K.jsxs("header",{className:"landing__header",children:[K.jsx("div",{className:"landing__wallet",children:K.jsx(jC,{coinBalance:we,dailyBonusAvailable:be,isLoading:ke,isClaimingBonus:Ce,onClaimBonus:Se,onOpenShop:()=>b(!0)})}),K.jsx(aS,{enabled:me,onToggle:ge}),K.jsx("button",{className:"landing__theme-btn",onClick:()=>C(!0),title:"Change Theme",children:K.jsx(zC,{size:24})}),K.jsx("button",{className:"landing__profile-btn",onClick:()=>j("profile"),title:"Profile",children:K.jsx(qC,{size:24})}),K.jsx("h1",{className:"landing__title",children:"Quik Darts"}),K.jsx("p",{className:"landing__subtitle",children:"Championship Edition"})]}),Ie&&K.jsxs("div",{className:"landing__user-info",children:[K.jsx("img",{src:Ie.photoURL||"/assets/default-avatar.png",alt:"Avatar",className:"landing__avatar"}),K.jsxs("div",{className:"landing__user-details",children:[K.jsxs("span",{className:"landing__user-name",children:[Ie.displayName||"Player",Ee&&K.jsx("span",{className:"landing__guest-badge",children:"Guest"})]}),K.jsxs("span",{className:"landing__player-id",children:["ID: ",Ie.uid.slice(0,8)]})]}),!Ee&&K.jsx("button",{className:"btn btn-ghost landing__signout",onClick:Re,children:"Sign Out"})]}),(!Ie||Ee)&&K.jsxs("div",{className:"landing__auth",children:[K.jsx("p",{className:"landing__auth-prompt",children:Ee?"Sign in to save progress":"Sign in to play online & save progress"}),K.jsxs("div",{className:"landing__auth-buttons",children:[K.jsxs("button",{className:"btn landing__auth-btn landing__auth-btn--google",onClick:xe,disabled:Te,children:[K.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[K.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),K.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),K.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),K.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),K.jsxs("button",{className:"btn landing__auth-btn landing__auth-btn--facebook",onClick:Ne,disabled:Te,children:[K.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"#1877F2",children:K.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),K.jsxs("button",{className:"btn landing__auth-btn landing__auth-btn--apple",onClick:Pe,disabled:Te,children:[K.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",children:K.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Apple"]})]})]}),K.jsxs("div",{className:"landing__menu",children:[K.jsxs("button",{className:"btn btn-primary landing__btn",onClick:()=>j("setup"),children:[K.jsx(FC,{size:24}),"Start Game"]}),K.jsxs("button",{className:"btn btn-secondary landing__btn",onClick:()=>{ce(e=>({...e,count:1,aiPlayers:[!1],aiDifficulty:[null]})),r(!0),t(!1),j("practice")},children:[K.jsx(zC,{size:24}),"Practice Mode"]}),K.jsxs("button",{className:"btn btn-ghost landing__btn",onClick:Oe,children:[K.jsx(UC,{size:24}),l&&!T?"Searching... (tap to cancel)":u||"Play Online"]}),K.jsxs("button",{className:"btn btn-ghost landing__btn",onClick:De,disabled:ke,children:[K.jsx(BC,{size:24}),x?"Creating match...":l&&T?"Searching... (tap to cancel)":"Play for Stakes"]}),K.jsxs("button",{className:"btn btn-ghost landing__btn",onClick:()=>j("achievements"),children:[K.jsx(WC,{size:24}),"Achievements"]})]}),K.jsx("footer",{className:"landing__footer",children:K.jsx("p",{children:"Quik Darts v2.0 - Built with React + TypeScript"})})]}),_&&K.jsx(QC,{coinBalance:we,selectedStake:S,onSelectStake:I,onConfirm:Le,onPlayFree:je,onClose:Me,isLoading:x}),w&&K.jsx(sS,{coinBalance:we,onClose:()=>b(!1)}),k&&K.jsx(lS,{currentThemeId:_e,onSelectTheme:e=>{ve(e),C(!1)},onClose:()=>C(!1)}),K.jsx(YC,{unlockedIds:a,onDismissed:L})]}):"setup"===M?K.jsxs("div",{className:"app",children:[K.jsxs("div",{className:"setup",children:[K.jsx("h2",{className:"setup__title",children:"Game Setup"}),K.jsxs("div",{className:"setup__options",children:[K.jsxs("div",{className:"setup__option",children:[K.jsx("label",{className:"setup__label",children:"Players"}),K.jsx("div",{className:"setup__buttons",children:[1,2].map(e=>K.jsx("button",{className:"setup__btn "+(le.count===e?"setup__btn--active":""),onClick:()=>ce(t=>({...t,count:e})),children:e},e))})]}),K.jsxs("div",{className:"setup__option",children:[K.jsx("label",{className:"setup__label",children:"Game Mode"}),K.jsx("div",{className:"setup__buttons",children:[301,501].map(e=>K.jsx("button",{className:"setup__btn "+(le.gameMode===e?"setup__btn--active":""),onClick:()=>ce(t=>({...t,gameMode:e})),children:e},e))})]}),2===le.count&&K.jsxs("div",{className:"setup__option",children:[K.jsx("label",{className:"setup__label",children:"Player 2"}),K.jsxs("div",{className:"setup__buttons",children:[K.jsx("button",{className:"setup__btn "+(le.aiPlayers[1]?"":"setup__btn--active"),onClick:()=>ce(e=>({...e,aiPlayers:[!1,!1],aiDifficulty:[null,null]})),children:"Human"}),K.jsx("button",{className:"setup__btn "+(le.aiPlayers[1]?"setup__btn--active":""),onClick:()=>ce(e=>({...e,aiPlayers:[!1,!0],aiDifficulty:[null,"medium"]})),children:"AI"})]})]})]}),K.jsxs("div",{className:"setup__actions",children:[K.jsx("button",{className:"btn btn-ghost",onClick:()=>j("landing"),children:"Back"}),K.jsx("button",{className:"btn btn-primary",onClick:()=>{const e=le.aiPlayers.some(Boolean);s(e),r(!1),t(!1),ue()},children:"Start Game"})]})]}),K.jsx(YC,{unlockedIds:a,onDismissed:L})]}):"achievements"===M?K.jsxs("div",{className:"app",children:[K.jsx(ZC,{achievementsState:O.getState(),weeklyState:O.getWeeklyState(),onClose:()=>j("landing")}),K.jsx(YC,{unlockedIds:a,onDismissed:L})]}):"profile"===M?K.jsxs("div",{className:"app",children:[K.jsx(nS,{onClose:()=>j("landing"),onViewAchievements:()=>j("achievements"),unlockedAchievementCount:O.getState().unlockedIds.size,totalAchievementCount:vC.length}),K.jsx(YC,{unlockedIds:a,onDismissed:L})]}):"playing"===M||"practice"===M?K.jsxs("div",{className:"app",children:[K.jsxs("div",{className:"game",children:[K.jsxs("div",{className:"game__sidebar game__sidebar--left",children:[K.jsx(gd,{players:F,currentPlayerIndex:W,dartsThrown:B,currentTurnScore:V,checkout:se,legScores:ae,setScores:oe,gameStats:ne,showStats:!0}),K.jsx("button",{className:"btn btn-ghost game__quit",onClick:Ae,children:"Quit Game"})]}),K.jsxs("div",{className:"game__board",children:[K.jsx(md,{theme:ye,dartPositions:G,aimPosition:Y,showAimCursor:!ee,onBoardMove:We,disabled:B>=3||!!re}),K.jsx("div",{className:"game__controls",children:K.jsx("button",{className:"btn btn-primary game__throw-btn",onMouseDown:$e,onMouseUp:Be,onTouchStart:$e,onTouchEnd:Be,disabled:B>=3||!!re,children:ee?"Release to Throw!":"Hold to Throw"})})]}),K.jsx("div",{className:"game__sidebar game__sidebar--right",children:K.jsx(yd,{power:X,isCharging:ee,orientation:"vertical"})})]}),K.jsx(YC,{unlockedIds:a,onDismissed:L})]}):"gameOver"===M&&re?K.jsxs("div",{className:"app",children:[K.jsxs("div",{className:"game-over",children:[K.jsx("h2",{className:"game-over__title",children:"Game Over!"}),K.jsxs("p",{className:"game-over__winner",children:[K.jsx("span",{className:"game-over__flag",children:re.flag}),re.name," Wins!"]}),null!==P&&K.jsxs("p",{className:"game-over__prize",children:[K.jsx(BC,{size:20}),K.jsxs("span",{children:["Won ",P," coins!"]})]}),K.jsxs("div",{className:"game-over__actions",children:[K.jsx("button",{className:"btn btn-primary",onClick:ue,children:"Play Again"}),K.jsx("button",{className:"btn btn-ghost",onClick:Ae,children:"Main Menu"})]})]}),K.jsx(YC,{unlockedIds:a,onDismissed:L})]}):K.jsxs("div",{className:"app",children:[K.jsx("div",{className:"loading",children:"Loading..."}),K.jsx(YC,{unlockedIds:a,onDismissed:L})]})}Q.createRoot(document.getElementById("root")).render(K.jsx(z.StrictMode,{children:K.jsx(HS,{})}));
