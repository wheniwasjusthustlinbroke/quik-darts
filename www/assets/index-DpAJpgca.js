function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t={exports:{}},n={},r={exports:{}},i={},s=Symbol.for("react.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,v={};function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||y}function w(){}function k(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||y}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=b.prototype;var T=k.prototype=new w;T.constructor=k,_(T,b.prototype),T.isPureReactComponent=!0;var C=Array.isArray,S=Object.prototype.hasOwnProperty,I={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,r)&&!E.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:s,type:e,key:o,ref:a,props:i,_owner:I.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===s}var P=/\/+/g;function R(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function D(e,t,n,r,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case s:case o:l=!0}}if(l)return i=i(l=e),e=""===r?"."+R(l,0):r,C(i)?(n="",null!=e&&(n=e.replace(P,"$&/")+"/"),D(i,t,n,"",function(e){return e})):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(P,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=""===r?".":r+":",C(e))for(var c=0;c<e.length;c++){var u=r+R(a=e[c],c);l+=D(a,t,n,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=g&&e[g]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=D(a=a.value,t,n,u=r+R(a,c++),i);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function L(e,t,n){if(null==e)return e;var r=[],i=0;return D(e,r,"","",function(e){return t.call(n,e,i++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},M={transition:null},j={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:M,ReactCurrentOwner:I};function F(){throw Error("act(...) is not supported in production builds of React.")}i.Children={map:L,forEach:function(e,t,n){L(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return L(e,function(){t++}),t},toArray:function(e){return L(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},i.Component=b,i.Fragment=a,i.Profiler=c,i.PureComponent=k,i.StrictMode=l,i.Suspense=f,i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,i.act=F,i.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=_({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:s,type:e.type,key:i,ref:o,props:r,_owner:a}},i.createContext=function(e){return(e={$$typeof:d,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},i.createElement=x,i.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},i.createRef=function(){return{current:null}},i.forwardRef=function(e){return{$$typeof:h,render:e}},i.isValidElement=N,i.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:A}},i.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},i.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},i.unstable_act=F,i.useCallback=function(e,t){return O.current.useCallback(e,t)},i.useContext=function(e){return O.current.useContext(e)},i.useDebugValue=function(){},i.useDeferredValue=function(e){return O.current.useDeferredValue(e)},i.useEffect=function(e,t){return O.current.useEffect(e,t)},i.useId=function(){return O.current.useId()},i.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},i.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},i.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},i.useMemo=function(e,t){return O.current.useMemo(e,t)},i.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},i.useRef=function(e){return O.current.useRef(e)},i.useState=function(e){return O.current.useState(e)},i.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},i.useTransition=function(){return O.current.useTransition()},i.version="18.3.1",r.exports=i;var U=r.exports;const z=e(U);
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B=U,$=Symbol.for("react.element"),W=Symbol.for("react.fragment"),q=Object.prototype.hasOwnProperty,V=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H={key:!0,ref:!0,__self:!0,__source:!0};function G(e,t,n){var r,i={},s=null,o=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(o=t.ref),t)q.call(t,r)&&!H.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:$,type:e,key:s,ref:o,props:i,_owner:V.current}}n.Fragment=W,n.jsx=G,n.jsxs=G,t.exports=n;var K=t.exports,Q={},Y={exports:{}},J={},X={exports:{}},Z={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,_="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function b(e){if(m=!1,v(e),!p)if(null!==n(l))p=!0,D(w);else{var t=n(c);null!==t&&L(b,t.startTime-e)}}function w(t,i){p=!1,m&&(m=!1,y(S),S=-1),f=!0;var s=h;try{for(v(i),d=n(l);null!==d&&(!(d.expirationTime>i)||t&&!x());){var o=d.callback;if("function"==typeof o){d.callback=null,h=d.priorityLevel;var a=o(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof a?d.callback=a:d===n(l)&&r(l),v(i)}else r(l);d=n(l)}if(null!==d)var u=!0;else{var g=n(c);null!==g&&L(b,g.startTime-i),u=!1}return u}finally{d=null,h=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,T=!1,C=null,S=-1,I=5,E=-1;function x(){return!(e.unstable_now()-E<I)}function N(){if(null!==C){var t=e.unstable_now();E=t;var n=!0;try{n=C(!0,t)}finally{n?k():(T=!1,C=null)}}else T=!1}if("function"==typeof _)k=function(){_(N)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,k=function(){R.postMessage(null)}}else k=function(){g(N,0)};function D(e){C=e,T||(T=!0,k())}function L(t,n){S=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,D(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,s){var o=e.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?o+s:o:s=o,r){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return r={id:u++,callback:i,priorityLevel:r,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(r.sortIndex=s,t(c,r),null===n(l)&&r===n(c)&&(m?(y(S),S=-1):m=!0,L(b,s-o))):(r.sortIndex=a,t(l,r),p||f||(p=!0,D(w))),r},e.unstable_shouldYield=x,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(Z),X.exports=Z;var ee=X.exports,te=U,ne=ee;
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ie=new Set,se={};function oe(e,t){ae(e,t),ae(e+"Capture",t)}function ae(e,t){for(se[e]=t,e=0;e<t.length;e++)ie.add(t[e])}var le=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ce=Object.prototype.hasOwnProperty,ue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,de={},he={};function fe(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pe[e]=new fe(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pe[t]=new fe(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){pe[e]=new fe(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pe[e]=new fe(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pe[e]=new fe(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){pe[e]=new fe(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){pe[e]=new fe(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){pe[e]=new fe(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){pe[e]=new fe(e,5,!1,e.toLowerCase(),null,!1,!1)});var me=/[\-:]([a-z])/g;function ge(e){return e[1].toUpperCase()}function ye(e,t,n,r){var i=pe.hasOwnProperty(t)?pe[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ce.call(he,e)||!ce.call(de,e)&&(ue.test(e)?he[e]=!0:(de[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(me,ge);pe[t]=new fe(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(me,ge);pe[t]=new fe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(me,ge);pe[t]=new fe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){pe[e]=new fe(e,1,!1,e.toLowerCase(),null,!1,!1)}),pe.xlinkHref=new fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){pe[e]=new fe(e,1,!1,e.toLowerCase(),null,!0,!0)});var _e=te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ve=Symbol.for("react.element"),be=Symbol.for("react.portal"),we=Symbol.for("react.fragment"),ke=Symbol.for("react.strict_mode"),Te=Symbol.for("react.profiler"),Ce=Symbol.for("react.provider"),Se=Symbol.for("react.context"),Ie=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),De=Symbol.iterator;function Le(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=De&&e[De]||e["@@iterator"])?e:null}var Ae,Oe=Object.assign;function Me(e){if(void 0===Ae)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ae=t&&t[1]||""}return"\n"+Ae+e}var je=!1;function Fe(e,t){if(!e||je)return"";je=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"==typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{je=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Me(e):""}function Ue(e){switch(e.tag){case 5:return Me(e.type);case 16:return Me("Lazy");case 13:return Me("Suspense");case 19:return Me("SuspenseList");case 0:case 2:case 15:return e=Fe(e.type,!1);case 11:return e=Fe(e.type.render,!1);case 1:return e=Fe(e.type,!0);default:return""}}function ze(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case we:return"Fragment";case be:return"Portal";case Te:return"Profiler";case ke:return"StrictMode";case Ee:return"Suspense";case xe:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Se:return(e.displayName||"Context")+".Consumer";case Ce:return(e._context.displayName||"Context")+".Provider";case Ie:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Ne:return null!==(t=e.displayName||null)?t:ze(e.type)||"Memo";case Pe:t=e._payload,e=e._init;try{return ze(e(t))}catch(n){}}return null}function Be(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(t);case 8:return t===ke?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function $e(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function We(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function qe(e){e._valueTracker||(e._valueTracker=function(e){var t=We(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=We(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function He(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ge(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ke(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$e(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Qe(e,t){null!=(t=t.checked)&&ye(e,"checked",t,!1)}function Ye(e,t){Qe(e,t);var n=$e(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Xe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xe(e,t.type,$e(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Je(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Xe(e,t,n){"number"===t&&He(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ze=Array.isArray;function et(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$e(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function tt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(re(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nt(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(re(92));if(Ze(n)){if(1<n.length)throw Error(re(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$e(n)}}function rt(e,t){var n=$e(t.value),r=$e(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function it(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function st(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ot(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?st(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var at,lt,ct=(lt=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((at=at||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=at.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return lt(e,t)})}:lt);function ut(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ht=["Webkit","ms","Moz","O"];function ft(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||dt.hasOwnProperty(e)&&dt[e]?(""+t).trim():t+"px"}function pt(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ft(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(dt).forEach(function(e){ht.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dt[t]=dt[e]})});var mt=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gt(e,t){if(t){if(mt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(re(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(re(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(re(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(re(62))}}function yt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _t=null;function vt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var bt=null,wt=null,kt=null;function Tt(e){if(e=ys(e)){if("function"!=typeof bt)throw Error(re(280));var t=e.stateNode;t&&(t=vs(t),bt(e.stateNode,e.type,t))}}function Ct(e){wt?kt?kt.push(e):kt=[e]:wt=e}function St(){if(wt){var e=wt,t=kt;if(kt=wt=null,Tt(e),t)for(e=0;e<t.length;e++)Tt(t[e])}}function It(e,t){return e(t)}function Et(){}var xt=!1;function Nt(e,t,n){if(xt)return e(t,n);xt=!0;try{return It(e,t,n)}finally{xt=!1,(null!==wt||null!==kt)&&(Et(),St())}}function Pt(e,t){var n=e.stateNode;if(null===n)return null;var r=vs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(re(231,t,typeof n));return n}var Rt=!1;if(le)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Rt=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch(lt){Rt=!1}function Lt(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var At=!1,Ot=null,Mt=!1,jt=null,Ft={onError:function(e){At=!0,Ot=e}};function Ut(e,t,n,r,i,s,o,a,l){At=!1,Ot=null,Lt.apply(Ft,arguments)}function zt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Bt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $t(e){if(zt(e)!==e)throw Error(re(188))}function Wt(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=zt(e)))throw Error(re(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return $t(i),e;if(s===r)return $t(i),t;s=s.sibling}throw Error(re(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(3!==n.tag)throw Error(re(188));return n.stateNode.current===n?e:t}(e))?qt(e):null}function qt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qt(e);if(null!==t)return t;e=e.sibling}return null}var Vt=ne.unstable_scheduleCallback,Ht=ne.unstable_cancelCallback,Gt=ne.unstable_shouldYield,Kt=ne.unstable_requestPaint,Qt=ne.unstable_now,Yt=ne.unstable_getCurrentPriorityLevel,Jt=ne.unstable_ImmediatePriority,Xt=ne.unstable_UserBlockingPriority,Zt=ne.unstable_NormalPriority,en=ne.unstable_LowPriority,tn=ne.unstable_IdlePriority,nn=null,rn=null;var sn=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(on(e)/an|0)|0},on=Math.log,an=Math.LN2;var ln=64,cn=4194304;function un(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=un(a):0!==(s&=o)&&(r=un(s))}else 0!==(o=n&~i)?r=un(o):0!==s&&(r=un(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-sn(t)),r|=e[n],t&=~i;return r}function hn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function fn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pn(){var e=ln;return!(4194240&(ln<<=1))&&(ln=64),e}function mn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-sn(t)]=n}function yn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-sn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _n=0;function vn(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var bn,wn,kn,Tn,Cn,Sn=!1,In=[],En=null,xn=null,Nn=null,Pn=new Map,Rn=new Map,Dn=[],Ln="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function An(e,t){switch(e){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":Pn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(t.pointerId)}}function On(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=ys(t))&&wn(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mn(e){var t=gs(e.target);if(null!==t){var n=zt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Bt(n)))return e.blockedOn=t,void Cn(e.priority,function(){kn(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ys(n))&&wn(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_t=r,n.target.dispatchEvent(r),_t=null,t.shift()}return!0}function Fn(e,t,n){jn(e)&&n.delete(t)}function Un(){Sn=!1,null!==En&&jn(En)&&(En=null),null!==xn&&jn(xn)&&(xn=null),null!==Nn&&jn(Nn)&&(Nn=null),Pn.forEach(Fn),Rn.forEach(Fn)}function zn(e,t){e.blockedOn===t&&(e.blockedOn=null,Sn||(Sn=!0,ne.unstable_scheduleCallback(ne.unstable_NormalPriority,Un)))}function Bn(e){function t(t){return zn(t,e)}if(0<In.length){zn(In[0],e);for(var n=1;n<In.length;n++){var r=In[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==En&&zn(En,e),null!==xn&&zn(xn,e),null!==Nn&&zn(Nn,e),Pn.forEach(t),Rn.forEach(t),n=0;n<Dn.length;n++)(r=Dn[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dn.length&&null===(n=Dn[0]).blockedOn;)Mn(n),null===n.blockedOn&&Dn.shift()}var $n=_e.ReactCurrentBatchConfig,Wn=!0;function qn(e,t,n,r){var i=_n,s=$n.transition;$n.transition=null;try{_n=1,Hn(e,t,n,r)}finally{_n=i,$n.transition=s}}function Vn(e,t,n,r){var i=_n,s=$n.transition;$n.transition=null;try{_n=4,Hn(e,t,n,r)}finally{_n=i,$n.transition=s}}function Hn(e,t,n,r){if(Wn){var i=Kn(e,t,n,r);if(null===i)$i(e,t,r,Gn,n),An(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return En=On(En,e,t,n,r,i),!0;case"dragenter":return xn=On(xn,e,t,n,r,i),!0;case"mouseover":return Nn=On(Nn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pn.set(s,On(Pn.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rn.set(s,On(Rn.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(An(e,r),4&t&&-1<Ln.indexOf(e)){for(;null!==i;){var s=ys(i);if(null!==s&&bn(s),null===(s=Kn(e,t,n,r))&&$i(e,t,r,Gn,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else $i(e,t,r,null,n)}}var Gn=null;function Kn(e,t,n,r){if(Gn=null,null!==(e=gs(e=vt(r))))if(null===(t=zt(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Bt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gn=e,null}function Qn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yt()){case Jt:return 1;case Xt:return 4;case Zt:case en:return 16;case tn:return 536870912;default:return 16}default:return 16}}var Yn=null,Jn=null,Xn=null;function Zn(){if(Xn)return Xn;var e,t,n=Jn,r=n.length,i="value"in Yn?Yn.value:Yn.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Xn=i.slice(e,1<t?1-t:void 0)}function er(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tr(){return!0}function nr(){return!1}function rr(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tr:nr,this.isPropagationStopped=nr,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),t}var ir,sr,or,ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=rr(ar),cr=Oe({},ar,{view:0,detail:0}),ur=rr(cr),dr=Oe({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(ir=e.screenX-or.screenX,sr=e.screenY-or.screenY):sr=ir=0,or=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),hr=rr(dr),fr=rr(Oe({},dr,{dataTransfer:0})),pr=rr(Oe({},cr,{relatedTarget:0})),mr=rr(Oe({},ar,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=Oe({},ar,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=rr(gr),_r=rr(Oe({},ar,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},br={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function Tr(){return kr}var Cr=Oe({},cr,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=er(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?br[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tr,charCode:function(e){return"keypress"===e.type?er(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?er(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=rr(Cr),Ir=rr(Oe({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=rr(Oe({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tr})),xr=rr(Oe({},ar,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nr=Oe({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=rr(Nr),Rr=[9,13,27,32],Dr=le&&"CompositionEvent"in window,Lr=null;le&&"documentMode"in document&&(Lr=document.documentMode);var Ar=le&&"TextEvent"in window&&!Lr,Or=le&&(!Dr||Lr&&8<Lr&&11>=Lr),Mr=String.fromCharCode(32),jr=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Rr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Br={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Br[e.type]:"textarea"===t}function Wr(e,t,n,r){Ct(r),0<(t=qi(t,"onChange")).length&&(n=new lr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qr=null,Vr=null;function Hr(e){Mi(e,0)}function Gr(e){if(Ve(_s(e)))return e}function Kr(e,t){if("change"===e)return t}var Qr=!1;if(le){var Yr;if(le){var Jr="oninput"in document;if(!Jr){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),Jr="function"==typeof Xr.oninput}Yr=Jr}else Yr=!1;Qr=Yr&&(!document.documentMode||9<document.documentMode)}function Zr(){qr&&(qr.detachEvent("onpropertychange",ei),Vr=qr=null)}function ei(e){if("value"===e.propertyName&&Gr(Vr)){var t=[];Wr(t,Vr,e,vt(e)),Nt(Hr,t)}}function ti(e,t,n){"focusin"===e?(Zr(),Vr=n,(qr=t).attachEvent("onpropertychange",ei)):"focusout"===e&&Zr()}function ni(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gr(Vr)}function ri(e,t){if("click"===e)return Gr(t)}function ii(e,t){if("input"===e||"change"===e)return Gr(t)}var si="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function oi(e,t){if(si(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ce.call(t,i)||!si(e[i],t[i]))return!1}return!0}function ai(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function li(e,t){var n,r=ai(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ai(r)}}function ci(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ci(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ui(){for(var e=window,t=He();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=He((e=t.contentWindow).document)}return t}function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hi(e){var t=ui(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ci(n.ownerDocument.documentElement,n)){if(null!==r&&di(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=li(n,s);var o=li(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fi=le&&"documentMode"in document&&11>=document.documentMode,pi=null,mi=null,gi=null,yi=!1;function _i(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==pi||pi!==He(r)||("selectionStart"in(r=pi)&&di(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gi&&oi(gi,r)||(gi=r,0<(r=qi(mi,"onSelect")).length&&(t=new lr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pi)))}function vi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bi={animationend:vi("Animation","AnimationEnd"),animationiteration:vi("Animation","AnimationIteration"),animationstart:vi("Animation","AnimationStart"),transitionend:vi("Transition","TransitionEnd")},wi={},ki={};function Ti(e){if(wi[e])return wi[e];if(!bi[e])return e;var t,n=bi[e];for(t in n)if(n.hasOwnProperty(t)&&t in ki)return wi[e]=n[t];return e}le&&(ki=document.createElement("div").style,"AnimationEvent"in window||(delete bi.animationend.animation,delete bi.animationiteration.animation,delete bi.animationstart.animation),"TransitionEvent"in window||delete bi.transitionend.transition);var Ci=Ti("animationend"),Si=Ti("animationiteration"),Ii=Ti("animationstart"),Ei=Ti("transitionend"),xi=new Map,Ni="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pi(e,t){xi.set(e,t),oe(t,[e])}for(var Ri=0;Ri<Ni.length;Ri++){var Di=Ni[Ri];Pi(Di.toLowerCase(),"on"+(Di[0].toUpperCase()+Di.slice(1)))}Pi(Ci,"onAnimationEnd"),Pi(Si,"onAnimationIteration"),Pi(Ii,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(Ei,"onTransitionEnd"),ae("onMouseEnter",["mouseout","mouseover"]),ae("onMouseLeave",["mouseout","mouseover"]),ae("onPointerEnter",["pointerout","pointerover"]),ae("onPointerLeave",["pointerout","pointerover"]),oe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oe("onBeforeInput",["compositionend","keypress","textInput","paste"]),oe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ai=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function Oi(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,a,l){if(Ut.apply(this,arguments),At){if(!At)throw Error(re(198));var c=Ot;At=!1,Ot=null,Mt||(Mt=!0,jt=c)}}(r,t,void 0,e),e.currentTarget=null}function Mi(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Oi(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Oi(i,a,c),s=l}}}if(Mt)throw e=jt,Mt=!1,jt=null,e}function ji(e,t){var n=t[fs];void 0===n&&(n=t[fs]=new Set);var r=e+"__bubble";n.has(r)||(Bi(t,e,2,!1),n.add(r))}function Fi(e,t,n){var r=0;t&&(r|=4),Bi(n,e,r,t)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function zi(e){if(!e[Ui]){e[Ui]=!0,ie.forEach(function(t){"selectionchange"!==t&&(Ai.has(t)||Fi(t,!1,e),Fi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ui]||(t[Ui]=!0,Fi("selectionchange",!1,t))}}function Bi(e,t,n,r){switch(Qn(t)){case 1:var i=qn;break;case 4:i=Vn;break;default:i=Hn}n=i.bind(null,t,n,e),i=void 0,!Rt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $i(e,t,n,r,i){var s=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=gs(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Nt(function(){var r=s,i=vt(n),o=[];e:{var a=xi.get(e);if(void 0!==a){var l=lr,c=e;switch(e){case"keypress":if(0===er(n))break e;case"keydown":case"keyup":l=Sr;break;case"focusin":c="focus",l=pr;break;case"focusout":c="blur",l=pr;break;case"beforeblur":case"afterblur":l=pr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Er;break;case Ci:case Si:case Ii:l=mr;break;case Ei:l=xr;break;case"scroll":l=ur;break;case"wheel":l=Pr;break;case"copy":case"cut":case"paste":l=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ir}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pt(p,h))&&u.push(Wi(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===_t||!(c=n.relatedTarget||n.fromElement)||!gs(c)&&!c[hs])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?gs(c):null)&&(c!==(d=zt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=hr,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Ir,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:_s(l),f=null==c?a:_s(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,gs(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Vi(f))p++;for(f=0,m=h;m;m=Vi(m))f++;for(;0<p-f;)u=Vi(u),p--;for(;0<f-p;)h=Vi(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Vi(u),h=Vi(h)}u=null}else u=null;null!==l&&Hi(o,a,l,u,!1),null!==c&&null!==d&&Hi(o,d,c,u,!0)}if("select"===(l=(a=r?_s(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Kr;else if($r(a))if(Qr)g=ii;else{g=ni;var y=ti}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ri);switch(g&&(g=g(e,r))?Wr(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&Xe(a,"number",a.value)),y=r?_s(r):window,e){case"focusin":($r(y)||"true"===y.contentEditable)&&(pi=y,mi=r,gi=null);break;case"focusout":gi=mi=pi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,_i(o,n,i);break;case"selectionchange":if(fi)break;case"keydown":case"keyup":_i(o,n,i)}var _;if(Dr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else zr?Fr(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Or&&"ko"!==n.locale&&(zr||"onCompositionStart"!==v?"onCompositionEnd"===v&&zr&&(_=Zn()):(Jn="value"in(Yn=i)?Yn.value:Yn.textContent,zr=!0)),0<(y=qi(r,v)).length&&(v=new _r(v,e,null,n,i),o.push({event:v,listeners:y}),_?v.data=_:null!==(_=Ur(n))&&(v.data=_))),(_=Ar?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(jr=!0,Mr);case"textInput":return(e=t.data)===Mr&&jr?null:e;default:return null}}(e,n):function(e,t){if(zr)return"compositionend"===e||!Dr&&Fr(e,t)?(e=Zn(),Xn=Jn=Yn=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Or&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qi(r,"onBeforeInput")).length&&(i=new _r("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=_))}Mi(o,t)})}function Wi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pt(e,n))&&r.unshift(Wi(e,s,i)),null!=(s=Pt(e,t))&&r.push(Wi(e,s,i))),e=e.return}return r}function Vi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hi(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pt(n,s))&&o.unshift(Wi(n,l,a)):i||null!=(l=Pt(n,s))&&o.push(Wi(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Qi(e){return("string"==typeof e?e:""+e).replace(Gi,"\n").replace(Ki,"")}function Yi(e,t,n){if(t=Qi(t),Qi(e)!==t&&n)throw Error(re(425))}function Ji(){}var Xi=null,Zi=null;function es(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ts="function"==typeof setTimeout?setTimeout:void 0,ns="function"==typeof clearTimeout?clearTimeout:void 0,rs="function"==typeof Promise?Promise:void 0,is="function"==typeof queueMicrotask?queueMicrotask:void 0!==rs?function(e){return rs.resolve(null).then(e).catch(ss)}:ts;function ss(e){setTimeout(function(){throw e})}function os(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bn(t)}function as(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ls(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var cs=Math.random().toString(36).slice(2),us="__reactFiber$"+cs,ds="__reactProps$"+cs,hs="__reactContainer$"+cs,fs="__reactEvents$"+cs,ps="__reactListeners$"+cs,ms="__reactHandles$"+cs;function gs(e){var t=e[us];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hs]||n[us]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ls(e);null!==e;){if(n=e[us])return n;e=ls(e)}return t}n=(e=n).parentNode}return null}function ys(e){return!(e=e[us]||e[hs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _s(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(re(33))}function vs(e){return e[ds]||null}var bs=[],ws=-1;function ks(e){return{current:e}}function Ts(e){0>ws||(e.current=bs[ws],bs[ws]=null,ws--)}function Cs(e,t){ws++,bs[ws]=e.current,e.current=t}var Ss={},Is=ks(Ss),Es=ks(!1),xs=Ss;function Ns(e,t){var n=e.type.contextTypes;if(!n)return Ss;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ps(e){return null!=(e=e.childContextTypes)}function Rs(){Ts(Es),Ts(Is)}function Ds(e,t,n){if(Is.current!==Ss)throw Error(re(168));Cs(Is,t),Cs(Es,n)}function Ls(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(re(108,Be(e)||"Unknown",i));return Oe({},n,r)}function As(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ss,xs=Is.current,Cs(Is,e),Cs(Es,Es.current),!0}function Os(e,t,n){var r=e.stateNode;if(!r)throw Error(re(169));n?(e=Ls(e,t,xs),r.__reactInternalMemoizedMergedChildContext=e,Ts(Es),Ts(Is),Cs(Is,e)):Ts(Es),Cs(Es,n)}var Ms=null,js=!1,Fs=!1;function Us(e){null===Ms?Ms=[e]:Ms.push(e)}function zs(){if(!Fs&&null!==Ms){Fs=!0;var e=0,t=_n;try{var n=Ms;for(_n=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ms=null,js=!1}catch(i){throw null!==Ms&&(Ms=Ms.slice(e+1)),Vt(Jt,zs),i}finally{_n=t,Fs=!1}}return null}var Bs=[],$s=0,Ws=null,qs=0,Vs=[],Hs=0,Gs=null,Ks=1,Qs="";function Ys(e,t){Bs[$s++]=qs,Bs[$s++]=Ws,Ws=e,qs=t}function Js(e,t,n){Vs[Hs++]=Ks,Vs[Hs++]=Qs,Vs[Hs++]=Gs,Gs=e;var r=Ks;e=Qs;var i=32-sn(r)-1;r&=~(1<<i),n+=1;var s=32-sn(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ks=1<<32-sn(t)+i|n<<i|r,Qs=s+e}else Ks=1<<s|n<<i|r,Qs=e}function Xs(e){null!==e.return&&(Ys(e,1),Js(e,1,0))}function Zs(e){for(;e===Ws;)Ws=Bs[--$s],Bs[$s]=null,qs=Bs[--$s],Bs[$s]=null;for(;e===Gs;)Gs=Vs[--Hs],Vs[Hs]=null,Qs=Vs[--Hs],Vs[Hs]=null,Ks=Vs[--Hs],Vs[Hs]=null}var eo=null,to=null,no=!1,ro=null;function io(e,t){var n=Nu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,eo=e,to=as(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,eo=e,to=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gs?{id:Ks,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,eo=e,to=null,!0);default:return!1}}function oo(e){return!(!(1&e.mode)||128&e.flags)}function ao(e){if(no){var t=to;if(t){var n=t;if(!so(e,t)){if(oo(e))throw Error(re(418));t=as(n.nextSibling);var r=eo;t&&so(e,t)?io(r,n):(e.flags=-4097&e.flags|2,no=!1,eo=e)}}else{if(oo(e))throw Error(re(418));e.flags=-4097&e.flags|2,no=!1,eo=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;eo=e}function co(e){if(e!==eo)return!1;if(!no)return lo(e),no=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!es(e.type,e.memoizedProps)),t&&(t=to)){if(oo(e))throw uo(),Error(re(418));for(;t;)io(e,t),t=as(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(re(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){to=as(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}to=null}}else to=eo?as(e.stateNode.nextSibling):null;return!0}function uo(){for(var e=to;e;)e=as(e.nextSibling)}function ho(){to=eo=null,no=!1}function fo(e){null===ro?ro=[e]:ro.push(e)}var po=_e.ReactCurrentBatchConfig;function mo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(re(284));if(!n._owner)throw Error(re(290,e))}return e}function go(e,t){throw e=Object.prototype.toString.call(t),Error(re(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yo(e){return(0,e._init)(e._payload)}function _o(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ru(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function a(e,t,n,r){return null===t||6!==t.tag?((t=Ou(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===we?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===Pe&&yo(s)===t.type)?((r=i(t,n.props)).ref=mo(e,t,n),r.return=e,r):((r=Du(n.type,n.key,n.props,null,e.mode,r)).ref=mo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Ou(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ve:return(n=Du(t.type,t.key,t.props,null,e.mode,n)).ref=mo(e,null,t),n.return=e,n;case be:return(t=Mu(t,e.mode,n)).return=e,t;case Pe:return d(e,(0,t._init)(t._payload),n)}if(Ze(t)||Le(t))return(t=Lu(t,e.mode,n,null)).return=e,t;go(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:a(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ve:return n.key===i?l(e,t,n,r):null;case be:return n.key===i?c(e,t,n,r):null;case Pe:return h(e,t,(i=n._init)(n._payload),r)}if(Ze(n)||Le(n))return null!==i?null:u(e,t,n,r,null);go(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return a(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case ve:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case be:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Pe:return f(e,t,n,(0,r._init)(r._payload),i)}if(Ze(r)||Le(r))return u(t,e=e.get(n)||null,r,i,null);go(t,r)}return null}return function a(l,c,u,p){if("object"==typeof u&&null!==u&&u.type===we&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case ve:e:{for(var m=u.key,g=c;null!==g;){if(g.key===m){if((m=u.type)===we){if(7===g.tag){n(l,g.sibling),(c=i(g,u.props.children)).return=l,l=c;break e}}else if(g.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===Pe&&yo(m)===g.type){n(l,g.sibling),(c=i(g,u.props)).ref=mo(l,g,u),c.return=l,l=c;break e}n(l,g);break}t(l,g),g=g.sibling}u.type===we?((c=Lu(u.props.children,l.mode,p,u.key)).return=l,l=c):((p=Du(u.type,u.key,u.props,null,l.mode,p)).ref=mo(l,c,u),p.return=l,l=p)}return o(l);case be:e:{for(g=u.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(c=i(c,u.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=Mu(u,l.mode,p)).return=l,l=c}return o(l);case Pe:return a(l,c,(g=u._init)(u._payload),p)}if(Ze(u))return function(i,o,a,l){for(var c=null,u=null,p=o,m=o=0,g=null;null!==p&&m<a.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=h(i,p,a[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,p=g}if(m===a.length)return n(i,p),no&&Ys(i,m),c;if(null===p){for(;m<a.length;m++)null!==(p=d(i,a[m],l))&&(o=s(p,o,m),null===u?c=p:u.sibling=p,u=p);return no&&Ys(i,m),c}for(p=r(i,p);m<a.length;m++)null!==(g=f(p,i,m,a[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&p.forEach(function(e){return t(i,e)}),no&&Ys(i,m),c}(l,c,u,p);if(Le(u))return function(i,o,a,l){var c=Le(a);if("function"!=typeof c)throw Error(re(150));if(null==(a=c.call(a)))throw Error(re(151));for(var u=c=null,p=o,m=o=0,g=null,y=a.next();null!==p&&!y.done;m++,y=a.next()){p.index>m?(g=p,p=null):g=p.sibling;var _=h(i,p,y.value,l);if(null===_){null===p&&(p=g);break}e&&p&&null===_.alternate&&t(i,p),o=s(_,o,m),null===u?c=_:u.sibling=_,u=_,p=g}if(y.done)return n(i,p),no&&Ys(i,m),c;if(null===p){for(;!y.done;m++,y=a.next())null!==(y=d(i,y.value,l))&&(o=s(y,o,m),null===u?c=y:u.sibling=y,u=y);return no&&Ys(i,m),c}for(p=r(i,p);!y.done;m++,y=a.next())null!==(y=f(p,i,m,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y);return e&&p.forEach(function(e){return t(i,e)}),no&&Ys(i,m),c}(l,c,u,p);go(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(c=i(c,u)).return=l,l=c):(n(l,c),(c=Ou(u,l.mode,p)).return=l,l=c),o(l)):n(l,c)}}var vo=_o(!0),bo=_o(!1),wo=ks(null),ko=null,To=null,Co=null;function So(){Co=To=ko=null}function Io(e){var t=wo.current;Ts(wo),e._currentValue=t}function Eo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xo(e,t){ko=e,Co=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yl=!0),e.firstContext=null)}function No(e){var t=e._currentValue;if(Co!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===ko)throw Error(re(308));To=e,ko.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Po=null;function Ro(e){null===Po?Po=[e]:Po.push(e)}function Do(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ro(t)):(n.next=i.next,i.next=n),t.interleaved=n,Lo(e,r)}function Lo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ao=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Ic){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Lo(e,n)}return null===(i=r.interleaved)?(t.next=t,Ro(r)):(t.next=i.next,i.next=t),r.interleaved=t,Lo(e,n)}function Uo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yn(e,n)}}function zo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bo(e,t,n,r){var i=e.updateQueue;Ao=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=Oe({},d,h);break e;case 2:Ao=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ac|=o,e.lanes=o,e.memoizedState=d}}function $o(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(re(191,i));i.call(r)}}}var Wo={},qo=ks(Wo),Vo=ks(Wo),Ho=ks(Wo);function Go(e){if(e===Wo)throw Error(re(174));return e}function Ko(e,t){switch(Cs(Ho,t),Cs(Vo,e),Cs(qo,Wo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ot(null,"");break;default:t=ot(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ts(qo),Cs(qo,t)}function Qo(){Ts(qo),Ts(Vo),Ts(Ho)}function Yo(e){Go(Ho.current);var t=Go(qo.current),n=ot(t,e.type);t!==n&&(Cs(Vo,e),Cs(qo,n))}function Jo(e){Vo.current===e&&(Ts(qo),Ts(Vo))}var Xo=ks(0);function Zo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ea=[];function ta(){for(var e=0;e<ea.length;e++)ea[e]._workInProgressVersionPrimary=null;ea.length=0}var na=_e.ReactCurrentDispatcher,ra=_e.ReactCurrentBatchConfig,ia=0,sa=null,oa=null,aa=null,la=!1,ca=!1,ua=0,da=0;function ha(){throw Error(re(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,i,s){if(ia=s,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,na.current=null===e||null===e.memoizedState?Ja:Xa,e=n(r,i),ca){s=0;do{if(ca=!1,ua=0,25<=s)throw Error(re(301));s+=1,aa=oa=null,t.updateQueue=null,na.current=Za,e=n(r,i)}while(ca)}if(na.current=Ya,t=null!==oa&&null!==oa.next,ia=0,aa=oa=sa=null,la=!1,t)throw Error(re(300));return e}function ma(){var e=0!==ua;return ua=0,e}function ga(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===aa?sa.memoizedState=aa=e:aa=aa.next=e,aa}function ya(){if(null===oa){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===aa?sa.memoizedState:aa.next;if(null!==t)aa=t,oa=e;else{if(null===e)throw Error(re(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===aa?sa.memoizedState=aa=e:aa=aa.next=e}return aa}function _a(e,t){return"function"==typeof t?t(e):t}function va(e){var t=ya(),n=t.queue;if(null===n)throw Error(re(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((ia&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(a=l=d,o=r):l=l.next=d,sa.lanes|=u,Ac|=u}c=c.next}while(null!==c&&c!==s);null===l?o=r:l.next=a,si(r,t.memoizedState)||(yl=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,sa.lanes|=s,Ac|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(re(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);si(s,t.memoizedState)||(yl=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function wa(){}function ka(e,t){var n=sa,r=ya(),i=t(),s=!si(r.memoizedState,i);if(s&&(r.memoizedState=i,yl=!0),r=r.queue,Aa(Sa.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==aa&&1&aa.memoizedState.tag){if(n.flags|=2048,Na(9,Ca.bind(null,n,r,i,t),void 0,null),null===Ec)throw Error(re(349));30&ia||Ta(n,t,i)}return i}function Ta(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ca(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Ea(e)}function Sa(e,t,n){return n(function(){Ia(t)&&Ea(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!si(e,n)}catch(r){return!0}}function Ea(e){var t=Lo(e,1);null!==t&&eu(t,e,1,-1)}function xa(e){var t=ga();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t.queue=e,e=e.dispatch=Ha.bind(null,sa,e),[t.memoizedState,e]}function Na(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pa(){return ya().memoizedState}function Ra(e,t,n,r){var i=ga();sa.flags|=e,i.memoizedState=Na(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var o=oa.memoizedState;if(s=o.destroy,null!==r&&fa(r,o.deps))return void(i.memoizedState=Na(t,n,s,r))}sa.flags|=e,i.memoizedState=Na(1|t,n,s,r)}function La(e,t){return Ra(8390656,8,e,t)}function Aa(e,t){return Da(2048,8,e,t)}function Oa(e,t){return Da(4,2,e,t)}function Ma(e,t){return Da(4,4,e,t)}function ja(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,n){return n=null!=n?n.concat([e]):null,Da(4,4,ja.bind(null,t,e),n)}function Ua(){}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 21&ia?(si(n,t)||(n=pn(),sa.lanes|=n,Ac|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yl=!0),e.memoizedState=n)}function Wa(e,t){var n=_n;_n=0!==n&&4>n?n:4,e(!0);var r=ra.transition;ra.transition={};try{e(!1),t()}finally{_n=n,ra.transition=r}}function qa(){return ya().memoizedState}function Va(e,t,n){var r=Zc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ga(e))Ka(t,n);else if(null!==(n=Do(e,t,n,r))){eu(n,e,r,Xc()),Qa(n,t,r)}}function Ha(e,t,n){var r=Zc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ga(e))Ka(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,si(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ro(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Do(e,t,i,r))&&(eu(n,e,r,i=Xc()),Qa(n,t,r))}}function Ga(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ka(e,t){ca=la=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yn(e,n)}}var Ya={readContext:No,useCallback:ha,useContext:ha,useEffect:ha,useImperativeHandle:ha,useInsertionEffect:ha,useLayoutEffect:ha,useMemo:ha,useReducer:ha,useRef:ha,useState:ha,useDebugValue:ha,useDeferredValue:ha,useTransition:ha,useMutableSource:ha,useSyncExternalStore:ha,useId:ha,unstable_isNewReconciler:!1},Ja={readContext:No,useCallback:function(e,t){return ga().memoizedState=[e,void 0===t?null:t],e},useContext:No,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ra(4194308,4,ja.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ra(4,2,e,t)},useMemo:function(e,t){var n=ga();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ga();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Va.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ga().memoizedState=e},useState:xa,useDebugValue:Ua,useDeferredValue:function(e){return ga().memoizedState=e},useTransition:function(){var e=xa(!1),t=e[0];return e=Wa.bind(null,e[1]),ga().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=ga();if(no){if(void 0===n)throw Error(re(407));n=n()}else{if(n=t(),null===Ec)throw Error(re(349));30&ia||Ta(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,La(Sa.bind(null,r,s,e),[e]),r.flags|=2048,Na(9,Ca.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ga(),t=Ec.identifierPrefix;if(no){var n=Qs;t=":"+t+"R"+(n=(Ks&~(1<<32-sn(Ks)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xa={readContext:No,useCallback:za,useContext:No,useEffect:Aa,useImperativeHandle:Fa,useInsertionEffect:Oa,useLayoutEffect:Ma,useMemo:Ba,useReducer:va,useRef:Pa,useState:function(){return va(_a)},useDebugValue:Ua,useDeferredValue:function(e){return $a(ya(),oa.memoizedState,e)},useTransition:function(){return[va(_a)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1},Za={readContext:No,useCallback:za,useContext:No,useEffect:Aa,useImperativeHandle:Fa,useInsertionEffect:Oa,useLayoutEffect:Ma,useMemo:Ba,useReducer:ba,useRef:Pa,useState:function(){return ba(_a)},useDebugValue:Ua,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:$a(t,oa.memoizedState,e)},useTransition:function(){return[ba(_a)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1};function el(e,t){if(e&&e.defaultProps){for(var n in t=Oe({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function tl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Oe({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var nl={isMounted:function(e){return!!(e=e._reactInternals)&&zt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xc(),i=Zc(e),s=jo(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Fo(e,s,i))&&(eu(t,e,i,r),Uo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xc(),i=Zc(e),s=jo(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Fo(e,s,i))&&(eu(t,e,i,r),Uo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xc(),r=Zc(e),i=jo(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Fo(e,i,r))&&(eu(t,e,r,n),Uo(t,e,r))}};function rl(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!oi(n,r)||!oi(i,s))}function il(e,t,n){var r=!1,i=Ss,s=t.contextType;return"object"==typeof s&&null!==s?s=No(s):(i=Ps(t)?xs:Is.current,s=(r=null!=(r=t.contextTypes))?Ns(e,i):Ss),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=nl,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function sl(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&nl.enqueueReplaceState(t,t.state,null)}function ol(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Oo(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=No(s):(s=Ps(t)?xs:Is.current,i.context=Ns(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(tl(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&nl.enqueueReplaceState(i,i.state,null),Bo(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function al(e,t){try{var n="",r=t;do{n+=Ue(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ll(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function cl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ul="function"==typeof WeakMap?WeakMap:Map;function dl(e,t,n){(n=jo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$c||($c=!0,Wc=r),cl(0,t)},n}function hl(e,t,n){(n=jo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){cl(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){cl(0,t),"function"!=typeof r&&(null===qc?qc=new Set([this]):qc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ul;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function pl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ml(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=jo(-1,1)).tag=2,Fo(n,t,1))),n.lanes|=1),e)}var gl=_e.ReactCurrentOwner,yl=!1;function _l(e,t,n,r){t.child=null===e?bo(t,null,n,r):vo(t,e.child,n,r)}function vl(e,t,n,r,i){n=n.render;var s=t.ref;return xo(t,i),r=pa(e,t,n,r,s,i),n=ma(),null===e||yl?(no&&n&&Xs(t),t.flags|=1,_l(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$l(e,t,i))}function bl(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||Pu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Du(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,wl(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:oi)(o,r)&&e.ref===t.ref)return $l(e,t,i)}return t.flags|=1,(e=Ru(s,r)).ref=t.ref,e.return=t,t.child=e}function wl(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(oi(s,r)&&e.ref===t.ref){if(yl=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,$l(e,t,i);131072&e.flags&&(yl=!0)}}return Cl(e,t,n,r,i)}function kl(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cs(Rc,Pc),Pc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Cs(Rc,Pc),Pc|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cs(Rc,Pc),Pc|=n;else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Cs(Rc,Pc),Pc|=r;return _l(e,t,i,n),t.child}function Tl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cl(e,t,n,r,i){var s=Ps(n)?xs:Is.current;return s=Ns(t,s),xo(t,i),n=pa(e,t,n,r,s,i),r=ma(),null===e||yl?(no&&r&&Xs(t),t.flags|=1,_l(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$l(e,t,i))}function Sl(e,t,n,r,i){if(Ps(n)){var s=!0;As(t)}else s=!1;if(xo(t,i),null===t.stateNode)Bl(e,t),il(t,n,r),ol(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"==typeof c&&null!==c?c=No(c):c=Ns(t,c=Ps(n)?xs:Is.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==c)&&sl(t,o,r,c),Ao=!1;var h=t.memoizedState;o.state=h,Bo(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Es.current||Ao?("function"==typeof u&&(tl(t,n,u,r),l=t.memoizedState),(a=Ao||rl(t,n,a,r,h,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Mo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:el(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"==typeof(l=n.contextType)&&null!==l?l=No(l):l=Ns(t,l=Ps(n)?xs:Is.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||h!==l)&&sl(t,o,r,l),Ao=!1,h=t.memoizedState,o.state=h,Bo(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Es.current||Ao?("function"==typeof f&&(tl(t,n,f,r),p=t.memoizedState),(c=Ao||rl(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Il(e,t,n,r,s,i)}function Il(e,t,n,r,i,s){Tl(e,t);var o=!!(128&t.flags);if(!r&&!o)return i&&Os(t,n,!1),$l(e,t,s);r=t.stateNode,gl.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=vo(t,e.child,null,s),t.child=vo(t,null,a,s)):_l(e,t,a,s),t.memoizedState=r.state,i&&Os(t,n,!0),t.child}function El(e){var t=e.stateNode;t.pendingContext?Ds(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ds(0,t.context,!1),Ko(e,t.containerInfo)}function xl(e,t,n,r,i){return ho(),fo(i),t.flags|=256,_l(e,t,n,r),t.child}var Nl,Pl,Rl,Dl,Ll={dehydrated:null,treeContext:null,retryLane:0};function Al(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ol(e,t,n){var r,i=t.pendingProps,s=Xo.current,o=!1,a=!!(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Cs(Xo,1&s),null===e)return ao(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,o?(i=t.mode,o=t.child,a={mode:"hidden",children:a},1&i||null===o?o=Au(a,i,0,null):(o.childLanes=0,o.pendingProps=a),e=Lu(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Al(n),t.memoizedState=Ll,e):Ml(t,a));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,jl(e,t,o,r=ll(Error(re(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Au({mode:"visible",children:r.children},i,0,null),(s=Lu(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,1&t.mode&&vo(t,e.child,null,o),t.child.memoizedState=Al(o),t.memoizedState=Ll,s);if(!(1&t.mode))return jl(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var a=r.dgst;return r=a,jl(e,t,o,r=ll(s=Error(re(419)),r,void 0))}if(a=0!==(o&e.childLanes),yl||a){if(null!==(r=Ec)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Lo(e,i),eu(r,e,i,-1))}return fu(),jl(e,t,o,r=ll(Error(re(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Su.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,to=as(i.nextSibling),eo=t,no=!0,ro=null,null!==e&&(Vs[Hs++]=Ks,Vs[Hs++]=Qs,Vs[Hs++]=Gs,Ks=e.id,Qs=e.overflow,Gs=t),t=Ml(t,r.children),t.flags|=4096,t)}(e,t,a,i,r,s,n);if(o){o=i.fallback,a=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&a||t.child===s?(i=Ru(s,l)).subtreeFlags=14680064&s.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==r?o=Ru(r,o):(o=Lu(o,a,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,a=null===(a=e.child.memoizedState)?Al(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Ll,i}return e=(o=e.child).sibling,i=Ru(o,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ml(e,t){return(t=Au({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function jl(e,t,n,r){return null!==r&&fo(r),vo(t,e.child,null,n),(e=Ml(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Eo(e.return,t,n)}function Ul(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function zl(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_l(e,t,r.children,n),2&(r=Xo.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fl(e,n,t);else if(19===e.tag)Fl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Cs(Xo,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Zo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ul(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Zo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ul(t,!0,n,null,s);break;case"together":Ul(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Bl(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $l(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ac|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(re(153));if(null!==t.child){for(n=Ru(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ru(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wl(e,t){if(!no)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ql(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Vl(e,t,n){var r=t.pendingProps;switch(Zs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ql(t),null;case 1:case 17:return Ps(t.type)&&Rs(),ql(t),null;case 3:return r=t.stateNode,Qo(),Ts(Es),Ts(Is),ta(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(co(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ro&&(iu(ro),ro=null))),Pl(e,t),ql(t),null;case 5:Jo(t);var i=Go(Ho.current);if(n=t.type,null!==e&&null!=t.stateNode)Rl(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(re(166));return ql(t),null}if(e=Go(qo.current),co(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[us]=t,r[ds]=s,e=!!(1&t.mode),n){case"dialog":ji("cancel",r),ji("close",r);break;case"iframe":case"object":case"embed":ji("load",r);break;case"video":case"audio":for(i=0;i<Li.length;i++)ji(Li[i],r);break;case"source":ji("error",r);break;case"img":case"image":case"link":ji("error",r),ji("load",r);break;case"details":ji("toggle",r);break;case"input":Ke(r,s),ji("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ji("invalid",r);break;case"textarea":nt(r,s),ji("invalid",r)}for(var o in gt(n,s),i=null,s)if(s.hasOwnProperty(o)){var a=s[o];"children"===o?"string"==typeof a?r.textContent!==a&&(!0!==s.suppressHydrationWarning&&Yi(r.textContent,a,e),i=["children",a]):"number"==typeof a&&r.textContent!==""+a&&(!0!==s.suppressHydrationWarning&&Yi(r.textContent,a,e),i=["children",""+a]):se.hasOwnProperty(o)&&null!=a&&"onScroll"===o&&ji("scroll",r)}switch(n){case"input":qe(r),Je(r,s,!0);break;case"textarea":qe(r),it(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Ji)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{o=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=st(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),"select"===n&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[us]=t,e[ds]=r,Nl(e,t,!1,!1),t.stateNode=e;e:{switch(o=yt(n,r),n){case"dialog":ji("cancel",e),ji("close",e),i=r;break;case"iframe":case"object":case"embed":ji("load",e),i=r;break;case"video":case"audio":for(i=0;i<Li.length;i++)ji(Li[i],e);i=r;break;case"source":ji("error",e),i=r;break;case"img":case"image":case"link":ji("error",e),ji("load",e),i=r;break;case"details":ji("toggle",e),i=r;break;case"input":Ke(e,r),i=Ge(e,r),ji("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Oe({},r,{value:void 0}),ji("invalid",e);break;case"textarea":nt(e,r),i=tt(e,r),ji("invalid",e)}for(s in gt(n,i),a=i)if(a.hasOwnProperty(s)){var l=a[s];"style"===s?pt(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&ct(e,l):"children"===s?"string"==typeof l?("textarea"!==n||""!==l)&&ut(e,l):"number"==typeof l&&ut(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(se.hasOwnProperty(s)?null!=l&&"onScroll"===s&&ji("scroll",e):null!=l&&ye(e,s,l,o))}switch(n){case"input":qe(e),Je(e,r,!1);break;case"textarea":qe(e),it(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$e(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?et(e,!!r.multiple,s,!1):null!=r.defaultValue&&et(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ql(t),null;case 6:if(e&&null!=t.stateNode)Dl(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(re(166));if(n=Go(Ho.current),Go(qo.current),co(t)){if(r=t.stateNode,n=t.memoizedProps,r[us]=t,(s=r.nodeValue!==n)&&null!==(e=eo))switch(e.tag){case 3:Yi(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yi(r.nodeValue,n,!!(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[us]=t,t.stateNode=r}return ql(t),null;case 13:if(Ts(Xo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(no&&null!==to&&1&t.mode&&!(128&t.flags))uo(),ho(),t.flags|=98560,s=!1;else if(s=co(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(re(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(re(317));s[us]=t}else ho(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ql(t),s=!1}else null!==ro&&(iu(ro),ro=null),s=!0;if(!s)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Xo.current?0===Dc&&(Dc=3):fu())),null!==t.updateQueue&&(t.flags|=4),ql(t),null);case 4:return Qo(),Pl(e,t),null===e&&zi(t.stateNode.containerInfo),ql(t),null;case 10:return Io(t.type._context),ql(t),null;case 19:if(Ts(Xo),null===(s=t.memoizedState))return ql(t),null;if(r=!!(128&t.flags),null===(o=s.rendering))if(r)Wl(s,!1);else{if(0!==Dc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=Zo(e))){for(t.flags|=128,Wl(s,!1),null!==(r=o.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(o=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cs(Xo,1&Xo.current|2),t.child}e=e.sibling}null!==s.tail&&Qt()>zc&&(t.flags|=128,r=!0,Wl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Zo(o))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!o.alternate&&!no)return ql(t),null}else 2*Qt()-s.renderingStartTime>zc&&1073741824!==n&&(t.flags|=128,r=!0,Wl(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=s.last)?n.sibling=o:t.child=o,s.last=o)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qt(),t.sibling=null,n=Xo.current,Cs(Xo,r?1&n|2:1&n),t):(ql(t),null);case 22:case 23:return cu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Pc)&&(ql(t),6&t.subtreeFlags&&(t.flags|=8192)):ql(t),null;case 24:case 25:return null}throw Error(re(156,t.tag))}function Hl(e,t){switch(Zs(t),t.tag){case 1:return Ps(t.type)&&Rs(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),Ts(Es),Ts(Is),ta(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jo(t),null;case 13:if(Ts(Xo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(re(340));ho()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ts(Xo),null;case 4:return Qo(),null;case 10:return Io(t.type._context),null;case 22:case 23:return cu(),null;default:return null}}Nl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pl=function(){},Rl=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Go(qo.current);var s,o=null;switch(n){case"input":i=Ge(e,i),r=Ge(e,r),o=[];break;case"select":i=Oe({},i,{value:void 0}),r=Oe({},r,{value:void 0}),o=[];break;case"textarea":i=tt(e,i),r=tt(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Ji)}for(c in gt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(se.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(null!=l||null!=a))if("style"===c)if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,a=a?a.__html:void 0,null!=l&&a!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(se.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&ji("scroll",e),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Dl=function(e,t,n,r){n!==r&&(t.flags|=4)};var Gl=!1,Kl=!1,Ql="function"==typeof WeakSet?WeakSet:Set,Yl=null;function Jl(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){ku(e,t,r)}else n.current=null}function Xl(e,t,n){try{n()}catch(r){ku(e,t,r)}}var Zl=!1;function ec(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Xl(t,n,s)}i=i.next}while(i!==r)}}function tc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function nc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function rc(e){var t=e.alternate;null!==t&&(e.alternate=null,rc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[us],delete t[ds],delete t[fs],delete t[ps],delete t[ms])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ic(e){return 5===e.tag||3===e.tag||4===e.tag}function sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ic(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function oc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Ji));else if(4!==r&&null!==(e=e.child))for(oc(e,t,n),e=e.sibling;null!==e;)oc(e,t,n),e=e.sibling}function ac(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ac(e,t,n),e=e.sibling;null!==e;)ac(e,t,n),e=e.sibling}var lc=null,cc=!1;function uc(e,t,n){for(n=n.child;null!==n;)dc(e,t,n),n=n.sibling}function dc(e,t,n){if(rn&&"function"==typeof rn.onCommitFiberUnmount)try{rn.onCommitFiberUnmount(nn,n)}catch(a){}switch(n.tag){case 5:Kl||Jl(n,t);case 6:var r=lc,i=cc;lc=null,uc(e,t,n),cc=i,null!==(lc=r)&&(cc?(e=lc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lc.removeChild(n.stateNode));break;case 18:null!==lc&&(cc?(e=lc,n=n.stateNode,8===e.nodeType?os(e.parentNode,n):1===e.nodeType&&os(e,n),Bn(e)):os(lc,n.stateNode));break;case 4:r=lc,i=cc,lc=n.stateNode.containerInfo,cc=!0,uc(e,t,n),lc=r,cc=i;break;case 0:case 11:case 14:case 15:if(!Kl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(2&s||4&s)&&Xl(n,t,o),i=i.next}while(i!==r)}uc(e,t,n);break;case 1:if(!Kl&&(Jl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ku(n,t,a)}uc(e,t,n);break;case 21:uc(e,t,n);break;case 22:1&n.mode?(Kl=(r=Kl)||null!==n.memoizedState,uc(e,t,n),Kl=r):uc(e,t,n);break;default:uc(e,t,n)}}function hc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ql),t.forEach(function(t){var r=Iu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;null!==a;){switch(a.tag){case 5:lc=a.stateNode,cc=!1;break e;case 3:case 4:lc=a.stateNode.containerInfo,cc=!0;break e}a=a.return}if(null===lc)throw Error(re(160));dc(s,o,i),lc=null,cc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){ku(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pc(t,e),t=t.sibling}function pc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fc(t,e),mc(e),4&r){try{ec(3,e,e.return),tc(3,e)}catch(m){ku(e,e.return,m)}try{ec(5,e,e.return)}catch(m){ku(e,e.return,m)}}break;case 1:fc(t,e),mc(e),512&r&&null!==n&&Jl(n,n.return);break;case 5:if(fc(t,e),mc(e),512&r&&null!==n&&Jl(n,n.return),32&e.flags){var i=e.stateNode;try{ut(i,"")}catch(m){ku(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===a&&"radio"===s.type&&null!=s.name&&Qe(i,s),yt(a,o);var c=yt(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];"style"===u?pt(i,d):"dangerouslySetInnerHTML"===u?ct(i,d):"children"===u?ut(i,d):ye(i,u,d,c)}switch(a){case"input":Ye(i,s);break;case"textarea":rt(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?et(i,!!s.multiple,f,!1):h!==!!s.multiple&&(null!=s.defaultValue?et(i,!!s.multiple,s.defaultValue,!0):et(i,!!s.multiple,s.multiple?[]:"",!1))}i[ds]=s}catch(m){ku(e,e.return,m)}}break;case 6:if(fc(t,e),mc(e),4&r){if(null===e.stateNode)throw Error(re(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){ku(e,e.return,m)}}break;case 3:if(fc(t,e),mc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bn(t.containerInfo)}catch(m){ku(e,e.return,m)}break;case 4:default:fc(t,e),mc(e);break;case 13:fc(t,e),mc(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Uc=Qt())),4&r&&hc(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Kl=(c=Kl)||u,fc(t,e),Kl=c):fc(t,e),mc(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&1&e.mode)for(Yl=e,u=e.child;null!==u;){for(d=Yl=u;null!==Yl;){switch(f=(h=Yl).child,h.tag){case 0:case 11:case 14:case 15:ec(4,h,h.return);break;case 1:Jl(h,h.return);var p=h.stateNode;if("function"==typeof p.componentWillUnmount){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){ku(r,n,m)}}break;case 5:Jl(h,h.return);break;case 22:if(null!==h.memoizedState){vc(d);continue}}null!==f?(f.return=h,Yl=f):vc(d)}u=u.sibling}e:for(u=null,d=e;;){if(5===d.tag){if(null===u){u=d;try{i=d.stateNode,c?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(a=d.stateNode,o=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,a.style.display=ft("display",o))}catch(m){ku(e,e.return,m)}}}else if(6===d.tag){if(null===u)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){ku(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fc(t,e),mc(e),4&r&&hc(e);case 21:}}function mc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ic(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ut(i,""),r.flags&=-33),ac(e,sc(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;oc(e,sc(e),s);break;default:throw Error(re(161))}}catch(o){ku(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gc(e,t,n){Yl=e,yc(e)}function yc(e,t,n){for(var r=!!(1&e.mode);null!==Yl;){var i=Yl,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Gl;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Kl;a=Gl;var c=Kl;if(Gl=o,(Kl=l)&&!c)for(Yl=i;null!==Yl;)l=(o=Yl).child,22===o.tag&&null!==o.memoizedState?bc(i):null!==l?(l.return=o,Yl=l):bc(i);for(;null!==s;)Yl=s,yc(s),s=s.sibling;Yl=i,Gl=a,Kl=c}_c(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,Yl=s):_c(e)}}function _c(e){for(;null!==Yl;){var t=Yl;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Kl||tc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Kl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:el(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&$o(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$o(t,o,n)}break;case 5:var a=t.stateNode;if(null===n&&4&t.flags){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var d=u.dehydrated;null!==d&&Bn(d)}}}break;default:throw Error(re(163))}Kl||512&t.flags&&nc(t)}catch(h){ku(t,t.return,h)}}if(t===e){Yl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yl=n;break}Yl=t.return}}function vc(e){for(;null!==Yl;){var t=Yl;if(t===e){Yl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yl=n;break}Yl=t.return}}function bc(e){for(;null!==Yl;){var t=Yl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{tc(4,t)}catch(l){ku(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){ku(t,i,l)}}var s=t.return;try{nc(t)}catch(l){ku(t,s,l)}break;case 5:var o=t.return;try{nc(t)}catch(l){ku(t,o,l)}}}catch(l){ku(t,t.return,l)}if(t===e){Yl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Yl=a;break}Yl=t.return}}var wc,kc=Math.ceil,Tc=_e.ReactCurrentDispatcher,Cc=_e.ReactCurrentOwner,Sc=_e.ReactCurrentBatchConfig,Ic=0,Ec=null,xc=null,Nc=0,Pc=0,Rc=ks(0),Dc=0,Lc=null,Ac=0,Oc=0,Mc=0,jc=null,Fc=null,Uc=0,zc=1/0,Bc=null,$c=!1,Wc=null,qc=null,Vc=!1,Hc=null,Gc=0,Kc=0,Qc=null,Yc=-1,Jc=0;function Xc(){return 6&Ic?Qt():-1!==Yc?Yc:Yc=Qt()}function Zc(e){return 1&e.mode?2&Ic&&0!==Nc?Nc&-Nc:null!==po.transition?(0===Jc&&(Jc=pn()),Jc):0!==(e=_n)?e:e=void 0===(e=window.event)?16:Qn(e.type):1}function eu(e,t,n,r){if(50<Kc)throw Kc=0,Qc=null,Error(re(185));gn(e,n,r),2&Ic&&e===Ec||(e===Ec&&(!(2&Ic)&&(Oc|=n),4===Dc&&su(e,Nc)),tu(e,r),1===n&&0===Ic&&!(1&t.mode)&&(zc=Qt()+500,js&&zs()))}function tu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-sn(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=hn(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dn(e,e===Ec?Nc:0);if(0===r)null!==n&&Ht(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ht(n),1===t)0===e.tag?function(e){js=!0,Us(e)}(ou.bind(null,e)):Us(ou.bind(null,e)),is(function(){!(6&Ic)&&zs()}),n=null;else{switch(vn(r)){case 1:n=Jt;break;case 4:n=Xt;break;case 16:default:n=Zt;break;case 536870912:n=tn}n=Eu(n,nu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nu(e,t){if(Yc=-1,Jc=0,6&Ic)throw Error(re(327));var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var r=dn(e,e===Ec?Nc:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=pu(e,r);else{t=r;var i=Ic;Ic|=2;var s=hu();for(Ec===e&&Nc===t||(Bc=null,zc=Qt()+500,uu(e,t));;)try{gu();break}catch(a){du(e,a)}So(),Tc.current=s,Ic=i,null!==xc?t=0:(Ec=null,Nc=0,t=Dc)}if(0!==t){if(2===t&&(0!==(i=fn(e))&&(r=i,t=ru(e,i))),1===t)throw n=Lc,uu(e,0),su(e,r),tu(e,Qt()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!si(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=pu(e,r),2===t&&(s=fn(e),0!==s&&(r=s,t=ru(e,s))),1!==t)))throw n=Lc,uu(e,0),su(e,r),tu(e,Qt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(re(345));case 2:case 5:vu(e,Fc,Bc);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=Uc+500-Qt())){if(0!==dn(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Xc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ts(vu.bind(null,e,Fc,Bc),t);break}vu(e,Fc,Bc);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-sn(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Qt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kc(r/1960))-r)){e.timeoutHandle=ts(vu.bind(null,e,Fc,Bc),r);break}vu(e,Fc,Bc);break;default:throw Error(re(329))}}}return tu(e,Qt()),e.callbackNode===n?nu.bind(null,e):null}function ru(e,t){var n=jc;return e.current.memoizedState.isDehydrated&&(uu(e,t).flags|=256),2!==(e=pu(e,t))&&(t=Fc,Fc=n,null!==t&&iu(t)),e}function iu(e){null===Fc?Fc=e:Fc.push.apply(Fc,e)}function su(e,t){for(t&=~Mc,t&=~Oc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sn(t),r=1<<n;e[n]=-1,t&=~r}}function ou(e){if(6&Ic)throw Error(re(327));bu();var t=dn(e,0);if(!(1&t))return tu(e,Qt()),null;var n=pu(e,t);if(0!==e.tag&&2===n){var r=fn(e);0!==r&&(t=r,n=ru(e,r))}if(1===n)throw n=Lc,uu(e,0),su(e,t),tu(e,Qt()),n;if(6===n)throw Error(re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vu(e,Fc,Bc),tu(e,Qt()),null}function au(e,t){var n=Ic;Ic|=1;try{return e(t)}finally{0===(Ic=n)&&(zc=Qt()+500,js&&zs())}}function lu(e){null!==Hc&&0===Hc.tag&&!(6&Ic)&&bu();var t=Ic;Ic|=1;var n=Sc.transition,r=_n;try{if(Sc.transition=null,_n=1,e)return e()}finally{_n=r,Sc.transition=n,!(6&(Ic=t))&&zs()}}function cu(){Pc=Rc.current,Ts(Rc)}function uu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ns(n)),null!==xc)for(n=xc.return;null!==n;){var r=n;switch(Zs(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Rs();break;case 3:Qo(),Ts(Es),Ts(Is),ta();break;case 5:Jo(r);break;case 4:Qo();break;case 13:case 19:Ts(Xo);break;case 10:Io(r.type._context);break;case 22:case 23:cu()}n=n.return}if(Ec=e,xc=e=Ru(e.current,null),Nc=Pc=t,Dc=0,Lc=null,Mc=Oc=Ac=0,Fc=jc=null,null!==Po){for(t=0;t<Po.length;t++)if(null!==(r=(n=Po[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Po=null}return e}function du(e,t){for(;;){var n=xc;try{if(So(),na.current=Ya,la){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}la=!1}if(ia=0,aa=oa=sa=null,ca=!1,ua=0,Cc.current=null,null===n||null===n.return){Dc=1,Lc=t,xc=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Nc,a.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,u=a,d=u.tag;if(!(1&u.mode||0!==d&&11!==d&&15!==d)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=pl(o);if(null!==f){f.flags&=-257,ml(f,o,a,0,t),1&f.mode&&fl(s,c,t),l=c;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}if(!(1&t)){fl(s,c,t),fu();break e}l=Error(re(426))}else if(no&&1&a.mode){var g=pl(o);if(null!==g){!(65536&g.flags)&&(g.flags|=256),ml(g,o,a,0,t),fo(al(l,a));break e}}s=l=al(l,a),4!==Dc&&(Dc=2),null===jc?jc=[s]:jc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,zo(s,dl(0,l,t));break e;case 1:a=l;var y=s.type,_=s.stateNode;if(!(128&s.flags||"function"!=typeof y.getDerivedStateFromError&&(null===_||"function"!=typeof _.componentDidCatch||null!==qc&&qc.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t,zo(s,hl(s,a,t));break e}}s=s.return}while(null!==s)}_u(n)}catch(v){t=v,xc===n&&null!==n&&(xc=n=n.return);continue}break}}function hu(){var e=Tc.current;return Tc.current=Ya,null===e?Ya:e}function fu(){0!==Dc&&3!==Dc&&2!==Dc||(Dc=4),null===Ec||!(268435455&Ac)&&!(268435455&Oc)||su(Ec,Nc)}function pu(e,t){var n=Ic;Ic|=2;var r=hu();for(Ec===e&&Nc===t||(Bc=null,uu(e,t));;)try{mu();break}catch(i){du(e,i)}if(So(),Ic=n,Tc.current=r,null!==xc)throw Error(re(261));return Ec=null,Nc=0,Dc}function mu(){for(;null!==xc;)yu(xc)}function gu(){for(;null!==xc&&!Gt();)yu(xc)}function yu(e){var t=wc(e.alternate,e,Pc);e.memoizedProps=e.pendingProps,null===t?_u(e):xc=t,Cc.current=null}function _u(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Hl(n,t)))return n.flags&=32767,void(xc=n);if(null===e)return Dc=6,void(xc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Vl(n,t,Pc)))return void(xc=n);if(null!==(t=t.sibling))return void(xc=t);xc=t=e}while(null!==t);0===Dc&&(Dc=5)}function vu(e,t,n){var r=_n,i=Sc.transition;try{Sc.transition=null,_n=1,function(e,t,n,r){do{bu()}while(null!==Hc);if(6&Ic)throw Error(re(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(re(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-sn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,s),e===Ec&&(xc=Ec=null,Nc=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Vc||(Vc=!0,Eu(Zt,function(){return bu(),null})),s=!!(15990&n.flags),!!(15990&n.subtreeFlags)||s){s=Sc.transition,Sc.transition=null;var o=_n;_n=1;var a=Ic;Ic|=4,Cc.current=null,function(e,t){if(Xi=Wn,di(e=ui())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(b){n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(a=o+i),d!==s||0!==r&&3!==d.nodeType||(l=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(f=d.firstChild);)h=d,d=f;for(;;){if(d===e)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),null!==(f=d.nextSibling))break;h=(d=h).parentNode}d=f}n=-1===a||-1===l?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zi={focusedElem:e,selectionRange:n},Wn=!1,Yl=t;null!==Yl;)if(e=(t=Yl).child,1028&t.subtreeFlags&&null!==e)e.return=t,Yl=e;else for(;null!==Yl;){t=Yl;try{var p=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:el(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(re(163))}}catch(b){ku(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Yl=e;break}Yl=t.return}p=Zl,Zl=!1}(e,n),pc(n,e),hi(Zi),Wn=!!Xi,Zi=Xi=null,e.current=n,gc(n),Kt(),Ic=a,_n=o,Sc.transition=s}else e.current=n;if(Vc&&(Vc=!1,Hc=e,Gc=i),s=e.pendingLanes,0===s&&(qc=null),function(e){if(rn&&"function"==typeof rn.onCommitFiberRoot)try{rn.onCommitFiberRoot(nn,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),tu(e,Qt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($c)throw $c=!1,e=Wc,Wc=null,e;!!(1&Gc)&&0!==e.tag&&bu(),s=e.pendingLanes,1&s?e===Qc?Kc++:(Kc=0,Qc=e):Kc=0,zs()}(e,t,n,r)}finally{Sc.transition=i,_n=r}return null}function bu(){if(null!==Hc){var e=vn(Gc),t=Sc.transition,n=_n;try{if(Sc.transition=null,_n=16>e?16:e,null===Hc)var r=!1;else{if(e=Hc,Hc=null,Gc=0,6&Ic)throw Error(re(331));var i=Ic;for(Ic|=4,Yl=e.current;null!==Yl;){var s=Yl,o=s.child;if(16&Yl.flags){var a=s.deletions;if(null!==a){for(var l=0;l<a.length;l++){var c=a[l];for(Yl=c;null!==Yl;){var u=Yl;switch(u.tag){case 0:case 11:case 15:ec(8,u,s)}var d=u.child;if(null!==d)d.return=u,Yl=d;else for(;null!==Yl;){var h=(u=Yl).sibling,f=u.return;if(rc(u),u===c){Yl=null;break}if(null!==h){h.return=f,Yl=h;break}Yl=f}}}var p=s.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Yl=s}}if(2064&s.subtreeFlags&&null!==o)o.return=s,Yl=o;else e:for(;null!==Yl;){if(2048&(s=Yl).flags)switch(s.tag){case 0:case 11:case 15:ec(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Yl=y;break e}Yl=s.return}}var _=e.current;for(Yl=_;null!==Yl;){var v=(o=Yl).child;if(2064&o.subtreeFlags&&null!==v)v.return=o,Yl=v;else e:for(o=_;null!==Yl;){if(2048&(a=Yl).flags)try{switch(a.tag){case 0:case 11:case 15:tc(9,a)}}catch(w){ku(a,a.return,w)}if(a===o){Yl=null;break e}var b=a.sibling;if(null!==b){b.return=a.return,Yl=b;break e}Yl=a.return}}if(Ic=i,zs(),rn&&"function"==typeof rn.onPostCommitFiberRoot)try{rn.onPostCommitFiberRoot(nn,e)}catch(w){}r=!0}return r}finally{_n=n,Sc.transition=t}}return!1}function wu(e,t,n){e=Fo(e,t=dl(0,t=al(n,t),1),1),t=Xc(),null!==e&&(gn(e,1,t),tu(e,t))}function ku(e,t,n){if(3===e.tag)wu(e,e,n);else for(;null!==t;){if(3===t.tag){wu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===qc||!qc.has(r))){t=Fo(t,e=hl(t,e=al(n,e),1),1),e=Xc(),null!==t&&(gn(t,1,e),tu(t,e));break}}t=t.return}}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Xc(),e.pingedLanes|=e.suspendedLanes&n,Ec===e&&(Nc&n)===n&&(4===Dc||3===Dc&&(130023424&Nc)===Nc&&500>Qt()-Uc?uu(e,0):Mc|=n),tu(e,t)}function Cu(e,t){0===t&&(1&e.mode?(t=cn,!(130023424&(cn<<=1))&&(cn=4194304)):t=1);var n=Xc();null!==(e=Lo(e,t))&&(gn(e,t,n),tu(e,n))}function Su(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Iu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(re(314))}null!==r&&r.delete(t),Cu(e,n)}function Eu(e,t){return Vt(e,t)}function xu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nu(e,t,n,r){return new xu(e,t,n,r)}function Pu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ru(e,t){var n=e.alternate;return null===n?((n=Nu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Du(e,t,n,r,i,s){var o=2;if(r=e,"function"==typeof e)Pu(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case we:return Lu(n.children,i,s,t);case ke:o=8,i|=8;break;case Te:return(e=Nu(12,n,t,2|i)).elementType=Te,e.lanes=s,e;case Ee:return(e=Nu(13,n,t,i)).elementType=Ee,e.lanes=s,e;case xe:return(e=Nu(19,n,t,i)).elementType=xe,e.lanes=s,e;case Re:return Au(n,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ce:o=10;break e;case Se:o=9;break e;case Ie:o=11;break e;case Ne:o=14;break e;case Pe:o=16,r=null;break e}throw Error(re(130,null==e?e:typeof e,""))}return(t=Nu(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Lu(e,t,n,r){return(e=Nu(7,e,r,t)).lanes=n,e}function Au(e,t,n,r){return(e=Nu(22,e,r,t)).elementType=Re,e.lanes=n,e.stateNode={isHidden:!1},e}function Ou(e,t,n){return(e=Nu(6,e,null,t)).lanes=n,e}function Mu(e,t,n){return(t=Nu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mn(0),this.expirationTimes=mn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mn(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fu(e,t,n,r,i,s,o,a,l){return e=new ju(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Nu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(s),e}function Uu(e){if(!e)return Ss;e:{if(zt(e=e._reactInternals)!==e||1!==e.tag)throw Error(re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ps(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(re(171))}if(1===e.tag){var n=e.type;if(Ps(n))return Ls(e,n,t)}return t}function zu(e,t,n,r,i,s,o,a,l){return(e=Fu(n,r,!0,e,0,s,0,a,l)).context=Uu(null),n=e.current,(s=jo(r=Xc(),i=Zc(n))).callback=null!=t?t:null,Fo(n,s,i),e.current.lanes=i,gn(e,i,r),tu(e,r),e}function Bu(e,t,n,r){var i=t.current,s=Xc(),o=Zc(i);return n=Uu(n),null===t.context?t.context=n:t.pendingContext=n,(t=jo(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fo(i,t,o))&&(eu(e,i,o,s),Uo(e,i,o)),o}function $u(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qu(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}wc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Es.current)yl=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return yl=!1,function(e,t,n){switch(t.tag){case 3:El(t),ho();break;case 5:Yo(t);break;case 1:Ps(t.type)&&As(t);break;case 4:Ko(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Cs(wo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Cs(Xo,1&Xo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ol(e,t,n):(Cs(Xo,1&Xo.current),null!==(e=$l(e,t,n))?e.sibling:null);Cs(Xo,1&Xo.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return zl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Cs(Xo,Xo.current),r)break;return null;case 22:case 23:return t.lanes=0,kl(e,t,n)}return $l(e,t,n)}(e,t,n);yl=!!(131072&e.flags)}else yl=!1,no&&1048576&t.flags&&Js(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bl(e,t),e=t.pendingProps;var i=Ns(t,Is.current);xo(t,n),i=pa(null,t,r,e,i,n);var s=ma();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ps(r)?(s=!0,As(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(t),i.updater=nl,t.stateNode=i,i._reactInternals=t,ol(t,r,e,n),t=Il(null,t,r,!0,s,n)):(t.tag=0,no&&s&&Xs(t),_l(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bl(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Pu(e)?1:0;if(null!=e){if((e=e.$$typeof)===Ie)return 11;if(e===Ne)return 14}return 2}(r),e=el(r,e),i){case 0:t=Cl(null,t,r,e,n);break e;case 1:t=Sl(null,t,r,e,n);break e;case 11:t=vl(null,t,r,e,n);break e;case 14:t=bl(null,t,r,el(r.type,e),n);break e}throw Error(re(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cl(e,t,r,i=t.elementType===r?i:el(r,i),n);case 1:return r=t.type,i=t.pendingProps,Sl(e,t,r,i=t.elementType===r?i:el(r,i),n);case 3:e:{if(El(t),null===e)throw Error(re(387));r=t.pendingProps,i=(s=t.memoizedState).element,Mo(e,t),Bo(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=xl(e,t,r,n,i=al(Error(re(423)),t));break e}if(r!==i){t=xl(e,t,r,n,i=al(Error(re(424)),t));break e}for(to=as(t.stateNode.containerInfo.firstChild),eo=t,no=!0,ro=null,n=bo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ho(),r===i){t=$l(e,t,n);break e}_l(e,t,r,n)}t=t.child}return t;case 5:return Yo(t),null===e&&ao(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,es(r,i)?o=null:null!==s&&es(r,s)&&(t.flags|=32),Tl(e,t),_l(e,t,o,n),t.child;case 6:return null===e&&ao(t),null;case 13:return Ol(e,t,n);case 4:return Ko(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=vo(t,null,r,n):_l(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,vl(e,t,r,i=t.elementType===r?i:el(r,i),n);case 7:return _l(e,t,t.pendingProps,n),t.child;case 8:case 12:return _l(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Cs(wo,r._currentValue),r._currentValue=o,null!==s)if(si(s.value,o)){if(s.children===i.children&&!Es.current){t=$l(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var a=s.dependencies;if(null!==a){o=s.child;for(var l=a.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=jo(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Eo(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(re(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),Eo(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}_l(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xo(t,n),r=r(i=No(i)),t.flags|=1,_l(e,t,r,n),t.child;case 14:return i=el(r=t.type,t.pendingProps),bl(e,t,r,i=el(r.type,i),n);case 15:return wl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:el(r,i),Bl(e,t),t.tag=1,Ps(r)?(e=!0,As(t)):e=!1,xo(t,n),il(t,r,i),ol(t,r,i,n),Il(null,t,r,!0,e,n);case 19:return zl(e,t,n);case 22:return kl(e,t,n)}throw Error(re(156,t.tag))};var Vu="function"==typeof reportError?reportError:function(e){console.error(e)};function Hu(e){this._internalRoot=e}function Gu(e){this._internalRoot=e}function Ku(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yu(){}function Ju(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var e=$u(o);a.call(e)}}Bu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=$u(o);s.call(e)}}var o=zu(t,r,e,0,null,!1,0,"",Yu);return e._reactRootContainer=o,e[hs]=o.current,zi(8===e.nodeType?e.parentNode:e),lu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var a=r;r=function(){var e=$u(l);a.call(e)}}var l=Fu(e,0,!1,null,0,!1,0,"",Yu);return e._reactRootContainer=l,e[hs]=l.current,zi(8===e.nodeType?e.parentNode:e),lu(function(){Bu(t,l,n,r)}),l}(n,t,e,i,r);return $u(o)}Gu.prototype.render=Hu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(re(409));Bu(e,t,null,null)},Gu.prototype.unmount=Hu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lu(function(){Bu(null,e,null,null)}),t[hs]=null}},Gu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dn.length&&0!==t&&t<Dn[n].priority;n++);Dn.splice(n,0,e),0===n&&Mn(e)}},bn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=un(t.pendingLanes);0!==n&&(yn(t,1|n),tu(t,Qt()),!(6&Ic)&&(zc=Qt()+500,zs()))}break;case 13:lu(function(){var t=Lo(e,1);if(null!==t){var n=Xc();eu(t,e,1,n)}}),qu(e,1)}},wn=function(e){if(13===e.tag){var t=Lo(e,134217728);if(null!==t)eu(t,e,134217728,Xc());qu(e,134217728)}},kn=function(e){if(13===e.tag){var t=Zc(e),n=Lo(e,t);if(null!==n)eu(n,e,t,Xc());qu(e,t)}},Tn=function(){return _n},Cn=function(e,t){var n=_n;try{return _n=e,t()}finally{_n=n}},bt=function(e,t,n){switch(t){case"input":if(Ye(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=vs(r);if(!i)throw Error(re(90));Ve(r),Ye(r,i)}}}break;case"textarea":rt(e,n);break;case"select":null!=(t=n.value)&&et(e,!!n.multiple,t,!1)}},It=au,Et=lu;var Xu={usingClientEntryPoint:!1,Events:[ys,_s,vs,Ct,St,au]},Zu={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ed={bundleType:Zu.bundleType,version:Zu.version,rendererPackageName:Zu.rendererPackageName,rendererConfig:Zu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_e.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Wt(e))?null:e.stateNode},findFiberByHostInstance:Zu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{nn=td.inject(ed),rn=td}catch(lt){}}J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xu,J.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ku(t))throw Error(re(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:be,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},J.createRoot=function(e,t){if(!Ku(e))throw Error(re(299));var n=!1,r="",i=Vu;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fu(e,1,!1,null,0,n,0,r,i),e[hs]=t.current,zi(8===e.nodeType?e.parentNode:e),new Hu(t)},J.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(re(188));throw e=Object.keys(e).join(","),Error(re(268,e))}return e=null===(e=Wt(t))?null:e.stateNode},J.flushSync=function(e){return lu(e)},J.hydrate=function(e,t,n){if(!Qu(t))throw Error(re(200));return Ju(null,e,t,!0,n)},J.hydrateRoot=function(e,t,n){if(!Ku(e))throw Error(re(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Vu;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zu(t,null,e,1,null!=n?n:null,i,0,s,o),e[hs]=t.current,zi(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gu(t)},J.render=function(e,t,n){if(!Qu(t))throw Error(re(200));return Ju(null,e,t,!1,n)},J.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(re(40));return!!e._reactRootContainer&&(lu(function(){Ju(null,null,e,!1,function(){e._reactRootContainer=null,e[hs]=null})}),!0)},J.unstable_batchedUpdates=au,J.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(re(200));if(null==e||void 0===e._reactInternals)throw Error(re(38));return Ju(e,t,n,!1,r)},J.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Y.exports=J;var nd=Y.exports;Q.createRoot=nd.createRoot,Q.hydrateRoot=nd.hydrateRoot;const rd=530,id=265,sd=[20,1,18,4,13,6,10,15,2,17,3,19,7,16,8,11,14,9,12,5],od=10,ad=20,ld=119,cd=134,ud=200,dd=215,hd={170:"T20 T20 Bull",167:"T20 T19 Bull",164:"T20 T18 Bull",161:"T20 T17 Bull",160:"T20 T20 D20",158:"T20 T20 D19",157:"T20 T19 D20",156:"T20 T20 D18",155:"T20 T19 D19",154:"T20 T18 D20",153:"T20 T19 D18",152:"T20 T20 D16",151:"T20 T17 D20",150:"T20 T18 D18",149:"T20 T19 D16",148:"T20 T20 D14",147:"T20 T17 D18",146:"T20 T18 D16",145:"T20 T19 D14",144:"T20 T20 D12",143:"T20 T17 D16",142:"T20 T14 D20",141:"T20 T19 D12",140:"T20 T20 D10",139:"T20 T13 D20",138:"T20 T18 D12",137:"T20 T19 D10",136:"T20 T20 D8",135:"T20 T17 D12",134:"T20 T14 D16",133:"T20 T19 D8",132:"T20 T16 D12",131:"T20 T13 D16",130:"T20 T18 D8",129:"T19 T16 D12",128:"T18 T14 D16",127:"T20 T17 D8",126:"T19 T19 D6",125:"T18 T19 D7",124:"T20 T14 D11",123:"T19 T16 D9",122:"T18 T18 D7",121:"T20 T11 D14",120:"T20 S20 D20",119:"T19 T12 D13",118:"T20 S18 D20",117:"T20 S17 D20",116:"T20 S16 D20",115:"T20 S15 D20",114:"T20 S14 D20",113:"T20 S13 D20",112:"T20 T12 D8",111:"T20 S11 D20",110:"T20 S10 D20",109:"T20 S9 D20",108:"T20 S8 D20",107:"T20 S7 D20",106:"T20 S6 D20",105:"T20 S5 D20",104:"T20 S4 D20",103:"T20 S3 D20",102:"T20 S2 D20",101:"T20 S1 D20",100:"T20 D20",99:"T19 S2 D20",98:"T20 D19",97:"T19 D20",96:"T20 D18",95:"T19 D19",94:"T18 D20",93:"T19 D18",92:"T20 D16",91:"T17 D20",90:"T18 D18",89:"T19 D16",88:"T20 D14",87:"T17 D18",86:"T18 D16",85:"T15 D20",84:"T20 D12",83:"T17 D16",82:"T14 D20",81:"T19 D12",80:"T20 D10",79:"T13 D20",78:"T18 D12",77:"T19 D10",76:"T20 D8",75:"T17 D12",74:"T14 D16",73:"T19 D8",72:"T16 D12",71:"T13 D16",70:"T18 D8",69:"T19 D6",68:"T20 D4",67:"T17 D8",66:"T10 D18",65:"T19 D4",64:"T16 D8",63:"T13 D12",62:"T10 D16",61:"T15 D8",60:"S20 D20",59:"S19 D20",58:"S18 D20",57:"S17 D20",56:"S16 D20",55:"S15 D20",54:"S14 D20",53:"S13 D20",52:"S12 D20",51:"S11 D20",50:"S10 D20",49:"S9 D20",48:"S8 D20",47:"S7 D20",46:"S6 D20",45:"S5 D20",44:"S4 D20",43:"S3 D20",42:"S2 D20",41:"S1 D20",40:"D20",38:"D19",36:"D18",34:"D17",32:"D16",30:"D15",28:"D14",26:"D13",24:"D12",22:"D11",20:"D10",18:"D9",16:"D8",14:"D7",12:"D6",10:"D5",8:"D4",6:"D3",4:"D2",2:"D1"},fd={CYAN:"cyan",MAGENTA:"magenta",GREEN:"green",ORANGE:"orange"},pd={id:"classic",name:"Classic",description:"Traditional dartboard appearance",colors:{segment1:"#0a0a0a",segment2:"#f5f0e8",double:"#b8232a",triple:"#0d6b2e",bullOuter:"#0d6b2e",bullInner:"#b8232a",wire:"#888888",numbers:"#f5f0e8",background:"#1a1a1a",frame:"#1a4a6e"},wireStyle:{width:1,glow:!1}},md={id:"neon_glow",name:"Neon Glow",description:"Dark board with glowing neon wires",colors:{segment1:"#0a0a12",segment2:"#1a1a28",double:"#2a0a1a",triple:"#0a1a1a",bullOuter:"#0a1a1a",bullInner:"#2a0a1a",wire:"#00ffff",numbers:"#00ffff",background:"#050508",frame:"#0a2a4a"},wireStyle:{width:1.2,glow:!0,glowColor:"rgba(0, 255, 255, 0.6)",glowIntensity:10}},gd={classic:pd,pro_wire:{id:"pro_wire",name:"Pro Wire",description:"Tournament style with thin metal wire dividers",colors:{segment1:"#0a0a0a",segment2:"#e8e4dc",double:"#c41e3a",triple:"#1a8b45",bullOuter:"#1a8b45",bullInner:"#c41e3a",wire:"#d4d4d4",numbers:"#ffffff",background:"#1a1a1a",frame:"#2a5a8e"},wireStyle:{width:.8,glow:!1}},neon_glow:md,gold_elite:{id:"gold_elite",name:"Gold Elite",description:"Premium golden accents",colors:{segment1:"#1a1408",segment2:"#2a2010",double:"#d4a03a",triple:"#e8b94a",bullOuter:"#d4a03a",bullInner:"#e8b94a",wire:"#d4a03a",numbers:"#d4a03a",background:"#0a0806",frame:"#3a2a1a"},wireStyle:{width:1,glow:!0,glowColor:"rgba(212, 160, 58, 0.4)",glowIntensity:5},premiumOnly:!0},stealth:{id:"stealth",name:"Stealth",description:"Dark minimal look",colors:{segment1:"#0a0a0a",segment2:"#1a1a1a",double:"#2a2a2a",triple:"#3a3a3a",bullOuter:"#2a2a2a",bullInner:"#3a3a3a",wire:"#4a4a4a",numbers:"#6a6a6a",background:"#050505",frame:"#1a1a1a"},wireStyle:{width:.5,glow:!1}}};const yd=({theme:e=pd,dartPositions:t=[],aimPosition:n=null,aimWobble:r={x:0,y:0},showAimCursor:i=!1,onBoardClick:s,onBoardMove:o,onBoardLeave:a,onPointerDown:l,onPointerUp:c,onPointerCancel:u,onPointerLeave:d,onContextMenu:h,disabled:f=!1,className:p=""})=>{const m=e.colors,g=e.wireStyle,y=U.useMemo(()=>{const e=[];return sd.forEach((t,n)=>{const r=(18*n-9-90)*Math.PI/180,i=(18*n+9-90)*Math.PI/180,s=n%2==0,o=s?m.segment1:m.segment2,a=s?m.double:m.triple,l=id+ad*Math.cos(r),c=id+ad*Math.sin(r),u=id+ad*Math.cos(i),d=id+ad*Math.sin(i),h=id+ld*Math.cos(r),f=id+ld*Math.sin(r),p=id+ld*Math.cos(i),g=id+ld*Math.sin(i);e.push(K.jsx("path",{d:`M ${l} ${c}\n              A 20 20 0 0 1 ${u} ${d}\n              L ${p} ${g}\n              A 119 119 0 0 0 ${h} ${f}\n              Z`,fill:o},`single-inner-${n}`));const y=id+ld*Math.cos(r),_=id+ld*Math.sin(r),v=id+ld*Math.cos(i),b=id+ld*Math.sin(i),w=id+cd*Math.cos(r),k=id+cd*Math.sin(r),T=id+cd*Math.cos(i),C=id+cd*Math.sin(i);e.push(K.jsx("path",{d:`M ${y} ${_}\n              A 119 119 0 0 1 ${v} ${b}\n              L ${T} ${C}\n              A 134 134 0 0 0 ${w} ${k}\n              Z`,fill:a},`triple-${n}`));const S=id+cd*Math.cos(r),I=id+cd*Math.sin(r),E=id+cd*Math.cos(i),x=id+cd*Math.sin(i),N=id+ud*Math.cos(r),P=id+ud*Math.sin(r),R=id+ud*Math.cos(i),D=id+ud*Math.sin(i);e.push(K.jsx("path",{d:`M ${S} ${I}\n              A 134 134 0 0 1 ${E} ${x}\n              L ${R} ${D}\n              A 200 200 0 0 0 ${N} ${P}\n              Z`,fill:o},`single-outer-${n}`));const L=id+ud*Math.cos(r),A=id+ud*Math.sin(r),O=id+ud*Math.cos(i),M=id+ud*Math.sin(i),j=id+dd*Math.cos(r),F=id+dd*Math.sin(r),U=id+dd*Math.cos(i),z=id+dd*Math.sin(i);e.push(K.jsx("path",{d:`M ${L} ${A}\n              A 200 200 0 0 1 ${O} ${M}\n              L ${U} ${z}\n              A 215 215 0 0 0 ${j} ${F}\n              Z`,fill:a},`double-${n}`))}),e},[m]),_=U.useMemo(()=>{const e=[],t=m.wire,n=g.width;sd.forEach((r,i)=>{const s=(18*i-9-90)*Math.PI/180,o=id+ad*Math.cos(s),a=id+ad*Math.sin(s),l=id+dd*Math.cos(s),c=id+dd*Math.sin(s);e.push(K.jsx("line",{x1:o,y1:a,x2:l,y2:c,stroke:t,strokeWidth:n},`wire-radial-${i}`))});return[ad,ld,cd,ud,dd].forEach((r,i)=>{e.push(K.jsx("circle",{cx:id,cy:id,r:r,fill:"none",stroke:t,strokeWidth:n},`wire-circle-${i}`))}),e},[m.wire,g.width]),v=U.useMemo(()=>{const e=[];return sd.forEach((t,n)=>{const r=(18*n-90)*Math.PI/180,i=id+248*Math.cos(r),s=id+248*Math.sin(r);e.push(K.jsx("text",{x:i,y:s,fill:m.numbers,fontSize:"16",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"middle",style:{fontFamily:"'Oswald', sans-serif"},children:t},`number-${n}`))}),e},[m.numbers]),b=U.useCallback(e=>{if(f)return;const t=e.currentTarget.getBoundingClientRect();let n,r;if("touches"in e){if(0===e.touches.length)return;n=e.touches[0].clientX,r=e.touches[0].clientY}else n=e.clientX,r=e.clientY;return{x:(n-t.left)/t.width*rd,y:(r-t.top)/t.height*rd}},[f]),w=U.useCallback(e=>{const t=b(e);t&&s&&s(t.x,t.y)},[b,s]),k=U.useCallback(e=>{const t=b(e);t&&o&&o(t.x,t.y)},[b,o]),T=U.useCallback(e=>{e.preventDefault();const t=b(e);t&&o&&o(t.x,t.y)},[b,o]);return K.jsxs("svg",{viewBox:"0 0 530 530",className:`dartboard ${p}`,onClick:w,onMouseMove:k,onMouseLeave:a,onTouchMove:T,onTouchEnd:a,onPointerDown:l,onPointerUp:c,onPointerCancel:u,onPointerLeave:d,onContextMenu:h,style:{width:"100%",maxWidth:"500px",cursor:f?"default":"crosshair",touchAction:"none"},children:[y,K.jsx("circle",{cx:id,cy:id,r:ad,fill:m.bullOuter}),K.jsx("circle",{cx:id,cy:id,r:od,fill:m.bullInner}),K.jsxs("g",{style:{filter:g.glow?`drop-shadow(0 0 ${g.glowIntensity||5}px ${g.glowColor||m.wire})`:void 0},children:[_,K.jsx("circle",{cx:id,cy:id,r:od,fill:"none",stroke:m.wire,strokeWidth:g.width})]}),K.jsx("circle",{cx:id,cy:id,r:226.5,fill:"none",stroke:m.frame,strokeWidth:17}),v,i&&n&&K.jsxs("g",{children:[K.jsx("circle",{cx:n.x+r.x,cy:n.y+r.y,r:8,fill:"none",stroke:"rgba(255, 255, 255, 0.8)",strokeWidth:"2"}),K.jsx("circle",{cx:n.x+r.x,cy:n.y+r.y,r:2,fill:"rgba(255, 255, 255, 0.9)"})]}),t.map(e=>K.jsxs("g",{children:[K.jsx("circle",{cx:e.x+2,cy:e.y+2,r:6,fill:"rgba(0, 0, 0, 0.3)"}),K.jsx("circle",{cx:e.x,cy:e.y,r:5,fill:"#ff4444",stroke:"#cc0000",strokeWidth:"1"}),K.jsx("circle",{cx:e.x,cy:e.y,r:2,fill:"#ffcc00"})]},e.id))]})},_d=({players:e,currentPlayerIndex:t,dartsThrown:n,currentTurnScore:r,checkout:i=null,legScores:s=[],setScores:o=[],gameStats:a={},showStats:l=!1})=>{const c=e[t];return K.jsxs("div",{className:"score-display",children:[K.jsx("div",{className:"score-display__players",children:e.map((e,n)=>{const r=n===t,i=a[e.id];return K.jsxs("div",{className:"score-display__player "+(r?"score-display__player--active":""),children:[K.jsxs("div",{className:"score-display__player-header",children:[K.jsx("span",{className:"score-display__flag",children:e.flag}),K.jsx("span",{className:"score-display__name",children:e.name}),e.isAI&&K.jsx("span",{className:"score-display__ai-badge",children:"AI"})]}),K.jsx("div",{className:"score-display__score",children:e.score}),(s.length>0||o.length>0)&&K.jsxs("div",{className:"score-display__match-score",children:[K.jsxs("span",{className:"score-display__legs",children:["Legs: ",s[n]||0]}),o.length>0&&K.jsxs("span",{className:"score-display__sets",children:["Sets: ",o[n]||0]})]}),l&&i&&K.jsxs("div",{className:"score-display__stats",children:[K.jsxs("div",{className:"score-display__stat",children:[K.jsx("span",{className:"score-display__stat-label",children:"Avg"}),K.jsx("span",{className:"score-display__stat-value",children:i.dartsThrown>0?(i.totalScore/i.dartsThrown*3).toFixed(1):"0.0"})]}),K.jsxs("div",{className:"score-display__stat",children:[K.jsx("span",{className:"score-display__stat-label",children:"High"}),K.jsx("span",{className:"score-display__stat-value",children:i.highest3DartScore})]})]})]},e.id)})}),K.jsxs("div",{className:"score-display__turn-info",children:[K.jsxs("div",{className:"score-display__darts",children:[K.jsx("span",{className:"score-display__darts-label",children:"Darts"}),K.jsx("div",{className:"score-display__darts-indicators",children:[0,1,2].map(e=>K.jsx("span",{className:"score-display__dart-indicator "+(e<n?"score-display__dart-indicator--thrown":"")},e))})]}),K.jsxs("div",{className:"score-display__turn-score",children:[K.jsx("span",{className:"score-display__turn-score-label",children:"Turn"}),K.jsx("span",{className:"score-display__turn-score-value",children:r})]})]}),i&&c&&c.score<=170&&K.jsxs("div",{className:"score-display__checkout",children:[K.jsx("span",{className:"score-display__checkout-label",children:"Checkout"}),K.jsx("span",{className:"score-display__checkout-route",children:i})]})]})};function vd(e,t){return e>50-t/2&&e<50+t/2}const bd=({power:e,isCharging:t,perfectZoneWidth:n,className:r=""})=>{const i=vd(e,n),s=50-n/2,o=U.useMemo(()=>i?"var(--color-success)":e<30||e>70?"var(--color-error)":"var(--color-accent)",[e,i]),a=U.useMemo(()=>n<10?` (-${Math.round(10-n)}%)`:"",[n]);return K.jsxs("div",{className:`power-bar power-bar--horizontal ${r}`,children:[K.jsxs("div",{className:"power-bar__track",children:[K.jsx("div",{className:"power-bar__perfect-zone",style:{left:`${s}%`,width:`${n}%`}}),K.jsx("div",{className:"power-bar__center-line"}),K.jsx("div",{className:"power-bar__fill "+(i?"power-bar__fill--perfect":""),style:{width:`${e}%`,backgroundColor:o,transition:t?"none":"width 0.2s"}})]}),K.jsxs("div",{className:"power-bar__labels",children:[K.jsx("span",{className:"power-bar__label--weak",children:"WEAK"}),K.jsxs("span",{className:"power-bar__label--perfect",children:["PERFECT",a]}),K.jsx("span",{className:"power-bar__label--strong",children:"STRONG"})]}),i&&t&&K.jsx("div",{className:"power-bar__perfect-feedback",children:"PERFECT!"})]})},wd={flow:{label:"IN THE ZONE!",icon:""},perfect:{label:"PERFECT RHYTHM",icon:""},neutral:{label:"",icon:""},rushing:{label:"SLOW DOWN",icon:""},hesitating:{label:"KEEP MOVING",icon:""}};function kd({state:e}){if("neutral"===e)return null;const t=wd[e];return K.jsxs("div",{className:`rhythm-indicator rhythm-indicator--${e}`,children:[K.jsx("span",{className:"rhythm-indicator__icon",children:t.icon}),K.jsx("span",{className:"rhythm-indicator__label",children:t.label})]})}function Td(e,t){const n=e-id,r=t-id,i=Math.sqrt(n*n+r*r);if(i>dd)return{score:0,multiplier:0,segment:"MISS",position:{x:e,y:t},isBust:!1};if(i<=od)return{score:50,multiplier:2,segment:"BULL",position:{x:e,y:t},isBust:!1};if(i<=ad)return{score:25,multiplier:1,segment:"25",position:{x:e,y:t},isBust:!1};let s=Math.atan2(r,n)*(180/Math.PI)+90;s<0&&(s+=360);const o=Math.floor((s+9)/18)%20,a=sd[o];return i>=ud&&i<=dd?{score:2*a,multiplier:2,segment:`D${a}`,position:{x:e,y:t},isBust:!1}:i>=ld&&i<=cd?{score:3*a,multiplier:3,segment:`T${a}`,position:{x:e,y:t},isBust:!1}:{score:a,multiplier:1,segment:`${a}`,position:{x:e,y:t},isBust:!1}}function Cd(e,t=1){const n=sd.indexOf(e);if(-1===n)return{x:id,y:id};const r=(18*n-90)*Math.PI/180;let i;return i=3===t?126.5:2===t?207.5:167,{x:id+i*Math.cos(r),y:id+i*Math.sin(r)}}function Sd(e){return 50===e?"BULL":e%2==0&&e>=2&&e<=40?"D"+e/2:null}const Id=sd,Ed={BULL:{inner:0,outer:od},OUTER_BULL:{inner:od,outer:ad},INNER_SINGLE:{inner:ad,outer:ld},TRIPLE:{inner:ld,outer:cd},OUTER_SINGLE:{inner:cd,outer:ud},DOUBLE:{inner:ud,outer:dd},MISS:{inner:dd,outer:265}};function xd(e){return Id.indexOf(e)}function Nd(e,t=1){const n=xd(e);if(-1===n)return[];return[Id[(n-t+20)%20],Id[(n+t)%20]]}function Pd(e,t){const n=[];for(let r=1;r<=t;r++){const t=Nd(e,r);for(const e of t)n.push({number:e,distance:r})}return n}function Rd(e,t){const n=e-id,r=t-id,i=function(e){return e<=od?"BULL":e<=ad?"OUTER_BULL":e<=ld?"INNER_SINGLE":e<=cd?"TRIPLE":e<=ud?"OUTER_SINGLE":e<=dd?"DOUBLE":"MISS"}(Math.sqrt(n*n+r*r));if("BULL"===i||"OUTER_BULL"===i||"MISS"===i)return{ring:i};const s=function(e){let t=180*e/Math.PI+90;t<0&&(t+=360);const n=Math.floor((t+9)/18)%20;return Id[n]}(Math.atan2(r,n));return{ring:i,number:s}}const Dd=18*Math.PI/180;function Ld(e,t){const n=Ed[e.ring],r=n.inner*n.inner,i=n.outer*n.outer,s=t(),o=Math.min(1-1e-9,Math.max(1e-9,s)),a=Math.sqrt(r+o*(i-r));let l;if("BULL"===e.ring||"OUTER_BULL"===e.ring)l=2*t()*Math.PI;else if("MISS"===e.ring)l=2*t()*Math.PI;else{l=function(e){const t=xd(e);return-1===t?0:(18*t-90)*Math.PI/180}(e.number)+(t()-.5)*Dd}return{x:id+a*Math.cos(l),y:id+a*Math.sin(l)}}function Ad(e,t){return e.ring===t.ring&&e.number===t.number}function Od(e){if("BULL"===e.ring)return"BULL";if("OUTER_BULL"===e.ring)return"25";if("MISS"===e.ring)return"MISS";return`${{TRIPLE:"T",DOUBLE:"D",INNER_SINGLE:"S",OUTER_SINGLE:"S"}[e.ring]}${e.number}`}function Md(e,t,n){if("MISS"===e.ring)return[{segment:{ring:"MISS"},weight:100}];let r;switch(e.ring){case"BULL":r=function(e){const t=[];if("slight"===e){t.push({segment:{ring:"OUTER_BULL"},weight:60});for(const e of Id)t.push({segment:{ring:"INNER_SINGLE",number:e},weight:2})}else if("medium"===e){t.push({segment:{ring:"OUTER_BULL"},weight:30});for(const e of Id)t.push({segment:{ring:"INNER_SINGLE",number:e},weight:3});for(const e of Id)t.push({segment:{ring:"TRIPLE",number:e},weight:1})}else if("wide"===e){t.push({segment:{ring:"MISS"},weight:8}),t.push({segment:{ring:"OUTER_BULL"},weight:15});for(const e of Id)t.push({segment:{ring:"INNER_SINGLE",number:e},weight:2}),t.push({segment:{ring:"TRIPLE",number:e},weight:1})}else{t.push({segment:{ring:"MISS"},weight:15}),t.push({segment:{ring:"OUTER_BULL"},weight:10});for(const e of Id)t.push({segment:{ring:"INNER_SINGLE",number:e},weight:2}),t.push({segment:{ring:"TRIPLE",number:e},weight:1}),t.push({segment:{ring:"OUTER_SINGLE",number:e},weight:1})}return t}(t);break;case"OUTER_BULL":r=function(e){const t=[];if("slight"===e){t.push({segment:{ring:"BULL"},weight:25});for(const e of Id)t.push({segment:{ring:"INNER_SINGLE",number:e},weight:4})}else if("medium"===e){t.push({segment:{ring:"BULL"},weight:15});for(const e of Id)t.push({segment:{ring:"INNER_SINGLE",number:e},weight:3}),t.push({segment:{ring:"TRIPLE",number:e},weight:1})}else if("wide"===e){t.push({segment:{ring:"MISS"},weight:6}),t.push({segment:{ring:"BULL"},weight:10});for(const e of Id)t.push({segment:{ring:"INNER_SINGLE",number:e},weight:2}),t.push({segment:{ring:"TRIPLE",number:e},weight:2})}else{t.push({segment:{ring:"MISS"},weight:15}),t.push({segment:{ring:"BULL"},weight:5});for(const e of Id)t.push({segment:{ring:"INNER_SINGLE",number:e},weight:2}),t.push({segment:{ring:"TRIPLE",number:e},weight:1}),t.push({segment:{ring:"OUTER_SINGLE",number:e},weight:1})}return t}(t);break;case"TRIPLE":r=function(e,t,n){const r=[],i=e.number,[s,o]=Nd(i,1),[a,l]=Nd(i,2);let c,u;if("weak"===n?(c=28,u=17):"strong"===n?(c=17,u=28):(c=22,u=23),"slight"===t)r.push({segment:{ring:"INNER_SINGLE",number:i},weight:c}),r.push({segment:{ring:"OUTER_SINGLE",number:i},weight:u}),r.push({segment:{ring:"TRIPLE",number:s},weight:28}),r.push({segment:{ring:"TRIPLE",number:o},weight:27});else if("medium"===t)r.push({segment:{ring:"INNER_SINGLE",number:i},weight:Math.max(0,c-7)}),r.push({segment:{ring:"OUTER_SINGLE",number:i},weight:Math.max(0,u-7)}),r.push({segment:{ring:"TRIPLE",number:s},weight:20}),r.push({segment:{ring:"TRIPLE",number:o},weight:20}),r.push({segment:{ring:"TRIPLE",number:a},weight:10}),r.push({segment:{ring:"TRIPLE",number:l},weight:10}),r.push({segment:{ring:"INNER_SINGLE",number:s},weight:5}),r.push({segment:{ring:"INNER_SINGLE",number:o},weight:5});else if("wide"===t){r.push({segment:{ring:"MISS"},weight:5}),r.push({segment:{ring:"INNER_SINGLE",number:i},weight:Math.max(0,c-12)}),r.push({segment:{ring:"OUTER_SINGLE",number:i},weight:Math.max(0,u-12)});const e=Pd(i,3);for(const{number:t,distance:n}of e){const e=1===n?12:2===n?8:5;r.push({segment:{ring:"TRIPLE",number:t},weight:e}),r.push({segment:{ring:"INNER_SINGLE",number:t},weight:Math.floor(e/2)})}}else{r.push({segment:{ring:"MISS"},weight:18}),r.push({segment:{ring:"INNER_SINGLE",number:i},weight:5}),r.push({segment:{ring:"OUTER_SINGLE",number:i},weight:5});const e=Pd(i,4);for(const{number:t,distance:n}of e){const e=1===n?10:2===n?7:3===n?5:3;r.push({segment:{ring:"TRIPLE",number:t},weight:e}),r.push({segment:{ring:"INNER_SINGLE",number:t},weight:Math.floor(e/2)}),r.push({segment:{ring:"OUTER_SINGLE",number:t},weight:Math.floor(e/2)})}}return r}(e,t,n);break;case"DOUBLE":r=function(e,t,n){const r=[],i=e.number,[s,o]=Nd(i,1),[a,l]=Nd(i,2),c="strong"===n?8:0;if("slight"===t)r.push({segment:{ring:"OUTER_SINGLE",number:i},weight:70}),r.push({segment:{ring:"DOUBLE",number:s},weight:15}),r.push({segment:{ring:"DOUBLE",number:o},weight:15});else if("medium"===t)r.push({segment:{ring:"OUTER_SINGLE",number:i},weight:50}),r.push({segment:{ring:"DOUBLE",number:s},weight:12}),r.push({segment:{ring:"DOUBLE",number:o},weight:12}),r.push({segment:{ring:"OUTER_SINGLE",number:s},weight:10}),r.push({segment:{ring:"OUTER_SINGLE",number:o},weight:10}),r.push({segment:{ring:"MISS"},weight:6+c});else if("wide"===t)r.push({segment:{ring:"MISS"},weight:8+c}),r.push({segment:{ring:"OUTER_SINGLE",number:i},weight:35}),r.push({segment:{ring:"DOUBLE",number:s},weight:10}),r.push({segment:{ring:"DOUBLE",number:o},weight:10}),r.push({segment:{ring:"DOUBLE",number:a},weight:5}),r.push({segment:{ring:"DOUBLE",number:l},weight:5}),r.push({segment:{ring:"OUTER_SINGLE",number:s},weight:10}),r.push({segment:{ring:"OUTER_SINGLE",number:o},weight:10}),r.push({segment:{ring:"TRIPLE",number:i},weight:Math.max(0,7-(c>0?4:0))});else{r.push({segment:{ring:"MISS"},weight:18+c}),r.push({segment:{ring:"OUTER_SINGLE",number:i},weight:20});const e=Pd(i,4);for(const{number:t,distance:n}of e){const e=1===n?8:2===n?5:3===n?3:2;r.push({segment:{ring:"DOUBLE",number:t},weight:e}),r.push({segment:{ring:"OUTER_SINGLE",number:t},weight:e})}}return r}(e,t,n);break;case"INNER_SINGLE":case"OUTER_SINGLE":r=function(e,t,n){const r=[],i=e.number,s="INNER_SINGLE"===e.ring,[o,a]=Nd(i,1),[l,c]=Nd(i,2);let u,d;if("weak"===n?(u=25,d=15):"strong"===n?(u=15,d=25):(u=20,d=20),"slight"===t)s?(r.push({segment:{ring:"OUTER_BULL"},weight:u}),r.push({segment:{ring:"TRIPLE",number:i},weight:d})):(r.push({segment:{ring:"TRIPLE",number:i},weight:u}),r.push({segment:{ring:"DOUBLE",number:i},weight:d})),r.push({segment:{ring:e.ring,number:o},weight:20}),r.push({segment:{ring:e.ring,number:a},weight:20});else if("medium"===t)s?(r.push({segment:{ring:"OUTER_BULL"},weight:Math.max(0,u-5)}),r.push({segment:{ring:"TRIPLE",number:i},weight:Math.max(0,d-5)})):(r.push({segment:{ring:"TRIPLE",number:i},weight:Math.max(0,u-5)}),r.push({segment:{ring:"DOUBLE",number:i},weight:Math.max(0,d-5)})),r.push({segment:{ring:e.ring,number:o},weight:18}),r.push({segment:{ring:e.ring,number:a},weight:18}),r.push({segment:{ring:e.ring,number:l},weight:10}),r.push({segment:{ring:e.ring,number:c},weight:10}),r.push({segment:{ring:"MISS"},weight:4});else if("wide"===t){r.push({segment:{ring:"MISS"},weight:6}),s?(r.push({segment:{ring:"OUTER_BULL"},weight:Math.max(0,u-8)}),r.push({segment:{ring:"TRIPLE",number:i},weight:Math.max(0,d-8)})):(r.push({segment:{ring:"TRIPLE",number:i},weight:Math.max(0,u-8)}),r.push({segment:{ring:"DOUBLE",number:i},weight:Math.max(0,d-8)}));const t=Pd(i,3);for(const{number:n,distance:i}of t){const t=1===i?12:2===i?8:5;r.push({segment:{ring:e.ring,number:n},weight:t})}}else{r.push({segment:{ring:"MISS"},weight:16}),s?(r.push({segment:{ring:"OUTER_BULL"},weight:8}),r.push({segment:{ring:"TRIPLE",number:i},weight:8})):(r.push({segment:{ring:"TRIPLE",number:i},weight:8}),r.push({segment:{ring:"DOUBLE",number:i},weight:8}));const t=Pd(i,4);for(const{number:n,distance:i}of t){const t=1===i?8:2===i?5:3===i?3:2;r.push({segment:{ring:e.ring,number:n},weight:t}),s?r.push({segment:{ring:"TRIPLE",number:n},weight:Math.floor(t/2)}):r.push({segment:{ring:"DOUBLE",number:n},weight:Math.floor(t/2)})}}return r}(e,t,n);break;default:r=[{segment:{ring:"MISS"},weight:100}]}return r.filter(t=>!Ad(t.segment,e)&&t.weight>0)}function jd(e,t){if(0===e.length)return{ring:"MISS"};const n=e.reduce((e,t)=>e+t.weight,0);if(n<=0)return{ring:"MISS"};const r=t()*n;let i=0;for(const s of e)if(i+=s.weight,r<i)return s.segment;return e[e.length-1].segment}const Fd={skill180Threshold:81,skillCheckoutThreshold:41,wobbleAmount:8,wobbleInterval:50,aimTolerancePx:30};function Ud(e){return 50===e||e>=2&&e<=40&&e%2==0}function zd(e,t,n){if(!Ud(t))return!1;const r=function(e){if(50===e)return{x:id,y:id};const t=e/2,n=sd.indexOf(t);if(-1===n)return null;const r=(18*n-90)*Math.PI/180;return{x:id+207.5*Math.cos(r),y:id+207.5*Math.sin(r)}}(t);if(!r)return!1;const i=e.x-r.x,s=e.y-r.y;return Math.sqrt(i*i+s*s)<n}var Bd={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="${JSCORE_VERSION}",Wd=function(e,t){if(!e)throw qd(t)},qd=function(e){return new Error("Firebase Database ("+$d+") INTERNAL ASSERT FAILED: "+e)},Vd=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Hd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Vd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Gd;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kd=function(e){const t=Vd(e);return Hd.encodeByteArray(t,!0)},Qd=function(e){return Kd(e).replace(/\./g,"")},Yd=function(e){try{return Hd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Jd(e){return Xd(void 0,e)}function Xd(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&Zd(n)&&(e[n]=Xd(e[n],t[n]));return e}function Zd(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const eh=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,th=()=>{try{return eh()||(()=>{if("undefined"==typeof process)return;const e=Bd.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Yd(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},nh=e=>{var t,n;return null==(n=null==(t=th())?void 0:t.emulatorHosts)?void 0:n[e]},rh=e=>{const t=nh(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ih=()=>{var e;return null==(e=th())?void 0:e.config},sh=e=>{var t;return null==(t=th())?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class oh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lh(e){return(await fetch(e,{credentials:"include"})).ok}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch={};let uh=!1;function dh(e,t){if("undefined"==typeof window||"undefined"==typeof document||!ah(window.location.host)||ch[e]===t||ch[e]||uh)return;function n(e){return`__firebase__banner__${e}`}ch[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(ch))ch[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{uh=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fh(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hh())}function ph(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class mh extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,mh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gh.prototype.create)}}class gh{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(yh,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new mh(r,o,n)}}const yh=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(e){return JSON.parse(e)}function vh(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=_h(Yd(s[0])||""),n=_h(Yd(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function kh(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Th(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ch(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Sh(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Ih(n)&&Ih(s)){if(!Sh(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ih(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class Nh{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ph),void 0===r.error&&(r.error=Ph),void 0===r.complete&&(r.complete=Ph);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ph(){}function Rh(e,t){return`${e} failed: ${t} argument `}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Lh(e){return e&&e._delegate?e._delegate:e}class Ah{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new oh;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=(null==e?void 0:e.optional)??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:Oh})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=Oh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=Oh){return this.instances.has(e)}getOptions(e=Oh){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Oh?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}var r;return n||null}normalizeInstanceIdentifier(e=Oh){return this.component?this.component.multipleInstances?e:Oh:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class jh{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Mh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fh,Uh;(Uh=Fh||(Fh={}))[Uh.DEBUG=0]="DEBUG",Uh[Uh.VERBOSE=1]="VERBOSE",Uh[Uh.INFO=2]="INFO",Uh[Uh.WARN=3]="WARN",Uh[Uh.ERROR=4]="ERROR",Uh[Uh.SILENT=5]="SILENT";const zh={debug:Fh.DEBUG,verbose:Fh.VERBOSE,info:Fh.INFO,warn:Fh.WARN,error:Fh.ERROR,silent:Fh.SILENT},Bh=Fh.INFO,$h={[Fh.DEBUG]:"log",[Fh.VERBOSE]:"log",[Fh.INFO]:"info",[Fh.WARN]:"warn",[Fh.ERROR]:"error"},Wh=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=$h[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class qh{constructor(e){this.name=e,this._logLevel=Bh,this._logHandler=Wh,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fh))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?zh[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fh.DEBUG,...e),this._logHandler(this,Fh.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fh.VERBOSE,...e),this._logHandler(this,Fh.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fh.INFO,...e),this._logHandler(this,Fh.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fh.WARN,...e),this._logHandler(this,Fh.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fh.ERROR,...e),this._logHandler(this,Fh.ERROR,...e)}}let Vh,Hh;const Gh=new WeakMap,Kh=new WeakMap,Qh=new WeakMap,Yh=new WeakMap,Jh=new WeakMap;let Xh={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Kh.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Qh.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tf(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Zh(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Hh||(Hh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(nf(this),t),tf(Gh.get(this))}:function(...t){return tf(e.apply(nf(this),t))}:function(t,...n){const r=e.call(nf(this),t,...n);return Qh.set(r,t.sort?t.sort():[t]),tf(r)}}function ef(e){return"function"==typeof e?Zh(e):(e instanceof IDBTransaction&&function(e){if(Kh.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Kh.set(e,t)}(e),t=e,(Vh||(Vh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Xh):e);var t}function tf(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(tf(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Gh.set(t,e)}).catch(()=>{}),Jh.set(t,e),t}(e);if(Yh.has(e))return Yh.get(e);const t=ef(e);return t!==e&&(Yh.set(e,t),Jh.set(t,e)),t}const nf=e=>Jh.get(e);const rf=["get","getKey","getAll","getAllKeys","count"],sf=["put","add","delete","clear"],of=new Map;function af(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(of.get(t))return of.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=sf.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!rf.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return of.set(t,s),s}Xh=(e=>({...e,get:(t,n,r)=>af(t,n)||e.get(t,n,r),has:(t,n)=>!!af(t,n)||e.has(t,n)}))(Xh);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class lf{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const cf="@firebase/app",uf="0.14.7",df=new qh("@firebase/app"),hf="@firebase/app-compat",ff="@firebase/analytics-compat",pf="@firebase/analytics",mf="@firebase/app-check-compat",gf="@firebase/app-check",yf="@firebase/auth",_f="@firebase/auth-compat",vf="@firebase/database",bf="@firebase/data-connect",wf="@firebase/database-compat",kf="@firebase/functions",Tf="@firebase/functions-compat",Cf="@firebase/installations",Sf="@firebase/installations-compat",If="@firebase/messaging",Ef="@firebase/messaging-compat",xf="@firebase/performance",Nf="@firebase/performance-compat",Pf="@firebase/remote-config",Rf="@firebase/remote-config-compat",Df="@firebase/storage",Lf="@firebase/storage-compat",Af="@firebase/firestore",Of="@firebase/ai",Mf="@firebase/firestore-compat",jf="firebase",Ff="[DEFAULT]",Uf={[cf]:"fire-core",[hf]:"fire-core-compat",[pf]:"fire-analytics",[ff]:"fire-analytics-compat",[gf]:"fire-app-check",[mf]:"fire-app-check-compat",[yf]:"fire-auth",[_f]:"fire-auth-compat",[vf]:"fire-rtdb",[bf]:"fire-data-connect",[wf]:"fire-rtdb-compat",[kf]:"fire-fn",[Tf]:"fire-fn-compat",[Cf]:"fire-iid",[Sf]:"fire-iid-compat",[If]:"fire-fcm",[Ef]:"fire-fcm-compat",[xf]:"fire-perf",[Nf]:"fire-perf-compat",[Pf]:"fire-rc",[Rf]:"fire-rc-compat",[Df]:"fire-gcs",[Lf]:"fire-gcs-compat",[Af]:"fire-fst",[Mf]:"fire-fst-compat",[Of]:"fire-vertex","fire-js":"fire-js",[jf]:"fire-js-all"},zf=new Map,Bf=new Map,$f=new Map;function Wf(e,t){try{e.container.addComponent(t)}catch(n){df.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function qf(e){const t=e.name;if($f.has(t))return df.debug(`There were multiple attempts to register component ${t}.`),!1;$f.set(t,e);for(const n of zf.values())Wf(n,e);for(const n of Bf.values())Wf(n,e);return!0}function Vf(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Hf(e){return null!=e&&void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new gh("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Kf{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ah("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gf.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="12.8.0";function Yf(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r={name:Ff,automaticDataCollectionEnabled:!0,...t},i=r.name;if("string"!=typeof i||!i)throw Gf.create("bad-app-name",{appName:String(i)});if(n||(n=ih()),!n)throw Gf.create("no-options");const s=zf.get(i);if(s){if(Sh(n,s.options)&&Sh(r,s.config))return s;throw Gf.create("duplicate-app",{appName:i})}const o=new jh(i);for(const l of $f.values())o.addComponent(l);const a=new Kf(n,r,o);return zf.set(i,a),a}function Jf(e=Ff){const t=zf.get(e);if(!t&&e===Ff&&ih())return Yf();if(!t)throw Gf.create("no-app",{appName:e});return t}function Xf(e,t,n){let r=Uf[e]??e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${r}" with version "${t}":`];return i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void df.warn(e.join(" "))}qf(new Ah(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="firebase-heartbeat-store";let ep=null;function tp(){return ep||(ep=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=tf(o);return r&&o.addEventListener("upgradeneeded",e=>{r(tf(o.result),e.oldVersion,e.newVersion,tf(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Zf)}catch(n){console.warn(n)}}}).catch(e=>{throw Gf.create("idb-open",{originalErrorMessage:e.message})})),ep}async function np(e,t){try{const n=(await tp()).transaction(Zf,"readwrite"),r=n.objectStore(Zf);await r.put(t,rp(e)),await n.done}catch(n){if(n instanceof mh)df.warn(n.message);else{const e=Gf.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});df.warn(e.message)}}}function rp(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new op(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=sp();if(null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){df.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=sp(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ap(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ap(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Qd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return df.warn(t),""}}}function sp(){return(new Date).toISOString().substring(0,10)}class op{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null==(e=i.error)?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await tp()).transaction(Zf),n=await t.objectStore(Zf).get(rp(e));return await t.done,n}catch(t){if(t instanceof mh)df.warn(t.message);else{const e=Gf.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});df.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return np(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return np(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function ap(e){return Qd(JSON.stringify({version:2,heartbeats:e})).length}var lp;function cp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}lp="",qf(new Ah("platform-logger",e=>new lf(e),"PRIVATE")),qf(new Ah("heartbeat",e=>new ip(e),"PRIVATE")),Xf(cf,uf,lp),Xf(cf,uf,"esm2020"),Xf("fire-js","");const up=cp,dp=new gh("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),hp=new qh("@firebase/auth");function fp(e,...t){hp.logLevel<=Fh.ERROR&&hp.error(`Auth (${Qf}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(e,...t){throw _p(e,...t)}function mp(e,...t){return _p(e,...t)}function gp(e,t,n){const r={...up(),[t]:n};return new gh("auth","Firebase",r).create(t,{appName:e.name})}function yp(e){return gp(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _p(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return dp.create(e,...t)}function vp(e,t,...n){if(!e)throw _p(t,...n)}function bp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw fp(t),new Error(t)}function wp(e,t){e||bp(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.href)||""}function Tp(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Tp()&&"https:"!==Tp()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Sp{constructor(e,t){this.shortDelay=e,this.longDelay=t,wp(t>e,"Short delay should be less than long delay!"),this.isMobile=fh()||ph()}get(){return Cp()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(e,t){wp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void bp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void bp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void bp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Np=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Pp=new Sp(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Dp(e,t,n,r,i={}){return Lp(e,i,async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Eh({key:e.config.apiKey,...s}).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l={method:t,headers:a,...i};return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&ah(e.emulatorConfig.host)&&(l.credentials="include"),Ep.fetch()(await Op(e,e.config.apiHost,n,o),l)})}async function Lp(e,t,n){e._canInitEmulator=!1;const r={...xp,...t};try{const t=new Mp(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw jp(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw jp(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw jp(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw jp(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw gp(e,a,o);pp(e,a)}}catch(i){if(i instanceof mh)throw i;pp(e,"network-request-failed",{message:String(i)})}}async function Ap(e,t,n,r,i={}){const s=await Dp(e,t,n,r,i);return"mfaPendingCredential"in s&&pp(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Op(e,t,n,r){const i=`${t}${n}?${r}`,s=e,o=s.config.emulator?Ip(e.config,i):`${e.config.apiScheme}://${i}`;if(Np.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}class Mp{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(mp(this.auth,"network-request-failed")),Pp.get())})}}function jp(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mp(e,t,r);return i.customData._tokenResponse=n,i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fp(e,t){return Dp(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function zp(e){return 1e3*Number(e)}function Bp(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return fp("JWT malformed, contained fewer than 3 sections"),null;try{const e=Yd(n);return e?JSON.parse(e):(fp("Failed to decode base64 JWT payload"),null)}catch(i){return fp("Caught error parsing JWT payload as JSON",null==i?void 0:i.toString()),null}}function $p(e){const t=Bp(e);return vp(t,"internal-error"),vp(void 0!==t.exp,"internal-error"),vp(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wp(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof mh&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class qp{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Up(this.lastLoginAt),this.creationTime=Up(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hp(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Wp(e,Fp(n,{idToken:r}));vp(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null==(t=s.providerUserInfo)?void 0:t.length)?Gp(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Vp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Gp(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Kp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vp(e.idToken,"internal-error"),vp(void 0!==e.idToken,"internal-error"),vp(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):$p(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){vp(0!==e.length,"internal-error");const t=$p(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(vp(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Lp(e,{},async()=>{const n=Eh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Op(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&ah(e.emulatorConfig.host)&&(a.credentials="include"),Ep.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Kp;return n&&(vp("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(vp("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(vp("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kp,this.toJSON())}_performRefresh(){return bp("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(e,t){vp("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Yp{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new qp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Vp(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Wp(this,this.stsTokenManager.getToken(this.auth,e));return vp(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Lh(e),r=await n.getIdToken(t),i=Bp(r);vp(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Up(zp(i.auth_time)),issuedAtTime:Up(zp(i.iat)),expirationTime:Up(zp(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Lh(e);await Hp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(vp(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Yp({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){vp(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Hp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hf(this.auth.app))return Promise.reject(yp(this.auth));const e=await this.getIdToken();return await Wp(this,async function(e,t){return Dp(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,s=t.photoURL??void 0,o=t.tenantId??void 0,a=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:u,emailVerified:d,isAnonymous:h,providerData:f,stsTokenManager:p}=t;vp(u&&p,e,"internal-error");const m=Kp.fromJSON(this.name,p);vp("string"==typeof u,e,"internal-error"),Qp(n,e.name),Qp(r,e.name),vp("boolean"==typeof d,e,"internal-error"),vp("boolean"==typeof h,e,"internal-error"),Qp(i,e.name),Qp(s,e.name),Qp(o,e.name),Qp(a,e.name),Qp(l,e.name),Qp(c,e.name);const g=new Yp({uid:u,auth:e,email:r,emailVerified:d,displayName:n,isAnonymous:h,photoURL:s,phoneNumber:i,tenantId:o,stsTokenManager:m,createdAt:l,lastLoginAt:c});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),a&&(g._redirectEventId=a),g}static async _fromIdTokenResponse(e,t,n=!1){const r=new Kp;r.updateFromServerResponse(t);const i=new Yp({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Hp(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];vp(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Gp(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),o=new Kp;o.updateFromIdToken(n);const a=new Yp({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Vp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(a,l),a}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=new Map;function Xp(e){wp(e instanceof Function,"Expected a class definition");let t=Jp.get(e);return t?(wp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Jp.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Zp.type="NONE";const em=Zp;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(e,t,n){return`firebase:${e}:${t}:${n}`}class nm{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=tm(this.userKey,r.apiKey,i),this.fullPersistenceKey=tm("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){const t=await Fp(this.auth,{idToken:e}).catch(()=>{});return t?Yp._fromGetAccountInfoResponse(this.auth,t,e):null}return Yp._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new nm(Xp(em),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Xp(em);const s=tm(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){let n;if("string"==typeof t){const r=await Fp(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Yp._fromGetAccountInfoResponse(e,r,t)}else n=Yp._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch{}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch{}})),new nm(i,e,n)):new nm(i,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(am(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(im(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(cm(t))return"Blackberry";if(um(t))return"Webos";if(sm(t))return"Safari";if((t.includes("chrome/")||om(t))&&!t.includes("edge/"))return"Chrome";if(lm(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function im(e=hh()){return/firefox\//i.test(e)}function sm(e=hh()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function om(e=hh()){return/crios\//i.test(e)}function am(e=hh()){return/iemobile/i.test(e)}function lm(e=hh()){return/android/i.test(e)}function cm(e=hh()){return/blackberry/i.test(e)}function um(e=hh()){return/webos/i.test(e)}function dm(e=hh()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function hm(){return function(){const e=hh();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function fm(e=hh()){return dm(e)||lm(e)||um(e)||cm(e)||/windows phone/i.test(e)||am(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(e,t=[]){let n;switch(e){case"Browser":n=rm(hh());break;case"Worker":n=`${rm(hh())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qf}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){var t;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),void 0!==n.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),void 0!==n.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),void 0!==n.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),void 0!==n.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(null==(t=e.allowedNonAlphanumericCharacters)?void 0:t.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vm(this),this.idTokenSubscription=new vm(this),this.beforeStateQueue=new mm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dp,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xp(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await nm.create(this,e),null==(n=this._resolvePersistenceManagerAvailable)||n.call(this),!this._deleted)){if(null==(r=this._popupRedirectResolver)?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null==(i=this.currentUser)?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Fp(this,{idToken:e}),n=await Yp._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Hf(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null==(t=this.redirectUser)?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return vp(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hp(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hf(this.app))return Promise.reject(yp(this));const t=e?Lh(e):null;return t&&vp(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&vp(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hf(this.app)?Promise.reject(yp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hf(this.app)?Promise.reject(yp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xp(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return Dp(e,"GET","/v2/passwordPolicy",Rp(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new gm(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gh("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Dp(e,"POST","/v2/accounts:revokeToken",Rp(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null==(e=this._currentUser)?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xp(e)||this._popupRedirectResolver;vp(t,this,"argument-error"),this.redirectPersistenceManager=await nm.create(this,[Xp(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null==(t=this._currentUser)?void 0:t._redirectEventId)===e?this._currentUser:(null==(n=this.redirectUser)?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=(null==(e=this.currentUser)?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(vp(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vp(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null==(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Hf(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null==(e=this.appCheckServiceProvider.getImmediate({optional:!0}))?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){hp.logLevel<=Fh.WARN&&hp.warn(`Auth (${Qf}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function _m(e){return Lh(e)}class vm{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Nh(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return vp(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wm(e,t,n){const r=_m(e);vp(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=km(t),{host:s,port:o}=function(e){const t=km(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Tm(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Tm(t)}}}(t),a=null===o?"":`:${o}`,l={url:`${i}//${s}${a}/`},c=Object.freeze({host:s,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!r._canInitEmulator)return vp(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void vp(Sh(l,r.config.emulator)&&Sh(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,ah(s)?(lh(`${i}//${s}${a}`),dh("Auth",!0)):function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function km(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Tm(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Cm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bp("not implemented")}_getIdTokenResponse(e){return bp("not implemented")}_linkToIdToken(e,t){return bp("not implemented")}_getReauthenticationResolver(e){return bp("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sm(e,t){return Ap(e,"POST","/v1/accounts:signInWithIdp",Rp(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im extends Cm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Im(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pp("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const s=new Im(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Sm(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Sm(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Sm(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Eh(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends Em{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Nm extends xm{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return vp("providerId"in t&&"signInMethod"in t,"argument-error"),Im._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return vp(e.idToken||e.accessToken,"argument-error"),Im._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Nm.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Nm.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new Nm(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(a){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm extends xm{constructor(){super("facebook.com")}static credential(e){return Im._fromParams({providerId:Pm.PROVIDER_ID,signInMethod:Pm.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pm.credentialFromTaggedObject(e)}static credentialFromError(e){return Pm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Pm.credential(e.oauthAccessToken)}catch{return null}}}Pm.FACEBOOK_SIGN_IN_METHOD="facebook.com",Pm.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Rm extends xm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Im._fromParams({providerId:Rm.PROVIDER_ID,signInMethod:Rm.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Rm.credentialFromTaggedObject(e)}static credentialFromError(e){return Rm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Rm.credential(t,n)}catch{return null}}}Rm.GOOGLE_SIGN_IN_METHOD="google.com",Rm.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Dm extends xm{constructor(){super("github.com")}static credential(e){return Im._fromParams({providerId:Dm.PROVIDER_ID,signInMethod:Dm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dm.credentialFromTaggedObject(e)}static credentialFromError(e){return Dm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Dm.credential(e.oauthAccessToken)}catch{return null}}}Dm.GITHUB_SIGN_IN_METHOD="github.com",Dm.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Lm extends xm{constructor(){super("twitter.com")}static credential(e,t){return Im._fromParams({providerId:Lm.PROVIDER_ID,signInMethod:Lm.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Lm.credentialFromTaggedObject(e)}static credentialFromError(e){return Lm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Lm.credential(t,n)}catch{return null}}}Lm.TWITTER_SIGN_IN_METHOD="twitter.com",Lm.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Am{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Yp._fromIdTokenResponse(e,n,r),s=Om(n);return new Am({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Om(n);return new Am({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Om(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mm(e){var t;if(Hf(e.app))return Promise.reject(yp(e));const n=_m(e);if(await n._initializationPromise,null==(t=n.currentUser)?void 0:t.isAnonymous)return new Am({user:n.currentUser,providerId:null,operationType:"signIn"});const r=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await async function(e,t){return Ap(e,"POST","/v1/accounts:signUp",Rp(e,t))}(n,{returnSecureToken:!0}),i=await Am._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends mh{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,jm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new jm(e,t,n,r)}}function Fm(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw jm._fromErrorAndOperation(e,n,t,r);throw n})}function Um(e,t,n,r){return Lh(e).onAuthStateChanged(t,n,r)}const zm="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zm,"1"),this.storage.removeItem(zm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m extends Bm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);hm()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$m.type="LOCAL";const Wm=$m;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends Bm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qm.type="SESSION";const Vm=qm;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Hm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Gm(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hm.receivers=[];class Km{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=Gm("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ym(){return void 0!==Qm().WorkerGlobalScope&&"function"==typeof Qm().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Jm="firebaseLocalStorageDb",Xm="firebaseLocalStorage",Zm="fbase_key";class eg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tg(e,t){return e.transaction([Xm],t?"readwrite":"readonly").objectStore(Xm)}function ng(){const e=indexedDB.open(Jm,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Xm,{keyPath:Zm})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Xm)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Jm);return new eg(e).toPromise()}(),t(await ng()))})})}async function rg(e,t,n){const r=tg(e,!0).put({[Zm]:t,value:n});return new eg(r).toPromise()}function ig(e,t){const n=tg(e,!0).delete(t);return new eg(n).toPromise()}class sg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ng()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ym()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hm._getInstance(Ym()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new Km(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null==(e=n[0])?void 0:e.fulfilled)&&(null==(t=n[0])?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null==(t=null==navigator?void 0:navigator.serviceWorker)?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ng();return await rg(e,zm,"1"),await ig(e,zm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>rg(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=tg(e,!1).get(t),r=await new eg(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ig(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=tg(e,!1).getAll();return new eg(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}sg.type="LOCAL";const og=sg;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ag(e,t){return t?Xp(t):(vp(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Sp(3e4,6e4);class lg extends Cm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Sm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Sm(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cg(e){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t,n=!1){if(Hf(e.app))return Promise.reject(yp(e));const r="signIn",i=await Fm(e,r,t),s=await Am._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}(e.auth,new lg(e),e.bypassAuthState)}function ug(e){const{auth:t,user:n}=e;return vp(n,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,n=!1){const{auth:r}=e;if(Hf(r.app))return Promise.reject(yp(r));const i="reauthenticate";try{const s=await Wp(e,Fm(r,i,t,e),n);vp(s.idToken,r,"internal-error");const o=Bp(s.idToken);vp(o,r,"internal-error");const{sub:a}=o;return vp(e.uid===a,r,"user-mismatch"),Am._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&pp(r,"user-mismatch"),s}}(n,new lg(e),e.bypassAuthState)}async function dg(e){const{auth:t,user:n}=e;return vp(n,t,"internal-error"),async function(e,t,n=!1){const r=await Wp(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Am._forOperation(e,"link",r)}(n,new lg(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cg;case"linkViaPopup":case"linkViaRedirect":return dg;case"reauthViaPopup":case"reauthViaRedirect":return ug;default:pp(this.auth,"internal-error")}}resolve(e){wp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new Sp(2e3,1e4);async function pg(e,t,n){if(Hf(e.app))return Promise.reject(mp(e,"operation-not-supported-in-this-environment"));const r=_m(e);!function(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&pp(e,"argument-error"),gp(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,Em);const i=ag(r,n);return new mg(r,"signInViaPopup",t,i).executeNotNull()}class mg extends hg{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,mg.currentPopupAction&&mg.currentPopupAction.cancel(),mg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vp(e,this.auth,"internal-error"),e}async onExecution(){wp(1===this.filter.length,"Popup operations only handle one event");const e=Gm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(mp(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null==(e=this.authWindow)?void 0:e.associatedEvent)||null}cancel(){this.reject(mp(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mg.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null==(n=null==(t=this.authWindow)?void 0:t.window)?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mp(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,fg.get())};e()}}mg.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const gg="pendingRedirect",yg=new Map;class _g extends hg{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=yg.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return tm(gg,e.config.apiKey,e.name)}(t),r=function(e){return Xp(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}yg.set(this.auth._key(),e)}return this.bypassAuthState||yg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function vg(e,t){yg.set(e._key(),t)}async function bg(e,t,n=!1){if(Hf(e.app))return Promise.reject(yp(e));const r=_m(e),i=ag(r,t),s=new _g(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tg(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Tg(e)){const r=(null==(n=e.error.code)?void 0:n.split("auth/")[1])||"internal-error";t.onError(mp(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(kg(e))}saveEventToCache(e){this.cachedEventUids.add(kg(e)),this.lastProcessedEventTime=Date.now()}}function kg(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Tg({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Cg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sg=/^https?/;async function Ig(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Dp(e,"GET","/v1/projects",t)}(e);for(const n of t)try{if(Eg(n))return}catch{}pp(e,"unauthorized-domain")}function Eg(e){const t=kp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Sg.test(n))return!1;if(Cg.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=new Sp(3e4,6e4);function Ng(){const e=Qm().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Pg(e){return new Promise((t,n)=>{var r,i,s,o;function a(){Ng(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ng(),n(mp(e,"network-request-failed"))},timeout:xg.get()})}if(null==(i=null==(r=Qm().gapi)?void 0:r.iframes)?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null==(s=Qm().gapi)?void 0:s.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return Qm()[t]=()=>{gapi.load?a():n(mp(e,"network-request-failed"))},(o=`${bm.gapiScript}?onload=${t}`,bm.loadJS(o)).catch(e=>n(e))}a()}}).catch(e=>{throw Rg=null,e})}let Rg=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Dg=new Sp(5e3,15e3),Lg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ag=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Og(e){const t=e.config;vp(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ip(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Qf},i=Ag.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Eh(r).slice(1)}`}async function Mg(e){const t=await function(e){return Rg=Rg||Pg(e),Rg}(e),n=Qm().gapi;return vp(n,e,"internal-error"),t.open({where:document.body,url:Og(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lg,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=mp(e,"network-request-failed"),s=Qm().setTimeout(()=>{r(i)},Dg.get());function o(){Qm().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ug(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...jg,width:r.toString(),height:i.toString(),top:s,left:o},c=hh().toLowerCase();n&&(a=om(c)?"_blank":n),im(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=hh()){var t;return dm(e)&&!!(null==(t=window.navigator)?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",a),new Fg(null);const d=window.open(t||"",a,u);vp(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Fg(d)}const zg="__/auth/handler",Bg="emulator/auth/handler",$g=encodeURIComponent("fac");async function Wg(e,t,n,r,i,s){vp(e.config.authDomain,e,"auth-domain-config-required"),vp(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Qf,eventId:i};if(t instanceof Em){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Th(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))o[e]=t}if(t instanceof xm){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${$g}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${zg}`;return Ip(e,Bg)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${Eh(a).slice(1)}${c}`}const qg="webStorageSupport";const Vg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vm,this._completeRedirectFn=bg,this._overrideRedirectResult=vg}async _openPopup(e,t,n,r){var i;wp(null==(i=this.eventManagers[e._key()])?void 0:i.manager,"_initialize() not called before _openPopup()");return Ug(e,await Wg(e,t,n,kp(),r),Gm())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Qm().location.href=e}(await Wg(e,t,n,kp(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(wp(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Mg(e),n=new wg(e);return t.register("authEvent",t=>{vp(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qg,{type:qg},n=>{var r;const i=null==(r=null==n?void 0:n[0])?void 0:r[qg];void 0!==i&&t(!!i),pp(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ig(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fm()||sm()||dm()}};var Hg="@firebase/auth",Gg="1.12.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Kg{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null==(e=this.auth.currentUser)?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){vp(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Qg=sh("authIdTokenMaxAge")||300;let Yg=null;function Jg(e=Jf()){const t=Vf(e,"auth");if(t.isInitialized())return t.getImmediate();const n=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){const n=Vf(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Sh(n.getOptions(),t??{}))return e;pp(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Vg,persistence:[og,Wm,Vm]}),r=sh("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Qg)return;const r=null==t?void 0:t.token;Yg!==r&&(Yg=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Lh(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Lh(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=nh("auth");return s&&wm(n,`http://${s}`),n}var Xg;bm={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");var i;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=mp("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",((null==(i=document.getElementsByTagName("head"))?void 0:i[0])??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Xg="Browser",qf(new Ah("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;vp(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:Xg,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pm(Xg)},l=new ym(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xp);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),qf(new Ah("auth-internal",e=>{const t=_m(e.getProvider("auth").getImmediate());return new Kg(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xf(Hg,Gg,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Xg)),Xf(Hg,Gg,"esm2020");var Zg,ey;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Xf("firebase","12.8.0","app"),(ey=Zg||(Zg={})).Unimplemented="UNIMPLEMENTED",ey.Unavailable="UNAVAILABLE";class ty extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const ny=e=>{const t=e.CapacitorCustomPlatform||null,n=e.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>null!==t?t.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e),s=e=>{var t;return null===(t=n.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)},o=new Map;return n.convertFileSrc||(n.convertFileSrc=e=>e),n.getPlatform=i,n.handleError=t=>e.console.error(t),n.isNativePlatform=()=>"web"!==i(),n.isPluginAvailable=e=>{const t=o.get(e);return!!(null==t?void 0:t.platforms.has(i()))||!!s(e)},n.registerPlugin=(e,a={})=>{const l=o.get(e);if(l)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),l.proxy;const c=i(),u=s(e);let d;const h=r=>{let i;const s=(...s)=>{const o=(async()=>(!d&&c in a?d=d="function"==typeof a[c]?await a[c]():a[c]:null!==t&&!d&&"web"in a&&(d=d="function"==typeof a.web?await a.web():a.web),d))().then(t=>{const o=((t,r)=>{var i,s;if(!u){if(t)return null===(s=t[r])||void 0===s?void 0:s.bind(t);throw new ty(`"${e}" plugin is not implemented on ${c}`,Zg.Unimplemented)}{const s=null==u?void 0:u.methods.find(e=>r===e.name);if(s)return"promise"===s.rtype?t=>n.nativePromise(e,r.toString(),t):(t,i)=>n.nativeCallback(e,r.toString(),t,i);if(t)return null===(i=t[r])||void 0===i?void 0:i.bind(t)}})(t,r);if(o){const e=o(...s);return i=null==e?void 0:e.remove,e}throw new ty(`"${e}.${r}()" is not implemented on ${c}`,Zg.Unimplemented)});return"addListener"===r&&(o.remove=async()=>i()),o};return s.toString=()=>`${r.toString()}() { [capacitor code] }`,Object.defineProperty(s,"name",{value:r,writable:!1,configurable:!1}),s},f=h("addListener"),p=h("removeListener"),m=(e,t)=>{const n=f({eventName:e},t),r=async()=>{const r=await n;p({eventName:e,callbackId:r},t)},i=new Promise(e=>n.then(()=>e({remove:r})));return i.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},i},g=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return u?m:f;case"removeListener":return p;default:return h(t)}}});return r[e]=g,o.set(e,{name:e,proxy:g,platforms:new Set([...Object.keys(a),...u?[c]:[]])}),g},n.Exception=ty,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},ry=(e=>e.Capacitor=ny(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),iy=ry.registerPlugin;class sy{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),n&&this.sendRetainedArgumentsForEvent(e);return Promise.resolve({remove:async()=>this.removeListener(e,t)})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(r)r.forEach(e=>e(t));else if(n){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}}hasListeners(e){var t;return!!(null===(t=this.listeners[e])||void 0===t?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new ry.Exception(e,Zg.Unimplemented)}unavailable(e="not available"){return new ry.Exception(e,Zg.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(t=>{this.notifyListeners(e,t)}))}}const oy=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ay=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ly extends sy{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(e=>{if(e.length<=0)return;let[n,r]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=ay(n).trim(),r=ay(r).trim(),t[n]=r}),t}async setCookie(e){try{const t=oy(e.key),n=oy(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),s=null!=e.url&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${r}; path=${i}; ${s};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}iy("CapacitorCookies",{web:()=>new ly});const cy=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),r=((e={})=>{const t=Object.keys(e);return Object.keys(e).map(e=>e.toLocaleLowerCase()).reduce((n,r,i)=>(n[r]=e[t[i]],n),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)n.body=e.data;else if(r.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[n,r]of Object.entries(e.data||{}))t.set(n,r);n.body=t.toString()}else if(r.includes("multipart/form-data")||e.data instanceof FormData){const t=new FormData;if(e.data instanceof FormData)e.data.forEach((e,n)=>{t.append(n,e)});else for(const n of Object.keys(e.data))t.append(n,e.data[n]);n.body=t;const r=new Headers(n.headers);r.delete("content-type"),n.headers=r}else(r.includes("application/json")||"object"==typeof e.data)&&(n.body=JSON.stringify(e.data));return n};class uy extends sy{async request(e){const t=cy(e,e.webFetchExtra),n=((e,t=!0)=>e?Object.entries(e).reduce((e,n)=>{const[r,i]=n;let s,o;return Array.isArray(i)?(o="",i.forEach(e=>{s=t?encodeURIComponent(e):e,o+=`${r}=${s}&`}),o.slice(0,-1)):(s=t?encodeURIComponent(i):i,o=`${r}=${s}`),`${e}&${o}`},"").substr(1):null)(e.params,e.shouldEncodeUrlParams),r=n?`${e.url}?${n}`:e.url,i=await fetch(r,t),s=i.headers.get("content-type")||"";let o,a,{responseType:l="text"}=i.ok?e:{};switch(s.includes("application/json")&&(l="json"),l){case"arraybuffer":case"blob":a=await i.blob(),o=await(async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const e=r.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},r.onerror=e=>n(e),r.readAsDataURL(e)}))(a);break;case"json":o=await i.json();break;default:o=await i.text()}const c={};return i.headers.forEach((e,t)=>{c[t]=e}),{data:o,headers:c,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}var dy,hy,fy,py;iy("CapacitorHttp",{web:()=>new uy}),(hy=dy||(dy={})).Dark="DARK",hy.Light="LIGHT",hy.Default="DEFAULT",(py=fy||(fy={})).StatusBar="StatusBar",py.NavigationBar="NavigationBar";class my extends sy{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}iy("SystemBars",{web:()=>new my});var gy={};const yy="@firebase/database",_y="1.1.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let vy="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class by{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),vh(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:_h(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return wh(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new by(t)}}catch(t){}return new wy},Ty=ky("localStorage"),Cy=ky("sessionStorage"),Sy=new qh("@firebase/database"),Iy=function(){let e=1;return function(){return e++}}(),Ey=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Wd(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new xh;n.update(t);const r=n.digest();return Hd.encodeByteArray(r)},xy=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=xy.apply(null,r):t+="object"==typeof r?vh(r):r,t+=" "}return t};let Ny=null,Py=!0;const Ry=function(...e){if(!0===Py&&(Py=!1,null===Ny&&!0===Cy.get("logging_enabled")&&(Wd(!0,"Can't turn on custom loggers persistently."),Sy.logLevel=Fh.VERBOSE,Ny=Sy.log.bind(Sy))),Ny){const t=xy.apply(null,e);Ny(t)}},Dy=function(e){return function(...t){Ry(e,...t)}},Ly=function(...e){const t="FIREBASE INTERNAL ERROR: "+xy(...e);Sy.error(t)},Ay=function(...e){const t=`FIREBASE FATAL ERROR: ${xy(...e)}`;throw Sy.error(t),new Error(t)},Oy=function(...e){const t="FIREBASE WARNING: "+xy(...e);Sy.warn(t)},My=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},jy="[MIN_NAME]",Fy="[MAX_NAME]",Uy=function(e,t){if(e===t)return 0;if(e===jy||t===Fy)return-1;if(t===jy||e===Fy)return 1;{const n=Gy(e),r=Gy(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},zy=function(e,t){return e===t?0:e<t?-1:1},By=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+vh(t))},$y=function(e){if("object"!=typeof e||null===e)return vh(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=vh(t[r]),n+=":",n+=$y(e[t[r]]);return n+="}",n},Wy=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function qy(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Vy=function(e){Wd(!My(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e==-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Hy=new RegExp("^-?(0*)\\d{1,10}$"),Gy=function(e){if(Hy.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Ky=function(e){try{e()}catch(t){setTimeout(()=>{const e=t.stack||"";throw Oy("Exception was thrown by user callback.",e),t},Math.floor(0))}},Qy=function(e,t){const n=setTimeout(e,t);return"number"==typeof n&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Yy{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Hf(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null==(t=this.appCheckProvider)||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Oy(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(Ry("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Oy(e)}}class Xy{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Xy.OWNER="owner";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Zy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,e_="ac",t_="websocket",n_="long_polling";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class r_{constructor(e,t,n,r,i=!1,s="",o=!1,a=!1,l=null){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ty.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ty.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function i_(e,t,n){let r;if(Wd("string"==typeof t,"typeof type must == string"),Wd("object"==typeof n,"typeof params must == object"),t===t_)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==n_)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return qy(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(){this.counters_={}}incrementCounter(e,t=1){wh(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Jd(this.counters_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_={},a_={};function l_(e){const t=e.toString();return o_[t]||(o_[t]=new s_),o_[t]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class c_{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Ky(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="start";class d_{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Dy(e),this.stats_=l_(t),this.urlFn=e=>(this.appCheckToken&&(e[e_]=this.appCheckToken),i_(t,n_,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new c_(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new h_((...e)=>{const[t,n,r,i,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===u_)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_()}},(...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);const e={};e[u_]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[e_]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Zy.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){d_.forceAllow_=!0}static forceDisallow(){d_.forceDisallow_=!0}static isAvailable(){return!!d_.forceAllow_||!(d_.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=vh(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Kd(t),r=Wy(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=vh(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class h_{constructor(e,t,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Iy(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=h_.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){Ry("frame writing exception"),i.stack&&Ry(i.stack),Ry(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ry("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Ry("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f_=null;"undefined"!=typeof MozWebSocket?f_=MozWebSocket:"undefined"!=typeof WebSocket&&(f_=WebSocket);class p_{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Dy(this.connId),this.stats_=l_(t),this.connURL=p_.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={v:"5"};return"undefined"!=typeof location&&location.hostname&&Zy.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[e_]=r),i&&(s.p=i),i_(e,t_,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ty.set("previous_websocket_failure",!0);try{let e;this.mySock=new f_(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){p_.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==f_&&!p_.forceDisallow_}static previouslyFailed(){return Ty.isInMemoryStorage||!0===Ty.get("previous_websocket_failure")}markConnectionHealthy(){Ty.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=_h(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Wd(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=vh(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Wy(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}p_.responsesRequiredToBeHealthy=2,p_.healthyTimeout=3e4;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class m_{static get ALL_TRANSPORTS(){return[d_,p_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=p_&&p_.isAvailable();let n=t&&!p_.previouslyFailed();if(e.webSocketOnly&&(t||Oy("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[p_];else{const e=this.transports_=[];for(const t of m_.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);m_.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}m_.globalTransportInitialized_=!1;class g_{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Dy("c:"+this.id+":"),this.transportManager_=new m_(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Qy(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=By("t",e),n=By("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=By("t",e),n=By("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=By("t",e);if("d"in e){const n=e.d;if("h"===t){const e={...n};this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Ly("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ly("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&Oy("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Qy(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qy(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ty.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this.allowedEvents_=e,this.listeners_={},Wd(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Wd(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_ extends __{static getInstance(){return new v_}constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||fh()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Wd("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function w_(){return new b_("")}function k_(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function T_(e){return e.pieces_.length-e.pieceNum_}function C_(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new b_(e.pieces_,t)}function S_(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function I_(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function E_(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new b_(t,0)}function x_(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof b_)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new b_(n,0)}function N_(e){return e.pieceNum_>=e.pieces_.length}function P_(e,t){const n=k_(e),r=k_(t);if(null===n)return t;if(n===r)return P_(C_(e),C_(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function R_(e,t){const n=I_(e,0),r=I_(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=Uy(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function D_(e,t){if(T_(e)!==T_(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function L_(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(T_(e)>T_(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class A_{constructor(e,t){this.errorPrefix_=t,this.parts_=I_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Dh(this.parts_[n]);O_(this)}}function O_(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+M_(e))}function M_(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_ extends __{static getInstance(){return new j_}constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}getInitialEvent(e){return Wd("visible"===e,"Unknown event type: "+e),[this.visible_]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=1e3;class U_ extends y_{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=U_.nextPersistentConnectionId_++,this.log_=Dy("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=F_,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");j_.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&v_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(vh(i)),Wd(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new oh,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Wd(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Wd(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,i=>{const s=i.d,o=i.s;U_.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&wh(e,"w")){const n=kh(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Oy(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=bh(e).claims;return"object"==typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=bh(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Wd(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+vh(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Ly("Unrecognized action received from server: "+vh(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Wd(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=F_,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=F_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=F_),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+U_.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(e){Wd(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[e,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Ry("getToken() completed but was canceled"):(Ry("getToken() completed. Creating connection."),this.authToken_=e&&e.accessToken,this.appCheckToken_=l&&l.token,a=new g_(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,e=>{Oy(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},s))}catch(e){this.log_("Failed to get token: "+e),o||(this.repoInfo_.nodeAdmin&&Oy(e),l())}}}interrupt(e){Ry("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ry("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Th(this.interruptReasons_)&&(this.reconnectDelay_=F_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>$y(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new b_(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Ry("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Ry("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};e["sdk.js."+vy.replace(/\./g,"-")]=1,fh()?e["framework.cordova"]=1:ph()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=v_.getInstance().currentlyOnline();return Th(this.interruptReasons_)&&e}}U_.nextPersistentConnectionId_=0,U_.nextConnectionId_=0;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class z_{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new z_(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new z_(jy,e),r=new z_(jy,t);return 0!==this.compare(n,r)}minPost(){return z_.MIN}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $_;class W_ extends B_{static get __EMPTY_NODE(){return $_}static set __EMPTY_NODE(e){$_=e}compare(e,t){return Uy(e.name,t.name)}isDefinedOn(e){throw qd("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return z_.MIN}maxPost(){return new z_(Fy,$_)}makePost(e,t){return Wd("string"==typeof e,"KeyIndex indexValue must always be a string."),new z_(e,$_)}toString(){return".key"}}const q_=new W_;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class H_{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:H_.RED,this.left=null!=r?r:G_.EMPTY_NODE,this.right=null!=i?i:G_.EMPTY_NODE}copy(e,t,n,r,i){return new H_(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return G_.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return G_.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,H_.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,H_.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}H_.RED=!0,H_.BLACK=!1;class G_{constructor(e,t=G_.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new G_(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,H_.BLACK,null,null))}remove(e){return new G_(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,H_.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new V_(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new V_(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new V_(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new V_(this.root_,null,this.comparator_,!0,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function K_(e,t){return Uy(e.name,t.name)}function Q_(e,t){return Uy(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y_;G_.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new H_(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const J_=function(e){return"number"==typeof e?"number:"+Vy(e):"string:"+e},X_=function(e){if(e.isLeafNode()){const t=e.val();Wd("string"==typeof t||"number"==typeof t||"object"==typeof t&&wh(t,".sv"),"Priority must be a string or number.")}else Wd(e===Y_||e.isEmpty(),"priority of unexpected type.");Wd(e===Y_||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Z_,ev,tv;class nv{static set __childrenNodeConstructor(e){Z_=e}static get __childrenNodeConstructor(){return Z_}constructor(e,t=nv.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Wd(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),X_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new nv(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:nv.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return N_(e)?this:".priority"===k_(e)?this.priorityNode_:nv.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:nv.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=k_(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Wd(".priority"!==n||1===T_(e),".priority must be the last token in a path"),this.updateImmediateChild(n,nv.__childrenNodeConstructor.EMPTY_NODE.updateChild(C_(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+J_(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Vy(this.value_):this.value_,this.lazyHash_=Ey(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===nv.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof nv.__childrenNodeConstructor?-1:(Wd(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=nv.VALUE_TYPE_ORDER.indexOf(t),i=nv.VALUE_TYPE_ORDER.indexOf(n);return Wd(r>=0,"Unknown leaf type: "+t),Wd(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}nv.VALUE_TYPE_ORDER=["object","boolean","number","string"];const rv=new class extends B_{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Uy(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return z_.MIN}maxPost(){return new z_(Fy,new nv("[PRIORITY-POST]",tv))}makePost(e,t){const n=ev(e);return new z_(t,new nv("[PRIORITY-POST]",n))}toString(){return".priority"}},iv=Math.log(2);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/iv,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ov=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new H_(a,o.node,H_.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new H_(a,o.node,H_.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],d=n?n(u):u;l(new H_(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,H_.BLACK):(a(r,H_.BLACK),a(r,H_.RED))}return s}(new sv(e.length));return new G_(r||t,s)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let av;const lv={};class cv{static get Default(){return Wd(lv&&rv,"ChildrenNode.ts has not been loaded"),av=av||new cv({".priority":lv},{".priority":rv}),av}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=kh(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof G_?t:null}hasIndex(e){return wh(this.indexSet_,e.toString())}addIndex(e,t){Wd(e!==q_,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(z_.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?ov(n,e.getCompare()):lv;const a=e.toString(),l={...this.indexSet_};l[a]=e;const c={...this.indexes_};return c[a]=s,new cv(c,l)}addToIndexes(e,t){const n=Ch(this.indexes_,(n,r)=>{const i=kh(this.indexSet_,r);if(Wd(i,"Missing index implementation for "+r),n===lv){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(z_.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),ov(n,i.getCompare())}return lv}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new z_(e.name,r))),i.insert(e,e.node)}});return new cv(n,this.indexSet_)}removeFromIndexes(e,t){const n=Ch(this.indexes_,n=>{if(n===lv)return n;{const r=t.get(e.name);return r?n.remove(new z_(e.name,r)):n}});return new cv(n,this.indexSet_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uv;class dv{static get EMPTY_NODE(){return uv||(uv=new dv(new G_(Q_),null,cv.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&X_(this.priorityNode_),this.children_.isEmpty()&&Wd(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||uv}updatePriority(e){return this.children_.isEmpty()?this:new dv(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?uv:t}}getChild(e){const t=k_(e);return null===t?this:this.getImmediateChild(t).getChild(C_(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Wd(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new z_(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?uv:this.priorityNode_;return new dv(r,s,i)}}updateChild(e,t){const n=k_(e);if(null===n)return t;{Wd(".priority"!==k_(e)||1===T_(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(C_(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(rv,(s,o)=>{t[s]=o.val(e),n++,i&&dv.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1}),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+J_(this.getPriority().val())+":"),this.forEachChild(rv,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":Ey(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new z_(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new z_(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new z_(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,z_.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,z_.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hv?-1:0}withIndex(e){if(e===q_||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new dv(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===q_||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(rv),n=t.getIterator(rv);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===q_?null:this.indexMap_.get(e.toString())}}dv.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const hv=new class extends dv{constructor(){super(new G_(Q_),dv.EMPTY_NODE,cv.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return dv.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(z_,{MIN:{value:new z_(jy,dv.EMPTY_NODE)},MAX:{value:new z_(Fy,hv)}}),W_.__EMPTY_NODE=dv.EMPTY_NODE,nv.__childrenNodeConstructor=dv,Y_=hv,function(e){tv=e}(hv);function fv(e,t=null){if(null===e)return dv.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),Wd(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e){return new nv(e,fv(t))}if(e instanceof Array){let n=dv.EMPTY_NODE;return qy(e,(t,r)=>{if(wh(e,t)&&"."!==t.substring(0,1)){const e=fv(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(fv(t))}{const n=[];let r=!1;if(qy(e,(e,t)=>{if("."!==e.substring(0,1)){const i=fv(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new z_(e,i)))}}),0===n.length)return dv.EMPTY_NODE;const i=ov(n,K_,e=>e.name,Q_);if(r){const e=ov(n,rv.getCompare());return new dv(i,fv(t),new cv({".priority":e},{".priority":rv}))}return new dv(i,fv(t),cv.Default)}}!function(e){ev=e}(fv);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class pv extends B_{constructor(e){super(),this.indexPath_=e,Wd(!N_(e)&&".priority"!==k_(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Uy(e.name,t.name):i}makePost(e,t){const n=fv(e),r=dv.EMPTY_NODE.updateChild(this.indexPath_,n);return new z_(t,r)}maxPost(){const e=dv.EMPTY_NODE.updateChild(this.indexPath_,hv);return new z_(Fy,e)}toString(){return I_(this.indexPath_,0).join("/")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new class extends B_{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Uy(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return z_.MIN}maxPost(){return z_.MAX}makePost(e,t){const n=fv(e);return new z_(t,n)}toString(){return".value"}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(e){return{type:"value",snapshotNode:e}}function yv(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function _v(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function vv(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bv{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Wd(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(_v(t,o)):Wd(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(yv(t,n)):s.trackChildChange(vv(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(rv,(e,r)=>{t.hasChild(e)||n.trackChildChange(_v(e,r))}),t.isLeafNode()||t.forEachChild(rv,(t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(vv(t,r,i))}else n.trackChildChange(yv(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?dv.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this.indexedFilter_=new bv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=wv.getStartPost_(e),this.endPost_=wv.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new z_(t,n))||(n=dv.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=dv.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(dv.EMPTY_NODE);const i=this;return t.forEachChild(rv,(e,t)=>{i.matches(new z_(e,t))||(r=r.updateImmediateChild(e,dv.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new wv(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new z_(t,n))||(n=dv.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=dv.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=dv.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(dv.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,dv.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Wd(o.numChildren()===this.limit_,"");const a=new z_(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:s(u,a);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(vv(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(_v(t,e));const n=o.updateImmediateChild(t,dv.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(yv(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(_v(l.name,l.node)),i.trackChildChange(yv(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,dv.EMPTY_NODE)):e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rv}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Wd(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Wd(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jy}hasEnd(){return this.endSet_}getIndexEndValue(){return Wd(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Wd(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fy}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Wd(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rv}copy(){const e=new Tv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Cv(e){const t={};if(e.isDefault())return t;let n;if(e.index_===rv?n="$priority":e.index_===mv?n="$value":e.index_===q_?n="$key":(Wd(e.index_ instanceof pv,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=vh(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=vh(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+vh(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=vh(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+vh(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Sv(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==rv&&(t.i=e.index_.toString()),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv extends y_{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Wd(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Dy("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=Iv.getListenId_(e,n),o={};this.listens_[s]=o;const a=Cv(e._queryParams);this.restRequest_(i+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),kh(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=Iv.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Cv(e._queryParams),n=e._path.toString(),r=new oh;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Eh(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=_h(o.responseText)}catch(e){Oy("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&Oy("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.rootNode_=dv.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(){return{value:null,children:new Map}}function Nv(e,t,n){if(N_(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=k_(t);e.children.has(r)||e.children.set(r,xv());Nv(e.children.get(r),t=C_(t),n)}}function Pv(e,t){if(N_(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(rv,(t,n)=>{Nv(e,new b_(t),n)}),Pv(e,t)}}if(e.children.size>0){const n=k_(t);if(t=C_(t),e.children.has(n)){Pv(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function Rv(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,(e,r)=>{Rv(r,new b_(t.toString()+"/"+e),n)})}class Dv{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&qy(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Dv(e);const n=1e4+2e4*Math.random();Qy(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;qy(e,(e,r)=>{r>0&&wh(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),Qy(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Av,Ov;function Mv(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Ov=Av||(Av={}))[Ov.OVERWRITE=0]="OVERWRITE",Ov[Ov.MERGE=1]="MERGE",Ov[Ov.ACK_USER_WRITE=2]="ACK_USER_WRITE",Ov[Ov.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";class jv{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Av.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(N_(this.path)){if(null!=this.affectedTree.value)return Wd(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new b_(e));return new jv(w_(),t,this.revert)}}return Wd(k_(this.path)===e,"operationForChild called for unrelated child."),new jv(C_(this.path),this.affectedTree,this.revert)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t){this.source=e,this.path=t,this.type=Av.LISTEN_COMPLETE}operationForChild(e){return N_(this.path)?new Fv(this.source,w_()):new Fv(this.source,C_(this.path))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Av.OVERWRITE}operationForChild(e){return N_(this.path)?new Uv(this.source,w_(),this.snap.getImmediateChild(e)):new Uv(this.source,C_(this.path),this.snap)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Av.MERGE}operationForChild(e){if(N_(this.path)){const t=this.children.subtree(new b_(e));return t.isEmpty()?null:t.value?new Uv(this.source,w_(),t.value):new zv(this.source,w_(),t)}return Wd(k_(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new zv(this.source,C_(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(N_(e))return this.isFullyInitialized()&&!this.filtered_;const t=k_(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Wv(e,t,n,r,i,s){const o=r.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw qd("Should only compare child_ events.");const r=new z_(t.childName,t.snapshotNode),i=new z_(n.childName,n.snapshotNode);return e.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,n)),o.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function qv(e,t){return{eventCache:e,serverCache:t}}function Vv(e,t,n,r){return qv(new Bv(t,n,r),e.serverCache)}function Hv(e,t,n,r){return qv(e.eventCache,new Bv(t,n,r))}function Gv(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Kv(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qv;class Yv{static fromObject(e){let t=new Yv(null);return qy(e,(e,n)=>{t=t.set(new b_(e),n)}),t}constructor(e,t=(()=>(Qv||(Qv=new G_(zy)),Qv))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:w_(),value:this.value};if(N_(e))return null;{const n=k_(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(C_(e),t);if(null!=i){return{path:x_(new b_(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(N_(e))return this;{const t=k_(e),n=this.children.get(t);return null!==n?n.subtree(C_(e)):new Yv(null)}}set(e,t){if(N_(e))return new Yv(t,this.children);{const n=k_(e),r=(this.children.get(n)||new Yv(null)).set(C_(e),t),i=this.children.insert(n,r);return new Yv(this.value,i)}}remove(e){if(N_(e))return this.children.isEmpty()?new Yv(null):new Yv(null,this.children);{const t=k_(e),n=this.children.get(t);if(n){const r=n.remove(C_(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Yv(null):new Yv(this.value,i)}return this}}get(e){if(N_(e))return this.value;{const t=k_(e),n=this.children.get(t);return n?n.get(C_(e)):null}}setTree(e,t){if(N_(e))return t;{const n=k_(e),r=(this.children.get(n)||new Yv(null)).setTree(C_(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Yv(this.value,i)}}fold(e){return this.fold_(w_(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(x_(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,w_(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(N_(e))return null;{const r=k_(e),i=this.children.get(r);return i?i.findOnPath_(C_(e),x_(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,w_(),t)}foreachOnPath_(e,t,n){if(N_(e))return this;{this.value&&n(t,this.value);const r=k_(e),i=this.children.get(r);return i?i.foreachOnPath_(C_(e),x_(t,r),n):new Yv(null)}}foreach(e){this.foreach_(w_(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(x_(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this.writeTree_=e}static empty(){return new Jv(new Yv(null))}}function Xv(e,t,n){if(N_(t))return new Jv(new Yv(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=P_(i,t);return s=s.updateChild(o,n),new Jv(e.writeTree_.set(i,s))}{const r=new Yv(n),i=e.writeTree_.setTree(t,r);return new Jv(i)}}}function Zv(e,t,n){let r=e;return qy(n,(e,n)=>{r=Xv(r,x_(t,e),n)}),r}function eb(e,t){if(N_(t))return Jv.empty();{const n=e.writeTree_.setTree(t,new Yv(null));return new Jv(n)}}function tb(e,t){return null!=nb(e,t)}function nb(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(P_(n.path,t)):null}function rb(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(rv,(e,n)=>{t.push(new z_(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new z_(e,n.value))}),t}function ib(e,t){if(N_(t))return e;{const n=nb(e,t);return new Jv(null!=n?new Yv(n):e.writeTree_.subtree(t))}}function sb(e){return e.writeTree_.isEmpty()}function ob(e,t){return ab(w_(),e.writeTree_,t)}function ab(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?(Wd(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ab(x_(e,t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(x_(e,".priority"),r)),n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(e,t){return wb(t,e)}function cb(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);Wd(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&ub(t,r.path)?i=!1:L_(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=hb(e.allWrites,db,w_()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=eb(e.visibleWrites,r.path);else{qy(r.children,t=>{e.visibleWrites=eb(e.visibleWrites,x_(r.path,t))})}return!0}return!1}function ub(e,t){if(e.snap)return L_(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&L_(x_(e.path,n),t))return!0;return!1}function db(e){return e.visible}function hb(e,t,n){let r=Jv.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)L_(n,e)?(t=P_(n,e),r=Xv(r,t,s.snap)):L_(e,n)&&(t=P_(e,n),r=Xv(r,w_(),s.snap.getChild(t)));else{if(!s.children)throw qd("WriteRecord should have .snap or .children");if(L_(n,e))t=P_(n,e),r=Zv(r,t,s.children);else if(L_(e,n))if(t=P_(e,n),N_(t))r=Zv(r,w_(),s.children);else{const e=kh(s.children,k_(t));if(e){const n=e.getChild(C_(t));r=Xv(r,w_(),n)}}}}}return r}function fb(e,t,n,r,i){if(r||i){const s=ib(e.visibleWrites,t);if(!i&&sb(s))return n;if(i||null!=n||tb(s,w_())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(L_(e.path,t)||L_(t,e.path))};return ob(hb(e.allWrites,s,t),n||dv.EMPTY_NODE)}return null}{const r=nb(e.visibleWrites,t);if(null!=r)return r;{const r=ib(e.visibleWrites,t);if(sb(r))return n;if(null!=n||tb(r,w_())){return ob(r,n||dv.EMPTY_NODE)}return null}}}function pb(e,t,n,r){return fb(e.writeTree,e.treePath,t,n,r)}function mb(e,t){return function(e,t,n){let r=dv.EMPTY_NODE;const i=nb(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(rv,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const i=ib(e.visibleWrites,t);return n.forEachChild(rv,(e,t)=>{const n=ob(ib(i,new b_(e)),t);r=r.updateImmediateChild(e,n)}),rb(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return rb(ib(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function gb(e,t,n,r){return function(e,t,n,r,i){Wd(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=x_(t,n);if(tb(e.visibleWrites,s))return null;{const t=ib(e.visibleWrites,s);return sb(t)?i.getChild(n):ob(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function yb(e,t){return function(e,t){return nb(e.visibleWrites,t)}(e.writeTree,x_(e.treePath,t))}function _b(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=ib(e.visibleWrites,t),c=nb(l,w_());if(null!=c)a=c;else{if(null==n)return[];a=ob(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function vb(e,t,n){return function(e,t,n,r){const i=x_(t,n),s=nb(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return ob(ib(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function bb(e,t){return wb(x_(e.treePath,t),e.writeTree)}function wb(e,t){return{treePath:e,writeTree:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Wd("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Wd(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,vv(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,_v(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,yv(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw qd("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,vv(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Cb{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Bv(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vb(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Kv(this.viewCache_),i=_b(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(e,t,n,r,i){const s=new kb;let o,a;if(n.type===Av.OVERWRITE){const l=n;l.source.fromUser?o=xb(e,t,l.path,l.snap,r,i,s):(Wd(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!N_(l.path),o=Eb(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===Av.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach((r,l)=>{const c=x_(n,r);Nb(t,k_(c))&&(a=xb(e,a,c,l,i,s,o))}),r.foreach((r,l)=>{const c=x_(n,r);Nb(t,k_(c))||(a=xb(e,a,c,l,i,s,o))}),a}(e,t,l.path,l.children,r,i,s):(Wd(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=Rb(e,t,l.path,l.children,r,i,a,s))}else if(n.type===Av.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=yb(r,n))return t;{const a=new Cb(r,t,i),l=t.eventCache.getNode();let c;if(N_(n)||".priority"===k_(n)){let n;if(t.serverCache.isFullyInitialized())n=pb(r,Kv(t));else{const e=t.serverCache.getNode();Wd(e instanceof dv,"serverChildren would be complete if leaf node"),n=mb(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=k_(n);let u=vb(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,C_(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,dv.EMPTY_NODE,C_(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=pb(r,Kv(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=yb(r,w_()),Vv(t,c,o,e.filter.filtersNodes())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=yb(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(N_(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Eb(e,t,n,l.getNode().getChild(n),i,s,a,o);if(N_(n)){let r=new Yv(null);return l.getNode().forEachChild(q_,(e,t)=>{r=r.set(new b_(e),t)}),Rb(e,t,n,r,i,s,a,o)}return t}{let c=new Yv(null);return r.foreach((e,t)=>{const r=x_(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))}),Rb(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==Av.LISTEN_COMPLETE)throw qd("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Hv(t,s.getNode(),s.isFullyInitialized()||N_(n),s.isFiltered());return Ib(e,o,n,r,Tb,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Gv(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(gv(Gv(t)))}}(t,o,l),{viewCache:o,changes:l}}function Ib(e,t,n,r,i,s){const o=t.eventCache;if(null!=yb(r,n))return t;{let a,l;if(N_(n))if(Wd(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Kv(t),i=mb(r,n instanceof dv?n:dv.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=pb(r,Kv(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=k_(n);if(".priority"===c){Wd(1===T_(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=gb(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=C_(n);let d;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=gb(r,n,o.getNode(),l);d=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else d=vb(r,c,t.serverCache);a=null!=d?e.filter.updateChild(o.getNode(),c,d,u,i,s):o.getNode()}}return Vv(t,a,o.isFullyInitialized()||N_(n),e.filter.filtersNodes())}}function Eb(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(N_(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=k_(n);if(!l.isCompleteForPath(n)&&T_(n)>1)return t;const i=C_(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,Tb,null)}const d=Hv(t,c,l.isFullyInitialized()||N_(n),u.filtersNodes());return Ib(e,d,n,i,new Cb(i,d,s),a)}function xb(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new Cb(i,t,s);if(N_(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Vv(t,c,!0,e.filter.filtersNodes());else{const i=k_(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Vv(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=C_(n),c=a.getNode().getImmediateChild(i);let d;if(N_(s))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===S_(s)&&e.getChild(E_(s)).isEmpty()?e:e.updateChild(s,r):dv.EMPTY_NODE}if(c.equals(d))l=t;else{l=Vv(t,e.filter.updateChild(a.getNode(),i,d,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Nb(e,t){return e.eventCache.isCompleteForChild(t)}function Pb(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function Rb(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=N_(n)?r:new Yv(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){const l=Pb(0,t.serverCache.getNode().getImmediateChild(n),r);c=Eb(e,c,new b_(n),l,i,s,o,a)}}),l.children.inorderTraversal((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=Pb(0,t.serverCache.getNode().getImmediateChild(n),r);c=Eb(e,c,new b_(n),l,i,s,o,a)}}),c}class Db{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new bv(n.getIndex()),i=(s=n).loadsAllData()?new bv(s.getIndex()):s.hasLimit()?new kv(s):new wv(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(dv.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(dv.EMPTY_NODE,a.getNode(),null),u=new Bv(l,o.isFullyInitialized(),r.filtersNodes()),d=new Bv(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=qv(d,u),this.eventGenerator_=new $v(this.query_)}get query(){return this.query_}}function Lb(e,t){const n=Kv(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!N_(t)&&!n.getImmediateChild(k_(t)).isEmpty())?n.getChild(t):null}function Ab(e){return 0===e.eventRegistrations_.length}function Ob(e,t,n){const r=[];if(n){Wd(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Mb(e,t,n,r){t.type===Av.MERGE&&null!==t.source.queryId&&(Wd(Kv(e.viewCache_),"We should always have a full cache before handling merges"),Wd(Gv(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=Sb(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Wd(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Wd(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Wd(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,jb(e,s.changes,s.viewCache.eventCache.getNode(),null)}function jb(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach(t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),Wv(e,i,"child_removed",t,r,n),Wv(e,i,"child_added",t,r,n),Wv(e,i,"child_moved",s,r,n),Wv(e,i,"child_changed",t,r,n),Wv(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fb,Ub;class zb{constructor(){this.views=new Map}}function Bb(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Wd(null!=s,"SyncTree gave us an op for an invalid query."),Mb(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(Mb(s,t,n,r));return i}}function $b(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=pb(n,i?r:null),s=!1;e?s=!0:r instanceof dv?(e=mb(n,r),s=!1):(e=dv.EMPTY_NODE,s=!1);const o=qv(new Bv(e,s,!1),new Bv(r,i,!1));return new Db(t,o)}return o}function Wb(e,t,n,r,i,s){const o=$b(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(rv,(e,t)=>{r.push(yv(e,t))});return n.isFullyInitialized()&&r.push(gv(n.getNode())),jb(e,r,n.getNode(),t)}(o,n)}function qb(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=Qb(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(Ob(c,n,r)),Ab(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(Ob(t,n,r)),Ab(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!Qb(e)&&s.push(new(Wd(Fb,"Reference.ts has not been loaded"),Fb)(t._repo,t._path)),{removed:s,events:o}}function Vb(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Hb(e,t){let n=null;for(const r of e.views.values())n=n||Lb(r,t);return n}function Gb(e,t){if(t._queryParams.loadsAllData())return Yb(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Kb(e,t){return null!=Gb(e,t)}function Qb(e){return null!=Yb(e)}function Yb(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jb=1;class Xb{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Yv(null),this.pendingWriteTree_={visibleWrites:Jv.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Zb(e,t,n,r,i){return function(e,t,n,r,i){Wd(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Xv(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?lw(e,new Uv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ew(e,t,n,r){!function(e,t,n,r){Wd(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Zv(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=Yv.fromObject(n);return lw(e,new zv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function tw(e,t,n=!1){const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(cb(e.pendingWriteTree_,t)){let t=new Yv(null);return null!=r.snap?t=t.set(w_(),!0):qy(r.children,e=>{t=t.set(new b_(e),!0)}),lw(e,new jv(r.path,t,n))}return[]}function nw(e,t,n){return lw(e,new Uv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function rw(e,t,n,r,i=!1){const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||Kb(o,t))){const l=qb(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),i=e.syncPointTree_.findOnPath(s,(e,t)=>Qb(t));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&Qb(t)){return[Yb(t)]}{let e=[];return t&&(e=Vb(t)),qy(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=dw(e,r);e.listenProvider_.startListening(yw(i),hw(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(yw(t),n)}else c.forEach(t=>{const n=e.queryToTagMap.get(fw(t));e.listenProvider_.stopListening(yw(t),n)})}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=fw(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function iw(e,t,n,r){const i=pw(e,r);if(null!=i){const r=mw(i),s=r.path,o=r.queryId,a=P_(s,t);return gw(e,s,new Uv(Mv(o),a,n))}return[]}function sw(e,t,n,r=!1){const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,(e,t)=>{const n=P_(e,i);s=s||Hb(t,n),o=o||Qb(t)});let a,l=e.syncPointTree_.get(i);if(l?(o=o||Qb(l),s=s||Hb(l,w_())):(l=new zb,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=dv.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild((e,t)=>{const n=Hb(t,w_());n&&(s=s.updateImmediateChild(e,n))})}const c=Kb(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=fw(t);Wd(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Jb++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=Wb(l,t,n,lb(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=Gb(l,t);u=u.concat(function(e,t,n){const r=t._path,i=hw(e,t),s=dw(e,n),o=e.listenProvider_.startListening(yw(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Wd(!Qb(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold((e,t,n)=>{if(!N_(e)&&t&&Qb(t))return[Yb(t).query];{let e=[];return t&&(e=e.concat(Vb(t).map(e=>e.query))),qy(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(yw(r),hw(e,r))}}return o}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,n))}return u}function ow(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=Hb(n,P_(e,t));if(r)return r});return fb(r,t,i,n,!0)}function aw(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const i=P_(e,n);r=r||Hb(t,i)});let i=e.syncPointTree_.get(n);i?r=r||Hb(i,w_()):(i=new zb,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Bv(r,!0,!1):null;return function(e){return Gv(e.viewCache_)}($b(i,t,lb(e.pendingWriteTree_,t._path),s?o.getNode():dv.EMPTY_NODE,s))}function lw(e,t){return cw(t,e.syncPointTree_,null,lb(e.pendingWriteTree_,w_()))}function cw(e,t,n,r){if(N_(e.path))return uw(e,t,n,r);{const i=t.get(w_());null==n&&null!=i&&(n=Hb(i,w_()));let s=[];const o=k_(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=bb(r,o);s=s.concat(cw(a,l,e,t))}return i&&(s=s.concat(Bb(i,e,r,n))),s}}function uw(e,t,n,r){const i=t.get(w_());null==n&&null!=i&&(n=Hb(i,w_()));let s=[];return t.children.inorderTraversal((t,i)=>{const o=n?n.getImmediateChild(t):null,a=bb(r,t),l=e.operationForChild(t);l&&(s=s.concat(uw(l,i,o,a)))}),i&&(s=s.concat(Bb(i,e,r,n))),s}function dw(e,t){const n=t.query,r=hw(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||dv.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=pw(e,n);if(r){const n=mw(r),i=n.path,s=n.queryId,o=P_(i,t);return gw(e,i,new Fv(Mv(s),o))}return[]}(e,n._path,r):function(e,t){return lw(e,new Fv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return rw(e,n,null,r)}}}}function hw(e,t){const n=fw(t);return e.queryToTagMap.get(n)}function fw(e){return e._path.toString()+"$"+e._queryIdentifier}function pw(e,t){return e.tagToQueryMap.get(t)}function mw(e){const t=e.indexOf("$");return Wd(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new b_(e.substr(0,t))}}function gw(e,t,n){const r=e.syncPointTree_.get(t);Wd(r,"Missing sync point for query tag that we're tracking");return Bb(r,n,lb(e.pendingWriteTree_,t),null)}function yw(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Wd(Ub,"Reference.ts has not been loaded"),Ub)(e._repo,e._path):e}class _w{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new _w(t)}node(){return this.node_}}class vw{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=x_(this.path_,e);return new vw(this.syncTree_,t)}node(){return ow(this.syncTree_,this.path_)}}const bw=function(e,t,n){return e&&"object"==typeof e?(Wd(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?ww(e[".sv"],t,n):"object"==typeof e[".sv"]?kw(e[".sv"],t):void Wd(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ww=function(e,t,n){if("timestamp"===e)return n.timestamp;Wd(!1,"Unexpected server value: "+e)},kw=function(e,t,n){e.hasOwnProperty("increment")||Wd(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&Wd(!1,"Unexpected increment value: "+r);const i=t.node();if(Wd(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},Tw=function(e,t,n,r){return Sw(t,new vw(n,e),r)},Cw=function(e,t,n){return Sw(e,new _w(t),n)};function Sw(e,t,n){const r=e.getPriority().val(),i=bw(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=bw(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new nv(s,fv(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new nv(i))),r.forEachChild(rv,(e,r)=>{const i=Sw(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))}),s}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Ew(e,t){let n=t instanceof b_?t:new b_(t),r=e,i=k_(n);for(;null!==i;){const e=kh(r.node.children,i)||{children:{},childCount:0};r=new Iw(i,r,e),n=C_(n),i=k_(n)}return r}function xw(e){return e.node.value}function Nw(e,t){e.node.value=t,Aw(e)}function Pw(e){return e.node.childCount>0}function Rw(e,t){qy(e.node.children,(n,r)=>{t(new Iw(n,e,r))})}function Dw(e,t,n,r){n&&t(e),Rw(e,e=>{Dw(e,t,!0)})}function Lw(e){return new b_(null===e.parent?e.name:Lw(e.parent)+"/"+e.name)}function Aw(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===xw(e)&&!Pw(e)}(n),i=wh(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Aw(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Aw(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.parent,e.name,e)}const Ow=/[\[\].#$\/\u0000-\u001F\u007F]/,Mw=/[\[\].#$\u0000-\u001F\u007F]/,jw=10485760,Fw=function(e){return"string"==typeof e&&0!==e.length&&!Ow.test(e)},Uw=function(e){return"string"==typeof e&&0!==e.length&&!Mw.test(e)},zw=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!My(e)||e&&"object"==typeof e&&wh(e,".sv")},Bw=function(e,t,n,r){$w(Rh(e,"value"),t,n)},$w=function(e,t,n){const r=n instanceof b_?new A_(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+M_(r));if("function"==typeof t)throw new Error(e+"contains a function "+M_(r)+" with contents = "+t.toString());if(My(t))throw new Error(e+"contains "+t.toString()+" "+M_(r));if("string"==typeof t&&t.length>jw/3&&Dh(t)>jw)throw new Error(e+"contains a string greater than "+jw+" utf8 bytes "+M_(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(qy(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Fw(t)))throw new Error(e+" contains an invalid key ("+t+") "+M_(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var o,a;a=t,(o=r).parts_.length>0&&(o.byteLength_+=1),o.parts_.push(a),o.byteLength_+=Dh(a),O_(o),$w(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=Dh(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw new Error(e+' contains ".value" child '+M_(r)+" in addition to actual children.")}},Ww=function(e,t,n,r){const i=Rh(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];qy(t,(e,t)=>{const r=new b_(e);if($w(i,t,x_(n,r)),".priority"===S_(r)&&!zw(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=I_(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!Fw(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(R_);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&L_(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},qw=function(e,t,n,r){if(!Uw(n))throw new Error(Rh(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Vw=function(e,t){if(".info"===k_(t))throw new Error(e+" failed = Can't modify data under /.info/")},Hw=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Fw(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Uw(e)}(n))throw new Error(Rh(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Gw{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Kw(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||D_(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Qw(e,t,n){Kw(e,n),Jw(e,e=>D_(e,t))}function Yw(e,t,n){Kw(e,n),Jw(e,e=>L_(e,t)||L_(t,e))}function Jw(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(Xw(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Xw(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Ny&&Ry("event: "+n.toString()),Ky(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gw,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xv(),this.transactionQueueTree_=new Iw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ek(e,t,n){if(e.stats_=l_(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Iv(e.repoInfo_,(t,n,r,i)=>{rk(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>ik(e,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{vh(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new U_(e.repoInfo_,t,(t,n,r,i)=>{rk(e,t,n,r,i)},t=>{ik(e,t)},t=>{!function(e,t){qy(t,(t,n)=>{sk(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return a_[n]||(a_[n]=t()),a_[n]}(e.repoInfo_,()=>new Lv(e.stats_,e.server_)),e.infoData_=new Ev,e.infoSyncTree_=new Xb({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=nw(e.infoSyncTree_,t._path,o),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),sk(e,"connected",!1),e.serverSyncTree_=new Xb({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{const s=i(n,r);Yw(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function tk(e){const t=e.infoData_.getNode(new b_(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function nk(e){return(t=(t={timestamp:tk(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function rk(e,t,n,r,i){e.dataUpdateCount++;const s=new b_(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=Ch(n,e=>fv(e));o=function(e,t,n,r){const i=pw(e,r);if(i){const r=mw(i),s=r.path,o=r.queryId,a=P_(s,t),l=Yv.fromObject(n);return gw(e,s,new zv(Mv(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=fv(n);o=iw(e.serverSyncTree_,s,t,i)}else if(r){const t=Ch(n,e=>fv(e));o=function(e,t,n){const r=Yv.fromObject(n);return lw(e,new zv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=fv(n);o=nw(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=pk(e,s)),Yw(e.eventQueue_,a,o)}function ik(e,t){sk(e,"connected",t),!1===t&&function(e){uk(e,"onDisconnectEvents");const t=nk(e),n=xv();Rv(e.onDisconnect_,w_(),(r,i)=>{const s=Tw(r,i,e.serverSyncTree_,t);Nv(n,r,s)});let r=[];Rv(n,w_(),(t,n)=>{r=r.concat(nw(e.serverSyncTree_,t,n));const i=vk(e,t);pk(e,i)}),e.onDisconnect_=xv(),Yw(e.eventQueue_,w_(),r)}(e)}function sk(e,t,n){const r=new b_("/.info/"+t),i=fv(n);e.infoData_.updateSnapshot(r,i);const s=nw(e.infoSyncTree_,r,i);Yw(e.eventQueue_,r,s)}function ok(e){return e.nextWriteId_++}function ak(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&Pv(e.onDisconnect_,t),dk(e,n,r,i)})}function lk(e,t,n,r){const i=fv(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(n,s)=>{"ok"===n&&Nv(e.onDisconnect_,t,i),dk(e,r,n,s)})}function ck(e,t,n){let r;r=".info"===k_(t._path)?rw(e.infoSyncTree_,t,n):rw(e.serverSyncTree_,t,n),Qw(e.eventQueue_,t._path,r)}function uk(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Ry(n,...t)}function dk(e,t,n,r){t&&Ky(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}})}function hk(e,t,n){return ow(e.serverSyncTree_,t,n)||dv.EMPTY_NODE}function fk(e,t=e.transactionQueueTree_){if(t||_k(e,t),xw(t)){const n=gk(e,t);Wd(n.length>0,"Sending zero length transaction queue");n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),i=hk(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Wd(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=P_(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,r=>{uk(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(tw(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();_k(e,Ew(e.transactionQueueTree_,t)),fk(e,e.transactionQueueTree_),Yw(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Ky(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Oy("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}pk(e,t)}},o)}(e,Lw(t),n)}else Pw(t)&&Rw(t,t=>{fk(e,t)})}function pk(e,t){const n=mk(e,t),r=Lw(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(e=>0===e.status),o=s.map(e=>e.currentWriteId);for(let a=0;a<t.length;a++){const s=t[a],l=P_(n,s.path);let c,u=!1;if(Wd(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)u=!0,c=s.abortReason,i=i.concat(tw(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)u=!0,c="maxretry",i=i.concat(tw(e.serverSyncTree_,s.currentWriteId,!0));else{const n=hk(e,s.path,o);s.currentInputSnapshot=n;const r=t[a].update(n.val());if(void 0!==r){$w("transaction failed: Data returned ",r,s.path);let t=fv(r);"object"==typeof r&&null!=r&&wh(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=nk(e),c=Cw(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=ok(e),o.splice(o.indexOf(a),1),i=i.concat(Zb(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(tw(e.serverSyncTree_,a,!0))}else u=!0,c="nodata",i=i.concat(tw(e.serverSyncTree_,s.currentWriteId,!0))}Yw(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(e){setTimeout(e,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&("nodata"===c?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(c),!1,null))))}_k(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)Ky(r[a]);fk(e,e.transactionQueueTree_)}(e,gk(e,n),r),r}function mk(e,t){let n,r=e.transactionQueueTree_;for(n=k_(t);null!==n&&void 0===xw(r);)r=Ew(r,n),n=k_(t=C_(t));return r}function gk(e,t){const n=[];return yk(e,t,n),n.sort((e,t)=>e.order-t.order),n}function yk(e,t,n){const r=xw(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Rw(t,t=>{yk(e,t,n)})}function _k(e,t){const n=xw(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Nw(t,n.length>0?n:void 0)}Rw(t,t=>{_k(e,t)})}function vk(e,t){const n=Lw(mk(e,t)),r=Ew(e.transactionQueueTree_,t);return function(e,t){let n=e.parent;for(;null!==n;){if(t(n))return!0;n=n.parent}}(r,t=>{bk(e,t)}),bk(e,r),Dw(r,t=>{bk(e,t)}),n}function bk(e,t){const n=xw(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Wd(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Wd(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(tw(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Nw(t,void 0):n.length=s+1,Yw(e.eventQueue_,Lw(t),i);for(let e=0;e<r.length;e++)Ky(r[e])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=function(e,t){const n=kk(e),r=n.namespace;"firebase.com"===n.domain&&Ay(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Ay("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Oy("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new r_(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new b_(n.pathString)}},kk=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Oy(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Tk{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+vh(this.snapshot.exportVal())}}class Ck{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Wd(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new oh;return ak(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Vw("OnDisconnect.remove",this._path);const e=new oh;return lk(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Vw("OnDisconnect.set",this._path),Bw("OnDisconnect.set",e,this._path);const t=new oh;return lk(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Vw("OnDisconnect.setWithPriority",this._path),Bw("OnDisconnect.setWithPriority",e,this._path),function(e,t){if(My(t))throw new Error(Rh(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!zw(t))throw new Error(Rh(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}("OnDisconnect.setWithPriority",t);const n=new oh;return function(e,t,n,r,i){const s=fv(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),(n,r)=>{"ok"===n&&Nv(e.onDisconnect_,t,s),dk(0,i,n,r)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){Vw("OnDisconnect.update",this._path),Ww("OnDisconnect.update",e,this._path);const t=new oh;return function(e,t,n,r){if(Th(n))return Ry("onDisconnect().update() called with empty data.  Don't do anything."),void dk(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(i,s)=>{"ok"===i&&qy(n,(n,r)=>{const i=fv(r);Nv(e.onDisconnect_,x_(t,n),i)}),dk(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return N_(this._path)?null:S_(this._path)}get ref(){return new xk(this._repo,this._path)}get _queryIdentifier(){const e=Sv(this._queryParams),t=$y(e);return"{}"===t?"default":t}get _queryObject(){return Sv(this._queryParams)}isEqual(e){if(!((e=Lh(e))instanceof Ek))return!1;const t=this._repo===e._repo,n=D_(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class xk extends Ek{constructor(e,t){super(e,t,new Tv,!1)}get parent(){const e=E_(this._path);return null===e?null:new xk(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Nk{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new b_(e),n=Rk(this.ref,e);return new Nk(this._node.getChild(t),n,rv)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,(t,n)=>e(new Nk(n,Rk(this.ref,t),rv)))}hasChild(e){const t=new b_(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Pk(e,t){return(e=Lh(e))._checkNotDeleted("ref"),void 0!==t?Rk(e._root,t):e._root}function Rk(e,t){var n,r,i;return null===k_((e=Lh(e))._path)?(n="child",r="path",(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),qw(n,r,i)):qw("child","path",t),new xk(e._repo,x_(e._path,t))}function Dk(e){return e=Lh(e),new Ik(e._repo,e._path)}function Lk(e){return Vw("remove",e._path),Ak(e,null)}function Ak(e,t){e=Lh(e),Vw("set",e._path),Bw("set",t,e._path);const n=new oh;return function(e,t,n,r,i){uk(e,"set",{path:t.toString(),value:n,priority:r});const s=nk(e),o=fv(n,r),a=ow(e.serverSyncTree_,t),l=Cw(o,a,s),c=ok(e),u=Zb(e.serverSyncTree_,t,l,c,!0);Kw(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,r)=>{const s="ok"===n;s||Oy("set at "+t+" failed: "+n);const o=tw(e.serverSyncTree_,c,!s);Yw(e.eventQueue_,t,o),dk(0,i,n,r)});const d=vk(e,t);pk(e,d),Yw(e.eventQueue_,d,[])}(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Ok(e,t){Ww("update",t,e._path);const n=new oh;return function(e,t,n,r){uk(e,"update",{path:t.toString(),value:n});let i=!0;const s=nk(e),o={};if(qy(n,(n,r)=>{i=!1,o[n]=Tw(x_(t,n),fv(r),e.serverSyncTree_,s)}),i)Ry("update() called with empty data.  Don't do anything."),dk(0,r,"ok",void 0);else{const i=ok(e),s=ew(e.serverSyncTree_,t,o,i);Kw(e.eventQueue_,s),e.server_.merge(t.toString(),n,(n,s)=>{const o="ok"===n;o||Oy("update at "+t+" failed: "+n);const a=tw(e.serverSyncTree_,i,!o),l=a.length>0?pk(e,t):t;Yw(e.eventQueue_,l,a),dk(0,r,n,s)}),qy(n,n=>{const r=vk(e,x_(t,n));pk(e,r)}),Yw(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function Mk(e){e=Lh(e);const t=new Sk(()=>{}),n=new jk(t);return function(e,t,n){const r=aw(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then(r=>{const i=fv(r).withIndex(t._queryParams.getIndex());let s;if(sw(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=nw(e.serverSyncTree_,t._path,i);else{const n=hw(e.serverSyncTree_,t);s=iw(e.serverSyncTree_,t._path,i,n)}return Yw(e.eventQueue_,t._path,s),rw(e.serverSyncTree_,t,n,null,!0),i},n=>(uk(e,"get for query "+vh(t)+" failed: "+n),Promise.reject(new Error(n))))}(e._repo,e,n).then(t=>new Nk(t,new xk(e._repo,e._path),e._queryParams.getIndex()))}class jk{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Tk("value",this,new Nk(e.snapshotNode,new xk(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ck(this,e,t):null}matches(e){return e instanceof jk&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}function Fk(e,t,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{ck(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new Sk(n,s||void 0),a=new jk(o);return function(e,t,n){let r;r=".info"===k_(t._path)?sw(e.infoSyncTree_,t,n):sw(e.serverSyncTree_,t,n),Qw(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>ck(e._repo,e,a)}function Uk(e,t,n,r){return Fk(e,0,t,n,r)}class zk{}class Bk extends zk{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ek(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}function $k(e){if(Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Bk(e)}class Wk extends zk{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){!function(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}(e,"orderByChild");const t=new b_(this._path);if(N_(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new pv(t),r=function(e,t){const n=e.copy();return n.index_=t,n}(e._queryParams,n);return function(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===q_){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==jy)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Fy)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===rv){if(null!=t&&!zw(t)||null!=n&&!zw(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Wd(e.getIndex()instanceof pv||e.getIndex()===mv,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}(r),new Ek(e._repo,e._path,r,!0)}}function qk(e){return qw("orderByChild","path",e),new Wk(e)}function Vk(e,...t){let n=Lh(e);for(const r of t)n=r._apply(n);return n}!function(e){Wd(!Fb,"__referenceConstructor has already been defined"),Fb=e}(xk),function(e){Wd(!Ub,"__referenceConstructor has already been defined"),Ub=e}(xk);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Hk={};let Gk=!1;function Kk(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||Ay("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ry("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a=wk(s,i),l=a.repoInfo;"undefined"!=typeof process&&gy&&(o=gy.FIREBASE_DATABASE_EMULATOR_HOST),o?(s=`http://${o}?ns=${l.namespace}`,a=wk(s,i),l=a.repoInfo):a.repoInfo.secure;const c=new Jy(e.name,e.options,t);Hw("Invalid Firebase Database URL",a),N_(a.path)||Ay("Database URL must point to the root of a Firebase Database (not including a child path).");const u=function(e,t,n,r){let i=Hk[t.name];i||(i={},Hk[t.name]=i);let s=i[e.toURLString()];s&&Ay("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Zw(e,Gk,n,r),i[e.toURLString()]=s,s}(l,e,c,new Yy(e,n));return new Qk(u,e)}class Qk{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ek(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xk(this._repo,w_())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Hk[t];n&&n[e.key]===e||Ay(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ay("Cannot call "+e+" on a deleted database.")}}function Yk(e=Jf(),t){const n=Vf(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=rh("database");e&&function(e,t,n,r={}){e=Lh(e),e._checkNotDeleted("useEmulator");const i=`${t}:${n}`,s=e._repoInternal;if(e._instanceStarted){if(i===e._repoInternal.repoInfo_.host&&Sh(r,s.repoInfo_.emulatorOptions))return;Ay("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Ay('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Xy(Xy.OWNER);else if(r.mockUserToken){const t="string"==typeof r.mockUserToken?r.mockUserToken:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[Qd(JSON.stringify({alg:"none",type:"JWT"})),Qd(JSON.stringify(s)),""].join(".")}(r.mockUserToken,e.app.options.projectId);o=new Xy(t)}ah(t)&&(lh(t),dh("Database",!0));!function(e,t,n,r){const i=t.lastIndexOf(":"),s=ah(t.substring(0,i));e.repoInfo_=new r_(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}(s,i,r,o)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,...e)}return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Jk={".sv":"timestamp"};function Xk(){return Jk}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function eT(e,t,n){if(e=Lh(e),Vw("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const r=new oh,i=Uk(e,()=>{});return function(e,t,n,r,i,s){uk(e,"transaction on "+t);const o={path:t,update:n,onComplete:r,status:null,order:Iy(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=hk(e,t,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{$w("transaction failed: Data returned ",l,o.path),o.status=0;const n=Ew(e.transactionQueueTree_,t),r=xw(n)||[];let i;r.push(o),Nw(n,r),"object"==typeof l&&null!==l&&wh(l,".priority")?(i=kh(l,".priority"),Wd(zw(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(ow(e.serverSyncTree_,t)||dv.EMPTY_NODE).getPriority().val();const s=nk(e),c=fv(l,i),u=Cw(c,a,s);o.currentOutputSnapshotRaw=c,o.currentOutputSnapshotResolved=u,o.currentWriteId=ok(e);const d=Zb(e.serverSyncTree_,t,u,o.currentWriteId,o.applyLocally);Yw(e.eventQueue_,t,d),fk(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(t,n,i)=>{let s=null;t?r.reject(t):(s=new Nk(i,new xk(e._repo,e._path),rv),r.resolve(new Zk(n,s)))},i,!0),r.promise}U_.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},U_.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},function(e){vy=Qf,qf(new Ah("database",(e,{instanceIdentifier:t})=>Kk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),Xf(yy,_y,e),Xf(yy,_y,"esm2020")}();function tT(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function nT(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>nT(e));if("function"==typeof e||"object"==typeof e)return tT(e,e=>nT(e));throw new Error("Data cannot be encoded in JSON: "+e)}function rT(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>rT(e)):"function"==typeof e||"object"==typeof e?tT(e,e=>rT(e)):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="functions",sT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT extends mh{constructor(e,t,n){super(`${iT}/${e}`,t||""),this.details=n,Object.setPrototypeOf(this,oT.prototype)}}function aT(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"==typeof t){if(!sT[t])return new oT("internal","internal");r=sT[t],i=t}const s=e.message;"string"==typeof s&&(i=s),n=e.details,void 0!==n&&(n=rT(n))}}catch(s){}return"ok"===r?null:new oT(r,i,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,t,n,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Hf(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(e=>this.auth=e,()=>{}),this.messaging||n.get().then(e=>this.messaging=e,()=>{}),this.appCheck||null==r||r.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null==e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="us-central1",uT=/^data: (.*?)(?:\n|$)/;class dT{constructor(e,t,n,r,i=cT,s=(...e)=>fetch(...e)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new lT(e,t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(i);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=cT}catch(o){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){return`${this.emulatorOrigin}/${t}/${this.region}/${e}`}return null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function hT(e,t,n){const r=n=>function(e,t,n,r){const i=e._url(t);return async function(e,t,n,r){n=nT(n);const i={data:n},s=await mT(e,r),o=r.timeout||7e4,a=function(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new oT("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(o),l=await Promise.race([pT(t,i,s,e.fetchImpl,e),a.promise,e.cancelAllRequests]);if(a.cancel(),!l)throw new oT("cancelled","Firebase Functions instance was deleted.");const c=aT(l.status,l.json);if(c)throw c;if(!l.json)throw new oT("internal","Response is not valid JSON object.");let u=l.json.data;void 0===u&&(u=l.json.result);if(void 0===u)throw new oT("internal","Response is missing data field.");return{data:rT(u)}}(e,i,n,r)}(e,t,n,{});return r.stream=(n,r)=>function(e,t,n,r){const i=e._url(t);return async function(e,t,n,r){var i;n=nT(n);const s={data:n},o=await mT(e,r);let a,l,c;o["Content-Type"]="application/json",o.Accept="text/event-stream";try{a=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(s),headers:o,signal:null==r?void 0:r.signal,credentials:fT(e)})}catch(h){if(h instanceof Error&&"AbortError"===h.name){const e=new oT("cancelled","Request was cancelled.");return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const e=aT(0,null);return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const u=new Promise((e,t)=>{l=e,c=t});null==(i=null==r?void 0:r.signal)||i.addEventListener("abort",()=>{const e=new oT("cancelled","Request was cancelled.");c(e)});const d=function(e,t,n,r){const i=(e,r)=>{const i=e.match(uT);if(!i)return;const s=i[1];try{const e=JSON.parse(s);if("result"in e)return void t(rT(e.result));if("message"in e)return void r.enqueue(rT(e.message));if("error"in e){const t=aT(0,e);return r.error(t),void n(t)}}catch(o){if(o instanceof oT)return r.error(o),void n(o)}},s=new TextDecoder;return new ReadableStream({start(t){let o="";return a();async function a(){if(null==r?void 0:r.aborted){const e=new oT("cancelled","Request was cancelled");return t.error(e),n(e),Promise.resolve()}try{const{value:l,done:c}=await e.read();if(c)return o.trim()&&i(o.trim(),t),void t.close();if(null==r?void 0:r.aborted){const r=new oT("cancelled","Request was cancelled");return t.error(r),n(r),void(await e.cancel())}o+=s.decode(l,{stream:!0});const u=o.split("\n");o=u.pop()||"";for(const e of u)e.trim()&&i(e.trim(),t);return a()}catch(l){const e=l instanceof oT?l:aT(0,null);t.error(e),n(e)}}},cancel:()=>e.cancel()})}(a.body.getReader(),l,c,null==r?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const e=d.getReader();return{async next(){const{value:t,done:n}=await e.read();return{value:t,done:n}},return:async()=>(await e.cancel(),{done:!0,value:void 0})}}},data:u}}(e,i,n,r||{})}(e,t,n,r),r}function fT(e){return e.emulatorOrigin&&ah(e.emulatorOrigin)?"include":void 0}async function pT(e,t,n,r,i){let s;n["Content-Type"]="application/json";try{s=await r(e,{method:"POST",body:JSON.stringify(t),headers:n,credentials:fT(i)})}catch(a){return{status:0,json:null}}let o=null;try{o=await s.json()}catch(a){}return{status:s.status,json:o}}async function mT(e,t){const n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),null!==r.appCheckToken&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}const gT="@firebase/functions",yT="0.13.1";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _T(e=Jf(),t=cT){const n=Vf(Lh(e),iT).getImmediate({identifier:t}),r=rh("functions");return r&&function(e,t,n){!function(e,t,n){const r=ah(t);e.emulatorOrigin=`http${r?"s":""}://${t}:${n}`,r&&(lh(e.emulatorOrigin+"/backends"),dh("Functions",!0))}(Lh(e),t,n)}(n,...r),n}function vT(e,t,n){return hT(Lh(e),t)}!function(e){qf(new Ah(iT,(e,{instanceIdentifier:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("messaging-internal"),s=e.getProvider("app-check-internal");return new dT(n,r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Xf(gT,yT,e),Xf(gT,yT,"esm2020")}();const bT={apiKey:"AIzaSyAapEmqdhRMQgRyrXIzhhMGSvNbpfQlaoM",authDomain:"quikdarts.firebaseapp.com",databaseURL:"https://quikdarts-default-rtdb.europe-west1.firebasedatabase.app",projectId:"quikdarts",storageBucket:"quikdarts.firebasestorage.app",messagingSenderId:"287454496132",appId:"1:287454496132:web:dd17354a71f9eb907f89d1"};let wT,kT=null,TT=null,CT=null,ST=null;const IT=new Promise(e=>{wT=e});let ET=!1;const xT=()=>{var e;if(!Boolean(bT.apiKey&&bT.authDomain&&bT.projectId))return console.warn("Firebase not configured. Add environment variables to enable online features."),null;if(!kT){kT=Yf(bT);if(ry.isNativePlatform()&&(null==(e=ry.Plugins)?void 0:e.FirebaseAuthentication)){console.log(" Using native Firebase Authentication plugin");const e=ry.Plugins.FirebaseAuthentication;TT={signInAnonymously:async()=>{const t=await e.signInAnonymously();return TT.currentUser=t.user,t},signOut:()=>e.signOut(),currentUser:null,onAuthStateChanged:t=>(e.getCurrentUser().then(e=>{TT.currentUser=e.user,t(e.user)}).catch(()=>t(null)),e.addListener("authStateChange",e=>{TT.currentUser=e.user,t(e.user)}),()=>{})}}else TT=Jg(kT);CT=Yk(kT),ST=_T(kT,"europe-west1");const t=e=>{if(e)ET||(ET=!0,wT(e));else{("function"==typeof TT.signInAnonymously?()=>TT.signInAnonymously():()=>Mm(TT))().catch(e=>{console.warn("Anonymous auth failed:",e),ET||(ET=!0,wT(null))})}};"function"==typeof TT.onAuthStateChanged?TT.onAuthStateChanged(t):Um(TT,t)}return{app:kT,auth:TT,database:CT,functions:ST}},NT=()=>(TT||xT(),TT),PT=()=>(CT||xT(),CT),RT=()=>(ST||xT(),ST);function DT(){const[e,t]=U.useState(null),[n,r]=U.useState(!0),[i,s]=U.useState(null);U.useEffect(()=>{const e=NT();if(!e)return void r(!1);const n=e,i="function"==typeof n.onAuthStateChanged?n.onAuthStateChanged(e=>{t(e),r(!1),s(null)}):Um(e,e=>{t(e),r(!1),s(null)},e=>{console.error("Auth state error:",e),s(e.message),r(!1)});return()=>i()},[]);const o=U.useCallback(async()=>{const e=NT();if(!e)return s("Firebase not configured"),null;try{r(!0),s(null);const n=e,i="function"==typeof n.signInAnonymously?await n.signInAnonymously():await Mm(e);return t(i.user),i.user}catch(n){const e=n instanceof Error?n.message:"Sign in failed";return s(e),console.error("Anonymous sign in error:",n),null}finally{r(!1)}},[]),a=U.useCallback(async()=>{const e=NT();if(!e)return s("Firebase not configured"),null;try{r(!0),s(null);const n=new Rm,i=await pg(e,n);return t(i.user),i.user}catch(n){const e=n instanceof Error?n.message:"Google sign in failed";return s(e),console.error("Google sign in error:",n),null}finally{r(!1)}},[]),l=U.useCallback(async()=>{const e=NT();if(!e)return s("Firebase not configured"),null;try{r(!0),s(null);const n=new Pm,i=await pg(e,n);return t(i.user),i.user}catch(n){const e=n instanceof Error?n.message:"Facebook sign in failed";return s(e),console.error("Facebook sign in error:",n),null}finally{r(!1)}},[]),c=U.useCallback(async()=>{const e=NT();if(!e)return s("Firebase not configured"),null;try{r(!0),s(null);const n=new Nm("apple.com"),i=await pg(e,n);return t(i.user),i.user}catch(n){const e=n instanceof Error?n.message:"Apple sign in failed";return s(e),console.error("Apple sign in error:",n),null}finally{r(!1)}},[]),u=U.useCallback(async()=>{const e=NT();if(e)try{const n=e;"function"==typeof n.signOut?await n.signOut():await function(e){return Lh(e).signOut()}(e),t(null)}catch(n){const e=n instanceof Error?n.message:"Sign out failed";s(e),console.error("Sign out error:",n)}},[]);return{user:e,isLoading:n,isAuthenticated:!!e,isAnonymous:(null==e?void 0:e.isAnonymous)??!1,error:i,signInAnonymous:o,signInWithGoogle:a,signInWithFacebook:l,signInWithApple:c,signOut:u}}const LT=new Set(["fuck","shit","bitch","cunt","dick","cock","pussy","whore","slut","fag","nigger","nigga","retard"]),AT={0:"o",1:"i",3:"e",4:"a",5:"s",7:"t","@":"a",$:"s","!":"i"};function OT(e){return e.toLowerCase().split("").map(e=>AT[e]??e).join("").replace(/[^a-z]/g,"")}function MT(e){return e<=1?0:Math.floor(50*e*Math.pow(1.08,e-1))}function jT(){const[e,t]=U.useState(null),[n,r]=U.useState(null),[i,s]=U.useState(null),[o,a]=U.useState(!0),[l,c]=U.useState(!1),u=U.useRef(null);U.useEffect(()=>{const e=NT(),n=PT();if(!e||!n)return void a(!1);const i=()=>{u.current&&(u.current(),u.current=null)},o=e=>{if(i(),t(null),r(null),s(null),!e||e.isAnonymous)return void a(!1);a(!0);const o=e.uid,l=Pk(n,`users/${o}/profile`),c=Pk(n,`users/${o}/progression`),d=Pk(n,`users/${o}/streaks`),h=[],f=Uk(l,e=>{t(e.val()||null),a(!1)},e=>{console.error("[useProfile] Profile listener error:",e),a(!1)});h.push(f);const p=Uk(c,e=>{r(e.val()||null)},e=>{console.error("[useProfile] Progression listener error:",e)});h.push(p);const m=Uk(d,e=>{s(e.val()||null)},e=>{console.error("[useProfile] Streaks listener error:",e)});h.push(m),u.current=()=>{h.forEach(e=>e())}},l="function"==typeof e.onAuthStateChanged?e.onAuthStateChanged(o):Um(e,o);return()=>{l(),i()}},[]);return{userProfile:e,userProgression:n,userStreaks:i,isLoading:o,isSavingNickname:l,saveNickname:U.useCallback(async e=>{const t=NT(),n=PT();if(!t||!n)return{success:!1,error:"Not connected"};const r=t.currentUser;if(!r||r.isAnonymous)return{success:!1,error:"Must be signed in to change nickname"};const i=function(e){const t=e.trim();if(t.length<1)return{valid:!1,error:"Nickname cannot be empty"};if(t.length>20)return{valid:!1,error:"Nickname must be 20 characters or less"};const n=t.split(/[^a-z0-9@$!]+/i).filter(Boolean).map(OT);if(n.some(e=>LT.has(e)))return{valid:!1,error:"Nickname contains inappropriate language"};const r=n.join("");return LT.has(r)?{valid:!1,error:"Nickname contains inappropriate language"}:{valid:!0}}(e);if(!i.valid)return{success:!1,error:i.error};c(!0);try{const t=Pk(n,`users/${r.uid}/profile`);return await Ok(t,{displayName:e.trim()}),{success:!0}}catch(s){return console.error("[useProfile] saveNickname error:",s.message),{success:!1,error:"Failed to save nickname"}}finally{c(!1)}},[])}}const FT={count:1,names:["Player 1","Player 2","Player 3","Player 4"],gameMode:501,aiPlayers:[!1,!1,!1,!1],aiDifficulty:[null,null,null,null],legsPerSet:3,setsToWin:1,flags:["","","",""]},UT=()=>({dartsThrown:0,totalScore:0,averagePerDart:0,averagePerTurn:0,highest3DartScore:0,checkoutPercentage:0,triples:0,doubles:0,bulls:0,one80s:0});const zT={themeId:"classic",neonColor:"cyan",savedAt:(new Date).toISOString()};function BT(){return function(e,t,n={}){const{serializer:r=JSON.stringify,deserializer:i=JSON.parse,validator:s}=n,[o,a]=U.useState(()=>{try{const n=localStorage.getItem(e);if(null===n)return t;const r=i(n);if(s){if(!s(r))return console.warn(`Invalid data in localStorage for key "${e}", using default`),t}else console.warn(`SECURITY: No validator for localStorage key "${e}". User-manipulated data may cause unexpected behavior.`);return r}catch(n){return console.error(`Error reading localStorage key "${e}":`,n),t}});U.useEffect(()=>{try{localStorage.setItem(e,r(o))}catch(t){console.error(`Error writing to localStorage key "${e}":`,t)}},[e,o,r]);const l=U.useCallback(e=>{a(t=>e instanceof Function?e(t):e)},[]),c=U.useCallback(()=>{try{localStorage.removeItem(e),a(t)}catch(n){console.error(`Error removing localStorage key "${e}":`,n)}},[e,t]);return[o,l,c]}("quikdarts_theme",zT,{validator:e=>{if(!e||"object"!=typeof e)return!1;const t=e;return"string"==typeof t.themeId&&"string"==typeof t.neonColor}})}function $T(){const[e,t]=BT(),n="string"==typeof(r=e.themeId)&&r in gd?e.themeId:pd.id;var r;const i="string"==typeof(s=e.neonColor)&&Object.values(fd).includes(s)?e.neonColor:fd.CYAN;var s;const o=U.useMemo(()=>{const e=gd[n]||pd;if(n===md.id){const t=function(e){const t={cyan:{primary:"#00ffff",secondary:"#00d4ff",glow:"rgba(0, 255, 255, 0.6)"},magenta:{primary:"#ff00ff",secondary:"#ff44aa",glow:"rgba(255, 0, 255, 0.6)"},green:{primary:"#00ff66",secondary:"#44ff88",glow:"rgba(0, 255, 102, 0.6)"},orange:{primary:"#ff8800",secondary:"#ffaa44",glow:"rgba(255, 136, 0, 0.6)"}};return t[e]||t.cyan}(i);return{...e,colors:{...e.colors,wire:t.primary,numbers:t.primary},wireStyle:{...e.wireStyle,glowColor:t.glow}}}return e},[n,i]),a=U.useMemo(()=>Object.values(gd).map(e=>({id:e.id,name:e.name,description:e.description,premiumOnly:e.premiumOnly})),[]),l=U.useCallback(e=>{t(t=>({...t,themeId:e,savedAt:(new Date).toISOString()}))},[t]),c=U.useCallback(e=>{t(t=>({...t,neonColor:e,savedAt:(new Date).toISOString()}))},[t]);return{theme:o,themeId:n,neonColor:i,availableThemes:a,selectTheme:l,selectNeonColor:c}}const WT=new Set;function qT(){const[e,t]=U.useState(0),[n,r]=U.useState(!1),[i,s]=U.useState(0),[o,a]=U.useState(!0),[l,c]=U.useState(!1),u=U.useRef(!1),d=U.useRef(null);U.useEffect(()=>{const e=NT(),n=PT(),i=RT();if(!e||!n)return void a(!1);const o=()=>{d.current&&(d.current(),d.current=null)},l=e=>{if(o(),t(0),r(!1),s(0),!e||e.isAnonymous)return void a(!1);a(!0);const l=e.uid,c=Uk(Pk(n,`users/${l}/wallet`),async e=>{const n=e.val();if(!n){if(!WT.has(l)&&i){WT.add(l);try{const e=vT(i,"initializeNewUser");await e(),console.log("[useWallet] Wallet initialized for user:",l)}catch(y){console.error("[useWallet] Failed to initialize wallet:",y.message)}}return void a(!1)}t(n.coins||0);const o=n.lastDailyBonus||0,c=Date.now(),u=e=>e?new Date(e).toLocaleDateString("en-CA"):"",d=u(o),h=u(c);r(!o||d!==h);const f=n.lastAdReward||0,p=864e5,m=Math.floor(f/p),g=Math.floor(c/p)>m?0:n.adRewardsToday||0;s(Math.max(0,5-g)),a(!1)},e=>{console.error("[useWallet] Listener error:",e),a(!1)});d.current=c},c="function"==typeof e.onAuthStateChanged?e.onAuthStateChanged(l):Um(e,l);return()=>{c(),o()}},[]);return{coinBalance:e,dailyBonusAvailable:n,adsRemainingToday:i,isLoading:o,isClaimingBonus:l,claimDailyBonus:U.useCallback(async()=>{if(u.current)return;u.current=!0;const e=NT(),t=RT();if(!e||!t)return void(u.current=!1);const n=e.currentUser;if(n&&!n.isAnonymous){c(!0);try{const e=vT(t,"claimDailyBonus"),n=(await e({timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})).data;if(n.success){r(!1);const e="number"==typeof n.coinsAwarded?n.coinsAwarded:0;alert(`+${e} coins claimed!`)}else{const e=n.error||"Failed to claim bonus";if(n.nextClaimTime){const t=new Date(n.nextClaimTime);alert(`${e}. Next claim available: ${t.toLocaleString()}`)}else alert(e)}}catch(i){console.error("[useWallet] claimDailyBonus error:",i.message),alert("Failed to claim daily bonus. Please try again.")}finally{c(!1),u.current=!1}}else u.current=!1},[])}}const VT=({size:e=20,color:t="currentColor",className:n})=>K.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:n,children:[K.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:t,strokeWidth:"2"}),K.jsx("path",{d:"M2 12H22M12 2C14.5 4.5 16 8 16 12C16 16 14.5 19.5 12 22C9.5 19.5 8 16 8 12C8 8 9.5 4.5 12 2Z",stroke:t,strokeWidth:"2"})]}),HT=({size:e=20,color:t="currentColor",className:n})=>K.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:n,children:[K.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:t,strokeWidth:"2"}),K.jsx("circle",{cx:"12",cy:"12",r:"6",stroke:t,strokeWidth:"2"}),K.jsx("circle",{cx:"12",cy:"12",r:"2",fill:t})]}),GT=({size:e=24,color:t="currentColor",className:n})=>K.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:n,children:K.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:t,strokeWidth:"2",strokeLinecap:"round"})}),KT=({size:e=16,className:t})=>K.jsx("img",{src:"/assets/coin-chip.png",alt:"","aria-hidden":"true",width:e,height:e,className:t,style:{objectFit:"contain"},decoding:"async"}),QT=({size:e=20,color:t="currentColor",className:n})=>K.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:n,children:[K.jsx("path",{d:"M11 5L6 9H2V15H6L11 19V5Z",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),K.jsx("path",{d:"M19.07 4.93C20.9447 6.80528 21.9979 9.34836 21.9979 12C21.9979 14.6516 20.9447 17.1947 19.07 19.07M15.54 8.46C16.4774 9.39764 17.004 10.6692 17.004 11.995C17.004 13.3208 16.4774 14.5924 15.54 15.53",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),YT=({size:e=20,color:t="currentColor",className:n})=>K.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",className:n,children:[K.jsx("path",{d:"M11 5L6 9H2V15H6L11 19V5Z",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),K.jsx("path",{d:"M23 9L17 15M17 9L23 15",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),JT=[{amount:50,label:"Casual",description:"Low stakes, perfect for warming up"},{amount:100,label:"Standard",description:"The most popular stake level"},{amount:500,label:"High Roller",description:"For confident players"},{amount:2500,label:"Champion",description:"Maximum risk, maximum reward"}];function XT(e){return e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString()}function ZT({coinBalance:e,selectedStake:t,onSelectStake:n,onConfirm:r,onPlayFree:i,onClose:s,isLoading:o=!1}){const a=e>=t;return K.jsx("div",{className:"stake-selector-overlay",onClick:s,children:K.jsxs("div",{className:"stake-selector",onClick:e=>e.stopPropagation(),children:[K.jsx("button",{className:"stake-selector__close",onClick:s,children:K.jsx(GT,{size:24})}),K.jsxs("div",{className:"stake-selector__header",children:[K.jsx("h2",{className:"stake-selector__title",children:"Choose Your Stake"}),K.jsxs("div",{className:"stake-selector__balance",children:[K.jsx(KT,{size:20}),K.jsxs("span",{children:["Your Balance: ",XT(e)]})]}),K.jsx("p",{className:"stake-selector__subtitle",children:"Winner takes the entire pot!"})]}),K.jsx("div",{className:"stake-selector__options",children:JT.map(r=>{const i=t===r.amount,s=e>=r.amount,o=2*r.amount;return K.jsxs("button",{className:`stake-option ${i?"stake-option--selected":""} ${s?"":"stake-option--disabled"}`,onClick:()=>s&&n(r.amount),disabled:!s,children:[K.jsxs("div",{className:"stake-option__left",children:[K.jsxs("div",{className:"stake-option__label-row",children:[K.jsx("span",{className:"stake-option__label",children:r.label}),!s&&K.jsxs("span",{className:"stake-option__need-more",children:["Need ",r.amount-e," more"]})]}),K.jsx("p",{className:"stake-option__description",children:r.description})]}),K.jsxs("div",{className:"stake-option__right",children:[K.jsxs("div",{className:"stake-option__amount",children:[K.jsx(KT,{size:14}),K.jsx("span",{children:XT(r.amount)})]}),K.jsxs("p",{className:"stake-option__win",children:["Win ",XT(o)]})]})]},r.amount)})}),K.jsxs("div",{className:"stake-selector__actions",children:[K.jsxs("button",{className:"btn btn-primary stake-selector__confirm",onClick:r,disabled:!a||o,children:[K.jsx(VT,{size:20}),o?"Creating...":`Play for ${XT(t)} Coins`]}),K.jsx("button",{className:"btn btn-ghost stake-selector__free",onClick:i,disabled:o,children:"Play Free Instead"})]})]})})}function eC(e){return e.toLocaleString()}function tC({onClose:e}){const{user:t}=DT(),{userProfile:n,userProgression:r,userStreaks:i,isSavingNickname:s,saveNickname:o}=jT(),{coinBalance:a}=qT(),[l,c]=U.useState(!1),[u,d]=U.useState(""),[h,f]=U.useState(null),p=(null==r?void 0:r.level)||1,m=(null==r?void 0:r.xp)||0,g=MT(p),y=MT(p+1),_=y>g?(m-g)/(y-g):1,v=(null==r?void 0:r.gamesPlayed)||0,b=(null==r?void 0:r.gamesWon)||0,w=v>0?(b/v*100).toFixed(1):"0.0",k=(null==i?void 0:i.currentWinStreak)||0,T=(null==i?void 0:i.bestWinStreak)||0,C=function(e){return e>=80?"Legend":e>=60?"Master":e>=40?"Expert":e>=25?"Veteran":e>=15?"Skilled":e>=8?"Amateur":e>=3?"Novice":"Rookie"}(p),S=(null==n?void 0:n.displayName)||(null==t?void 0:t.displayName)||"Player",I=U.useMemo(()=>{var e;return(null==(e=S[0])?void 0:e.toUpperCase())||"P"},[S]),E=U.useCallback(()=>{d(S),c(!0),f(null)},[S]),x=U.useCallback(()=>{c(!1),d(""),f(null)},[]),N=U.useCallback(async()=>{const e=u.trim();if(e.length<1||e.length>20)return;const t=await o(e);t.success?(c(!1),d(""),f(null)):f(t.error)},[u,o]),P=U.useCallback(()=>{const e=(null==n?void 0:n.uniqueId)||"N/A";navigator.clipboard.writeText(e).then(()=>{console.log("Player ID copied to clipboard")}).catch(()=>{console.log("Failed to copy ID")})},[null==n?void 0:n.uniqueId]),R=U.useCallback(e=>{"Enter"===e.key&&N(),"Escape"===e.key&&x()},[N,x]);return K.jsxs("div",{className:"profile-screen",children:[K.jsx("div",{className:"profile-screen__bg"}),K.jsxs("div",{className:"profile-screen__container",children:[K.jsxs("div",{className:"profile-screen__header",children:[K.jsx("h1",{className:"profile-screen__title",children:"Profile"}),K.jsx("button",{className:"btn btn-ghost",onClick:e,children:"Back"})]}),K.jsxs("div",{className:"profile-screen__content",children:[K.jsxs("div",{className:"profile-card",children:[K.jsxs("div",{className:"profile-card__avatar-wrapper",children:[(null==t?void 0:t.photoURL)?K.jsx("img",{src:t.photoURL,alt:"Profile",className:"profile-card__avatar-img",referrerPolicy:"no-referrer"}):K.jsx("div",{className:"profile-card__avatar-initial",children:I}),K.jsx("div",{className:"profile-card__level-badge",children:p})]}),l?K.jsxs("div",{className:"profile-card__nickname-edit",children:[K.jsx("input",{type:"text",value:u,onChange:e=>d(e.target.value.slice(0,20)),placeholder:"Enter nickname...",maxLength:20,autoFocus:!0,className:"profile-card__nickname-input",onKeyDown:R}),K.jsxs("div",{className:"profile-card__nickname-actions",children:[K.jsx("button",{onClick:N,disabled:s,className:"profile-card__save-btn",children:s?"Saving...":"Save"}),K.jsx("button",{onClick:x,className:"profile-card__cancel-btn",children:"Cancel"})]}),h&&K.jsx("span",{className:"profile-card__nickname-error",children:h})]}):K.jsxs("div",{className:"profile-card__name-row",children:[K.jsx("h2",{className:"profile-card__name",children:S}),K.jsx("button",{onClick:E,className:"profile-card__edit-btn",title:"Edit display name",children:""})]}),K.jsxs("div",{className:"profile-card__rank",children:[(null==n?void 0:n.flag)||""," ",C]}),K.jsxs("div",{className:"profile-card__id-box",children:[K.jsx("div",{className:"profile-card__id-label",children:"Player ID"}),K.jsxs("div",{className:"profile-card__id-row",children:[K.jsx("span",{className:"profile-card__id-value",children:(null==n?void 0:n.uniqueId)||"N/A"}),K.jsx("button",{onClick:P,className:"profile-card__copy-btn",title:"Copy ID",children:""})]})]}),K.jsxs("div",{className:"profile-card__coins",children:[K.jsx(KT,{size:20}),K.jsx("span",{className:"profile-card__coins-value",children:eC(a)})]})]}),K.jsxs("div",{className:"profile-stats",children:[K.jsxs("div",{className:"stats-card",children:[K.jsxs("div",{className:"stats-card__header",children:[K.jsx("span",{className:"stats-card__label",children:"Level Progress"}),K.jsxs("span",{className:"stats-card__value-accent",children:["Level ",p]})]}),K.jsx("div",{className:"progress-bar progress-bar--large",children:K.jsx("div",{className:"progress-bar__fill progress-bar__fill--accent",style:{width:100*_+"%"}})}),K.jsxs("div",{className:"stats-card__footer",children:[K.jsxs("span",{children:[eC(m)," XP"]}),K.jsxs("span",{children:[eC(y)," XP"]})]})]}),K.jsxs("div",{className:"stats-card",children:[K.jsx("h3",{className:"stats-card__title",children:"Player Stats"}),K.jsxs("div",{className:"stats-grid",children:[K.jsxs("div",{className:"stats-grid__item",children:[K.jsx("div",{className:"stats-grid__label",children:"Games Played"}),K.jsx("div",{className:"stats-grid__value",children:v})]}),K.jsxs("div",{className:"stats-grid__item",children:[K.jsx("div",{className:"stats-grid__label",children:"Games Won"}),K.jsx("div",{className:"stats-grid__value stats-grid__value--success",children:b})]}),K.jsxs("div",{className:"stats-grid__item",children:[K.jsx("div",{className:"stats-grid__label",children:"Win Rate"}),K.jsxs("div",{className:"stats-grid__value stats-grid__value--accent",children:[w,"%"]})]}),K.jsxs("div",{className:"stats-grid__item",children:[K.jsx("div",{className:"stats-grid__label",children:"Total Coins"}),K.jsx("div",{className:"stats-grid__value stats-grid__value--accent",children:eC(a)})]})]})]}),K.jsxs("div",{className:"stats-card",children:[K.jsx("h3",{className:"stats-card__title",children:"Win Streaks"}),K.jsxs("div",{className:"stats-grid stats-grid--half",children:[K.jsxs("div",{className:"stats-grid__item",children:[K.jsx("div",{className:"stats-grid__label",children:"Current Streak"}),K.jsxs("div",{className:"stats-grid__value "+(k>0?"stats-grid__value--success":""),children:[k," ",k>0&&""]})]}),K.jsxs("div",{className:"stats-grid__item",children:[K.jsx("div",{className:"stats-grid__label",children:"Best Streak"}),K.jsxs("div",{className:"stats-grid__value stats-grid__value--accent",children:[T," "]})]})]})]})]})]})]})]})}const nC=[{id:"starter",coins:500,price:"$0.99",popular:!1},{id:"popular",coins:1200,price:"$1.99",popular:!0},{id:"best_value",coins:3500,price:"$4.99",popular:!1},{id:"pro",coins:8e3,price:"$9.99",popular:!1},{id:"champion",coins:2e4,price:"$19.99",popular:!1}];function rC(e){return e.toLocaleString()}function iC({coinBalance:e,onClose:t}){const[n,r]=U.useState(!1),i=U.useCallback(async e=>{const t=RT(),i=NT();if(!t||!i)return void console.error("Firebase not initialized");const s=i.currentUser;if(s&&!s.isAnonymous){if(!n){r(!0);try{const n=vT(t,"createStripeCheckout"),r=(await n({packageId:e,successUrl:window.location.origin+"?purchase=success",cancelUrl:window.location.origin+"?purchase=cancelled"})).data;r.success&&r.url?window.location.href=r.url:console.error("Failed to start checkout")}catch(o){console.error("Purchase error:",o.message)}finally{r(!1)}}}else console.log("User must be signed in to purchase")},[n]),s=U.useCallback(e=>{e.target===e.currentTarget&&t()},[t]);return K.jsx("div",{className:"coin-shop-overlay",onClick:s,children:K.jsxs("div",{className:"coin-shop",children:[K.jsx("button",{className:"coin-shop__close",onClick:t,children:K.jsx(GT,{size:24})}),K.jsxs("div",{className:"coin-shop__header",children:[K.jsx("h2",{className:"coin-shop__title",children:"Coin Shop"}),K.jsxs("div",{className:"coin-shop__balance",children:[K.jsx(KT,{size:20}),K.jsxs("span",{children:["Your Balance: ",rC(e)]})]}),K.jsx("p",{className:"coin-shop__subtitle",children:"Purchase coins to play wagered matches!"})]}),K.jsx("div",{className:"coin-shop__packages",children:nC.map(e=>K.jsxs("button",{className:"coin-package "+(e.popular?"coin-package--popular":""),onClick:()=>i(e.id),disabled:n,children:[e.popular&&K.jsx("span",{className:"coin-package__badge",children:"POPULAR"}),K.jsxs("div",{className:"coin-package__coins",children:[K.jsx(KT,{size:24}),K.jsx("span",{children:rC(e.coins)})]}),K.jsx("span",{className:"coin-package__price",children:e.price})]},e.id))}),K.jsx("p",{className:"coin-shop__footer",children:"Secure payment via Stripe. Coins are non-refundable."})]})})}function sC({themeId:e}){const t=gd[e];return t?K.jsxs("div",{className:"theme-preview",children:[K.jsx("div",{className:"theme-preview__swatch",style:{backgroundColor:t.colors.segment1}}),K.jsx("div",{className:"theme-preview__swatch",style:{backgroundColor:t.colors.segment2}}),K.jsx("div",{className:"theme-preview__swatch",style:{backgroundColor:t.colors.double}}),K.jsx("div",{className:"theme-preview__swatch",style:{backgroundColor:t.colors.triple}}),K.jsx("div",{className:"theme-preview__swatch",style:{backgroundColor:t.colors.wire}})]}):null}function oC({currentThemeId:e,onSelectTheme:t,onClose:n}){const r=Object.values(gd);return K.jsx("div",{className:"theme-selector-overlay",onClick:n,children:K.jsxs("div",{className:"theme-selector",onClick:e=>e.stopPropagation(),children:[K.jsx("button",{className:"theme-selector__close",onClick:n,children:K.jsx(GT,{size:24})}),K.jsx("h2",{className:"theme-selector__title",children:"Dartboard Theme"}),K.jsx("div",{className:"theme-selector__options",children:r.map(n=>{const r=e===n.id,i=n.premiumOnly;return K.jsxs("button",{className:`theme-option ${r?"theme-option--selected":""} ${i?"theme-option--premium":""}`,onClick:()=>t(n.id),children:[K.jsxs("div",{className:"theme-option__info",children:[K.jsxs("span",{className:"theme-option__name",children:[n.name,i&&K.jsx("span",{className:"theme-option__badge",children:"Premium"})]}),K.jsx("span",{className:"theme-option__description",children:n.description})]}),K.jsx(sC,{themeId:n.id}),r&&K.jsx("span",{className:"theme-option__check",children:""})]},n.id)})})]})})}const aC=[{key:"easy",label:"Easy",description:"Relaxed gameplay",skillLevel:35},{key:"medium",label:"Medium",description:"Balanced challenge",skillLevel:55},{key:"hard",label:"Hard",description:"Increased pressure",skillLevel:75},{key:"expert",label:"Expert",description:"Maximum pressure",skillLevel:90}];function lC({value:e,onChange:t,disabled:n=!1}){return K.jsxs("div",{className:"difficulty-selector",children:[K.jsx("div",{className:"difficulty-selector__label",children:"Difficulty"}),K.jsx("div",{className:"difficulty-selector__options",children:aC.map(r=>K.jsx("button",{type:"button",className:`difficulty-selector__btn ${e===r.key?"difficulty-selector__btn--active":""} difficulty-selector__btn--${r.key}`,onClick:()=>t(r.key),disabled:n,title:r.description,children:r.label},r.key))})]})}const cC={BEGINNER:{key:"easy",accuracy:35,label:"Beginner"},INTERMEDIATE:{key:"medium",accuracy:60,label:"Intermediate"},EXPERT:{key:"hard",accuracy:80,label:"Expert"},IMPOSSIBLE:{key:"expert",accuracy:95,label:"Impossible"}};function uC(e,t){if(hd[t]&&("hard"===e||"expert"===e)){return function(e){if("Bull"===e)return{x:id,y:id};const t=e[0],n=parseInt(e.slice(1),10);if(isNaN(n))return{x:id,y:id};let r=1;return"T"===t?r=3:"D"===t&&(r=2),Cd(n,r)}(hd[t].split(" ")[0])}switch(e){case"easy":return Cd(19,1);case"medium":return Cd(19,3);case"hard":case"expert":return Cd(20,3);default:return Cd(20,1)}}function dC(e,t){const n=function(e){return Object.values(cC).find(t=>t.key===e)}(t),r=(100-((null==n?void 0:n.accuracy)??50))/100*80,i=Math.random()*Math.PI*2,s=Math.random()*r;return{x:e.x+Math.cos(i)*s,y:e.y+Math.sin(i)*s}}const hC="games",fC="matchmaking_queue/casual",pC=`mm:${Date.now().toString(36)}-${Math.random().toString(36).slice(2,7)}`;let mC=null,gC=null,yC=null,_C=null,vC=null,bC=!1,wC=null,kC=null,TC=null,CC=null,SC=!1,IC=!1,EC=null,xC=null;function NC(e){return"string"!=typeof e?"Player":e.slice(0,20).replace(/[<>]/g,"")}function PC(e){return"string"!=typeof e||e.length<1||e.length>8?"":e}function RC(e){const t=parseInt(e,10);return isNaN(t)||t<1||t>100?1:t}function DC(e){return"string"!=typeof e?null:e.startsWith("https://")?e.slice(0,500):null}async function LC(e,t,n){var r,i,s,o;await jC();const a=PT(),l=RT();if(!a)return void(null==(r=n.onError)||r.call(n,"Firebase not configured"));if(!l)return void(null==(i=n.onError)||i.call(n,"Cloud Functions not available"));const c=await IT;if(!c)return void(null==(s=n.onError)||s.call(n,"Authentication required for online play"));EC=c.uid,console.log(`[matchmaking][${pC}] Join start:`,{myPlayerId:EC,authUid:(null==c?void 0:c.uid)??null,gameMode:t,queuePath:fC}),IC=!1,null==(o=n.onSearching)||o.call(n);const u=Pk(a,fC);setTimeout(async()=>{var r;try{const r=Vk(u,qk("timestamp"),$k(5)),s=await Mk(r);if(s.exists()){const r=[];s.forEach(e=>{r.push({key:e.key,entry:e.val()})});for(const{key:s,entry:o}of r)if(s!==EC&&null==o.matchedGameId&&!(EC<s))try{if(await AC(s,o,e,t,u,n,l))return}catch(i){if("functions/failed-precondition"===(null==i?void 0:i.code)){console.debug("[matchmaking] Candidate race:",s);continue}throw i}}await async function(e,t,n,r,s){if(!EC)return;const o=Pk(e,fC),a=Rk(o,EC);mC=a;const l={playerId:EC,name:NC(t.displayName)||"Player",flag:PC(t.flag)||"",level:t.level||1,avatarUrl:DC(t.avatarUrl)||null,gameMode:r,timestamp:Xk()};await Ok(a,l),Mk(a).then(e=>{var t,n,r,i;console.log(`[matchmaking][${pC}] Queue entry verify:`,{exists:e.exists(),playerId:(null==(t=e.val())?void 0:t.playerId)??null,matchedGameId:(null==(n=e.val())?void 0:n.matchedGameId)??null,timestamp:(null==(r=e.val())?void 0:r.timestamp)??null,timestampType:typeof(null==(i=e.val())?void 0:i.timestamp),allKeys:Object.keys(e.val()||{})})}).catch(e=>console.error(`[matchmaking][${pC}] Queue entry verify ERROR:`,{code:(null==e?void 0:e.code)??null,message:(null==e?void 0:e.message)??null})),gC=Dk(a),await gC.remove(),yC=Uk(a,async t=>{var r,s,o,a,l,c,u,d,h;if(IC)return;if(!t.exists())return;const f=t.val();if(f.matchedGameId){IC=!0,await jC();const t=f.matchedGameId,p=f.matchedByName||"Opponent",m=f.matchedByFlag||"",g=Pk(e,`${hC}/${t}`);let y=null;const _=5,v=200;for(let e=0;e<_;e++)try{if(y=(await Mk(g)).val(),y&&(null==(r=y.player1)?void 0:r.id)===EC)break;if((null==(s=null==y?void 0:y.player1)?void 0:s.id)&&y.player1.id!==EC)return console.error("[matchmaking] Game has wrong player1:",y.player1.id),IC=!1,void(null==(o=n.onError)||o.call(n,"Invalid game data"));e<_-1&&(console.log(`[matchmaking] Game not ready (attempt ${e+1}/${_})`),await new Promise(t=>setTimeout(t,v*(e+1))))}catch(i){if(e<_-1){console.log(`[matchmaking] Game read error (attempt ${e+1}/${_})`),await new Promise(t=>setTimeout(t,v*(e+1)));continue}return console.error("[matchmaking] Failed to read game after retries:",i),IC=!1,void(null==(a=n.onError)||a.call(n,"Failed to join game"))}if(!y||(null==(l=y.player1)?void 0:l.id)!==EC)return console.error("[matchmaking] Invalid game data after retries"),IC=!1,void(null==(c=n.onError)||c.call(n,"Invalid game data"));xC=0,null==(h=n.onFound)||h.call(n,{roomId:t,playerIndex:0,opponent:{name:NC(p),flag:PC(m),level:RC(null==(u=y.player2)?void 0:u.level),avatarUrl:DC(null==(d=y.player2)?void 0:d.avatarUrl)}})}}),_C=setTimeout(async()=>{var e;IC||(await jC(),null==(e=n.onTimeout)||e.call(n))},6e4),OC(o,t,r,n,s,2e3+Math.floor(1e3*Math.random()))}(a,e,n,t,l)}catch(s){console.error("[matchmaking] Error checking queue:",s),null==(r=n.onError)||r.call(n,s.message||"Failed to join queue")}},500)}async function AC(e,t,n,r,i,s,o){var a,l,c,u,d;if(!EC)return null==(a=s.onError)||a.call(s,"Not authenticated"),!1;IC=!0,console.log(`[matchmaking][${pC}] createGameWithOpponent START:`,{myPlayerId:EC,opponentKey:e,opponentName:(null==t?void 0:t.name)??null,gameMode:r,isProcessingMatch:IC});let h=!1;try{const i=vT(o,"createGame"),a=(await i({player1Id:e,player1Name:NC(t.name),player1Flag:PC(t.flag),player2Id:EC,player2Name:NC(n.displayName)||"Player",player2Flag:PC(n.flag)||"",gameMode:r,isWagered:!1})).data;return console.log(`[matchmaking][${pC}] createGame response:`,{success:(null==a?void 0:a.success)??null,gameId:(null==a?void 0:a.gameId)??null,error:(null==a?void 0:a.error)??null}),a.success&&a.gameId?(xC=1,h=!0,await jC(),null==(c=s.onFound)||c.call(s,{roomId:a.gameId,playerIndex:1,opponent:{name:NC(t.name),flag:PC(t.flag),level:RC(t.level),avatarUrl:DC(t.avatarUrl)}}),!0):(null==(l=s.onError)||l.call(s,a.error||"Failed to create game"),!1)}catch(f){return console.error("[matchmaking] Error creating game:",f),console.error(`[matchmaking][${pC}] createGameWithOpponent ERROR:`,{code:(null==f?void 0:f.code)??null,message:(null==f?void 0:f.message)??null}),"functions/failed-precondition"===f.code||(null==(u=f.message)?void 0:u.includes("Opponent not available"))?!1:(null==(d=s.onError)||d.call(s,f.message||"Failed to create game"),!1)}finally{h||(IC=!1),console.log(`[matchmaking][${pC}] createGameWithOpponent END:`,{success:h,isProcessingMatch:IC})}}function OC(e,t,n,r,i,s=3e3){const o=()=>{var t;return!(!mC||!EC)&&(null==(t=mC.parent)?void 0:t.toString())===e.toString()};vC&&(clearTimeout(vC),vC=null),vC=setTimeout(async()=>{if(o()){if(bC)return console.log(`[matchmaking][${pC}] Recheck skipped (in-flight), rescheduling`),void OC(e,t,n,r,i,1e3);if(IC)return console.log(`[matchmaking][${pC}] Recheck deferred (processing match)`),void OC(e,t,n,r,i,1e3);bC=!0;try{console.log(`[matchmaking][${pC}] Recheck executing`,{time:Date.now()});const s=Vk(e,qk("timestamp"),$k(5)),a=await Mk(s),l=a.val()||{};if(console.log(`[matchmaking][${pC}] Recheck snapshot:`,{exists:a.exists(),numChildren:Object.keys(l).length,keys:Object.keys(l).slice(0,10)}),!a.exists())return;const c=Object.entries(a.val());for(const[e,u]of c){if(!o())break;if(IC)break;if(e===EC)continue;if(u.matchedGameId)continue;if(EC<e)continue;console.log(`[matchmaking][${pC}] Recheck: calling createGameWithOpponent`,{key:e});if(await AC(e,u,t,n,0,r,i))return}}catch(s){console.error("[matchmaking] Recheck error:",s)}finally{if(bC=!1,o()){const s=IC?1e3:3e3+Math.floor(1e3*Math.random());OC(e,t,n,r,i,s)}}}else console.log(`[matchmaking][${pC}] Recheck stopped: cleanup or stale`)},Math.floor(s))}async function MC(){await jC(),EC=null}async function jC(){IC=!1,_C&&(clearTimeout(_C),_C=null),vC&&(clearTimeout(vC),vC=null),bC=!1,yC&&(yC(),yC=null),gC&&(await gC.cancel(),gC=null),mC&&(await Lk(mC),mC=null)}function FC(e,t,n){var r;const i=PT();if(!i)return void(null==(r=n.onError)||r.call(n,"Firebase not configured"));xC=t,SC=!1;const s=Pk(i,`${hC}/${e}`);wC=s;const o=0===t?"player1":"player2",a=0===t?"player2":"player1",l=Rk(s,o),c=Rk(s,`${o}/connected`);Ok(l,{connected:!0,lastHeartbeat:Date.now()}).catch(e=>{var t;null==(t=n.onError)||t.call(n,"Failed to set presence: "+e.message)}),TC=Dk(c),TC.set(!1).catch(e=>{console.error("[gameRoom] Failed to register onDisconnect:",e)});let u=!1;CC=setInterval(()=>{u||Ok(l,{lastHeartbeat:Date.now()}).catch(e=>{var t;u||(u=!0,null==(t=n.onError)||t.call(n,"Heartbeat failed: "+e.message))})},3e3),kC=Uk(s,e=>{var t,r;const i=e.val();if(!(i&&i.player1&&i.player2&&i.gameMode))return;const s=i[a];if(s){if(!0===s.connected&&(SC=!0),SC&&!i.winner){const e=!1===s.connected,r=s.lastHeartbeat&&Date.now()-s.lastHeartbeat>15e3;(e||r)&&(SC=!1,null==(t=n.onOpponentDisconnect)||t.call(n,NC(s.name)))}null==(r=n.onGameUpdate)||r.call(n,i)}},e=>{var t;console.error("[gameRoom] Listener error:",e),null==(t=n.onError)||t.call(n,"Connection to game lost")})}function UC(){if(CC&&(clearInterval(CC),CC=null),TC&&(TC.cancel().catch(()=>{}),TC=null),wC&&null!==xC){Ak(Rk(wC,`${0===xC?"player1":"player2"}/connected`),!1).catch(()=>{})}kC&&(kC(),kC=null),wC=null,xC=null,SC=!1}async function zC(e){const t=RT();if(!t)return{success:!1,error:"Cloud Functions not available"};try{const n=vT(t,"createEscrow"),r=(await n(e)).data;return r.success||console.error("[createEscrow] Failed:",r.error),r}catch(n){return console.error("[createEscrow] Error:",n.message),{success:!1,error:n.message||"Failed to create escrow"}}}async function BC(e){const t=RT();if(!t)return{success:!1,error:"Cloud Functions not available"};try{const n=vT(t,"refundEscrow"),r=(await n(e)).data;return r.success||console.error("[refundEscrow] Failed:",r.error),r}catch(n){return console.error("[refundEscrow] Error:",n.message),{success:!1,error:n.message||"Failed to refund escrow"}}}async function $C(e){const t=RT();if(!t)return{success:!1,error:"Cloud Functions not available"};try{const n=vT(t,"forfeitGame"),r=(await n(e)).data;return r.success||console.error("[forfeitGame] Failed:",r.error),r}catch(n){return console.error("[forfeitGame] Error:",n.message),{success:!1,error:n.message||"Failed to forfeit game"}}}let WC=null,qC=null,VC=null,HC=null,GC=null,KC=null,QC=null,YC=!1;async function JC(e,t){try{const n=await Mk(e);if(!n.exists())return!1;const r=n.val();if(r.claimedBy||r.matchedGameId)return!1;const i=Rk(e,"claimedBy"),s=await eT(i,e=>{if(null===e)return t});return s.committed&&s.snapshot.val()===t}catch(n){return console.error("[tryClaimOpponent] Transaction failed:",n),!1}}async function XC(e,t,n,r){var i,s,o,a,l,c,u;await tS();const d=PT(),h=RT();if(!d||!h)return void(null==(i=r.onError)||i.call(r,"Firebase not configured"));const f=await IT;if(!f||f.isAnonymous)return void(null==(s=r.onError)||s.call(r,"Please sign in to play wagered matches"));const p=f.uid;EC=p,QC=`${Date.now()}-${Math.random().toString(36).slice(2,11)}`,YC=!1,null==(o=r.onSearching)||o.call(r);const m=Pk(d,`matchmaking_queue/wagered/${t}`);try{BC({escrowId:"cleanup_pending",reason:"cleanup_before_new_match",idempotencyKey:`${QC}-cleanup`});const i=Vk(m,qk("timestamp"),$k(5)),s=await Mk(i);if(s.exists()){const i=s.val();for(const[s,o]of Object.entries(i)){if(s===p)continue;if(o.claimedBy||o.matchedGameId)continue;if(!o.escrowId)continue;const i=Rk(m,s);if(await JC(i,p)){const l=await zC({escrowId:o.escrowId,stakeAmount:t,idempotencyKey:QC});if(l.success)return KC=o.escrowId,console.log("[wageredMatchmaking] currentEscrowId SET (joined opponent):",KC),null==(a=r.onEscrowCreated)||a.call(r,o.escrowId,l.newBalance??0),void(await ZC(s,o,e,n,t,m,r,h));await eT(Rk(i,"claimedBy"),e=>{if(e===p)return null})}}}const o=await zC({stakeAmount:t,idempotencyKey:QC});if(!o.success||!o.escrowId)return void(null==(l=r.onError)||l.call(r,o.error||"Failed to create escrow"));KC=o.escrowId,console.log("[wageredMatchmaking] currentEscrowId SET (created own):",KC),null==(c=r.onEscrowCreated)||c.call(r,o.escrowId,o.newBalance??0),await async function(e,t,n,r,i,s,o){if(!EC)return;const a=Rk(i,EC);WC=a;const l={playerId:EC,name:NC(t.displayName)||"Player",flag:PC(t.flag)||"",level:t.level||1,avatarUrl:DC(t.avatarUrl)||null,gameMode:s,timestamp:Xk(),escrowId:r,stakeAmount:n};await Ok(a,l),qC=Dk(a),await qC.remove(),VC=Uk(a,async t=>{var i,s,a,l,c,u,d,h,f,p;if(YC)return;if(!t.exists())return;const m=t.val();if(m.matchedGameId){YC=!0,await tS();const t=m.matchedGameId,y=m.matchedByName||"Opponent",_=m.matchedByFlag||"",v=Pk(e,`${hC}/${t}`);let b=null;const w=5,k=200;for(let e=0;e<w;e++)try{if(b=(await Mk(v)).val(),b&&(null==(i=b.player1)?void 0:i.id)===EC)break;if((null==(s=null==b?void 0:b.player1)?void 0:s.id)&&b.player1.id!==EC)return console.error("[matchmaking] Wagered game has wrong player1:",b.player1.id),YC=!1,void(null==(a=o.onError)||a.call(o,"Invalid game data"));e<w-1&&(console.log(`[matchmaking] Wagered game not ready (attempt ${e+1}/${w})`),await new Promise(t=>setTimeout(t,k*(e+1))))}catch(g){if(e<w-1){console.log(`[matchmaking] Wagered game read error (attempt ${e+1}/${w})`),await new Promise(t=>setTimeout(t,k*(e+1)));continue}return console.error("[matchmaking] Failed to read wagered game after retries:",g),YC=!1,void(null==(l=o.onError)||l.call(o,"Failed to join game"))}if(!b||(null==(c=b.player1)?void 0:c.id)!==EC)return console.error("[matchmaking] Invalid wagered game data after retries"),YC=!1,void(null==(u=o.onError)||u.call(o,"Invalid game data"));xC=0,null==(p=o.onFound)||p.call(o,{roomId:t,playerIndex:0,opponent:{name:NC(y),flag:PC(_),level:RC(null==(d=b.player2)?void 0:d.level),avatarUrl:DC(null==(h=b.player2)?void 0:h.avatarUrl)},escrowId:(null==(f=b.wager)?void 0:f.escrowId)||r,stakeAmount:n})}});const c=Pk(e,`escrow/${r}/gameId`);HC=Uk(c,async t=>{var i,s,a,l,c,u,d,h,f,p,m,g;if(YC)return;if(!t.exists())return;const y=t.val();if(!y||"string"!=typeof y)return;const _=HC;HC=null,null==_||_(),YC=!0;let v=!1;try{const t=(await Mk(Pk(e,`escrow/${r}`))).val();if(!t||"refunded"===t.status||"released"===t.status)return;await tS(),YC=!0;const g=Pk(e,`${hC}/${y}`);let _=null;const w=5,k=200;for(let e=0;e<w;e++)try{if(_=(await Mk(g)).val(),_&&(null==(i=_.player1)?void 0:i.id)===EC)break;if((null==(s=null==_?void 0:_.player1)?void 0:s.id)&&_.player1.id!==EC)return console.error("[matchmaking] Escrow game has wrong player1:",_.player1.id),void(null==(a=o.onError)||a.call(o,"Invalid game data"));e<w-1&&(console.log(`[matchmaking] Escrow game not ready (attempt ${e+1}/${w})`),await new Promise(t=>setTimeout(t,k*(e+1))))}catch(b){if(e<w-1){console.log(`[matchmaking] Escrow game read error (attempt ${e+1}/${w})`),await new Promise(t=>setTimeout(t,k*(e+1)));continue}return console.error("[matchmaking] Failed to read escrow game after retries:",b),void(null==(l=o.onError)||l.call(o,"Failed to join game"))}if(!_||(null==(c=_.player1)?void 0:c.id)!==EC)return console.error("[matchmaking] Invalid escrow game data after retries"),void(null==(u=o.onError)||u.call(o,"Invalid game data"));xC=0,v=!0,null==(m=o.onFound)||m.call(o,{roomId:y,playerIndex:0,opponent:{name:NC(null==(d=_.player2)?void 0:d.name),flag:PC(null==(h=_.player2)?void 0:h.flag),level:RC(null==(f=_.player2)?void 0:f.level),avatarUrl:DC(null==(p=_.player2)?void 0:p.avatarUrl)},escrowId:r,stakeAmount:n})}catch(b){null==(g=o.onError)||g.call(o,"Failed to join game")}finally{v||(YC=!1)}}),GC=setTimeout(async()=>{var e;if(console.log("[wageredMatchmaking] Timeout fired:",{isProcessingWageredMatch:YC,currentEscrowId:KC}),!YC){const t=await eS();null==(e=o.onTimeout)||e.call(o,t.refundFailed)}},3e4)}(d,e,t,o.escrowId,m,n,r)}catch(g){console.error("[wageredMatchmaking] Error:",g),null==(u=r.onError)||u.call(r,g.message||"Failed to start wagered match"),await tS()}}async function ZC(e,t,n,r,i,s,o,a){var l,c,u,d;if(!EC||!KC)return void(null==(l=o.onError)||l.call(o,"Not authenticated"));YC=!0;const h=Rk(s,e);try{const s=vT(a,"createGame"),l=(await s({player1Id:e,player1Name:NC(t.name),player1Flag:PC(t.flag),player2Id:EC,player2Name:NC(n.displayName)||"Player",player2Flag:PC(n.flag)||"",gameMode:r,isWagered:!0,escrowId:KC,stakeAmount:i})).data;if(!l.success||!l.gameId){if(KC&&QC)try{await BC({escrowId:KC,reason:"create_game_failed",idempotencyKey:`${QC}-refund-create-game`})}catch(f){console.error("[wageredMatchmaking] Client refund failed (server may have handled it):",f)}return await eT(Rk(h,"claimedBy"),e=>{if(e===EC)return null}),null==(c=o.onError)||c.call(o,l.error||"Failed to create game"),void(YC=!1)}const d=l.gameId;xC=1,null==(u=o.onFound)||u.call(o,{roomId:d,playerIndex:1,opponent:{name:NC(t.name),flag:PC(t.flag),level:RC(t.level),avatarUrl:DC(t.avatarUrl)},escrowId:KC,stakeAmount:i})}catch(p){if(console.error("[wageredMatchmaking] Error creating game:",p),KC&&QC)try{await BC({escrowId:KC,reason:"create_game_failed",idempotencyKey:`${QC}-refund-create-game`})}catch(f){console.error("[wageredMatchmaking] Client refund failed (server may have handled it):",f)}await eT(Rk(h,"claimedBy"),e=>{if(e===EC)return null}),null==(d=o.onError)||d.call(o,p.message||"Failed to create game"),YC=!1}}async function eS(){console.log("[leaveWageredQueue] Called with:",{currentEscrowId:KC,myPlayerId:EC});let e=!1;if(KC){console.log("[leaveWageredQueue] Calling refundWithRetry for:",KC);const t=await async function(e,t=3){var n;const r=`${e}:refund`;for(let s=0;s<t;s++){try{const t=await BC({escrowId:e,reason:"user_cancelled",idempotencyKey:r});if(t.success)return{success:!0};if(null==(n=t.error)?void 0:n.includes("already"))return{success:!0};console.error(`[refundWithRetry] Attempt ${s+1} failed:`,t.error)}catch(i){console.error(`[refundWithRetry] Attempt ${s+1} threw:`,i)}s<t-1&&await new Promise(e=>setTimeout(e,1e3*(s+1)))}return{success:!1,error:"Refund failed after retries"}}(KC);console.log("[leaveWageredQueue] refundWithRetry result:",t),t.success||(console.error("[leaveWageredQueue] Refund failed after retries:",t.error),e=!0)}else console.warn("[leaveWageredQueue] No currentEscrowId - cannot refund!");if(EC)try{await BC({escrowId:"cleanup_pending",reason:"cleanup_before_new_match",idempotencyKey:`${EC}:cleanup`})}catch(t){console.error("[leaveWageredQueue] Cleanup threw:",t)}return await tS(),{refundFailed:e}}async function tS(){YC=!1,GC&&(clearTimeout(GC),GC=null),VC&&(VC(),VC=null),HC&&(HC(),HC=null),qC&&(await qC.cancel(),qC=null),WC&&(await Lk(WC),WC=null),console.log("[cleanupWageredMatchmaking] Clearing currentEscrowId:",KC),KC=null,QC=null}function nS({coinBalance:e,dailyBonusAvailable:t,isLoading:n,isClaimingBonus:r,onClaimBonus:i,onOpenShop:s}){return n?K.jsx("div",{className:"coin-display coin-display--loading",children:K.jsx("span",{className:"coin-display__balance",children:"..."})}):K.jsxs("div",{className:"coin-display",children:[K.jsxs("button",{className:"coin-display__balance-container",onClick:s,title:"Open Coin Shop",children:[K.jsx("img",{src:"/assets/coin-chip.png",alt:"Coins",className:"coin-display__icon",width:16,height:16}),K.jsx("span",{className:"coin-display__balance",children:(o=e,o.toLocaleString())})]}),t&&K.jsx("button",{className:"coin-display__bonus-badge",disabled:r||!i,onClick:i,title:"Claim daily bonus",children:r?"...":"+50 Free!"})]});var o}function rS({enabled:e,onToggle:t}){return K.jsx("button",{className:"sound-toggle",onClick:()=>t(!e),title:e?"Mute sounds":"Unmute sounds","aria-label":e?"Mute sounds":"Unmute sounds",children:e?K.jsx(QT,{size:24}):K.jsx(YT,{size:24})})}const iS=({user:e,isAnonymous:t,authLoading:n,signInWithGoogle:r,signInWithFacebook:i,signInWithApple:s,signOut:o,coinBalance:a,dailyBonusAvailable:l,walletLoading:c,isClaimingBonus:u,onClaimBonus:d,onOpenShop:h,soundEnabled:f,onSoundToggle:p,onOpenThemeSelector:m,onOpenProfile:g,isSearching:y,isCreatingEscrow:_,errorText:v,onPlayOnline:b,onPlayAI:w,onPractice:k,onShowToast:T,profileDisplayName:C})=>{var S;const I=e=>{T(`${e} - Coming Soon!`)};return K.jsx("div",{className:"home",style:{"--home-bg-url":"url(/assets/home-bg-fantasy-BAYVmVnj.webp)"},children:K.jsxs("div",{className:"home__content",children:[K.jsx("header",{className:"home__topbar",children:K.jsxs("div",{className:"topbar",children:[K.jsxs("div",{className:"topbar__profile",children:[K.jsx("button",{type:"button",className:"topbar__avatar-btn",onClick:g,title:"Profile",children:K.jsx("div",{className:"topbar__avatar",children:(null==e?void 0:e.photoURL)?K.jsx("img",{src:e.photoURL,alt:"",className:"topbar__avatar-img"}):K.jsx("div",{className:"topbar__avatar-fallback"})})}),K.jsxs("span",{className:"topbar__name",children:[C||"Player",t&&K.jsx("span",{className:"topbar__guest-badge",children:"Guest"})]})]}),K.jsxs("div",{className:"topbar__right",children:[K.jsx(nS,{coinBalance:a,dailyBonusAvailable:l,isLoading:c,isClaimingBonus:u,onClaimBonus:d,onOpenShop:h}),K.jsx("button",{type:"button",className:"topbar__icon-btn",onClick:m,title:"Theme",children:K.jsx(HT,{size:20})})]})]})}),e&&!t&&K.jsxs("div",{className:"home__user-row",children:[K.jsxs("span",{className:"home__user-id",children:["ID: ",null==(S=e.uid)?void 0:S.slice(0,8)]}),K.jsx("button",{type:"button",className:"home__signout-btn",onClick:o,children:"Sign Out"})]}),(!e||t)&&K.jsxs("div",{className:"home__auth",children:[K.jsx("p",{className:"home__auth-prompt",children:t?"Sign in to save progress":"Sign in to play online & save progress"}),K.jsxs("div",{className:"home__auth-buttons",children:[K.jsxs("button",{type:"button",className:"home__auth-btn home__auth-btn--google",onClick:r,disabled:n,children:[K.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",children:[K.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),K.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),K.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),K.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),K.jsxs("button",{type:"button",className:"home__auth-btn home__auth-btn--facebook",onClick:i,disabled:n,children:[K.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"#1877F2",children:K.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]}),K.jsxs("button",{type:"button",className:"home__auth-btn home__auth-btn--apple",onClick:s,disabled:n,children:[K.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",children:K.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Apple"]})]})]}),K.jsx("main",{className:"home__main",children:K.jsxs("div",{className:"home__center",children:[K.jsx("div",{className:"logo",children:K.jsx("h1",{className:"logo__text",children:"QUIK DARTS"})}),K.jsxs("div",{className:"play-grid",children:[K.jsxs("button",{type:"button",className:"play-card play-card--online",onClick:b,children:[K.jsx("span",{className:"play-card__icon",children:""}),K.jsx("span",{className:"play-card__title",children:"PLAY ONLINE"}),K.jsx("span",{className:"play-card__subtitle",children:_?"Creating match...":y?"Searching... (tap to cancel)":v||"  playing"})]}),K.jsxs("button",{type:"button",className:"play-card play-card--friends",onClick:()=>I("Play Friends"),children:[K.jsx("span",{className:"play-card__icon",children:""}),K.jsx("span",{className:"play-card__title",children:"PLAY FRIENDS"}),K.jsx("span",{className:"play-card__subtitle",children:"Invite "})]}),K.jsxs("button",{type:"button",className:"play-card play-card--ai",onClick:w,children:[K.jsx("span",{className:"play-card__icon",children:""}),K.jsx("span",{className:"play-card__title",children:"PLAY AI"}),K.jsx("span",{className:"play-card__subtitle",children:"Easy - Expert"})]}),K.jsxs("button",{type:"button",className:"play-card play-card--practice",onClick:k,children:[K.jsx("span",{className:"play-card__icon",children:""}),K.jsx("span",{className:"play-card__title",children:"PRACTICE"}),K.jsx("span",{className:"play-card__subtitle",children:"Solo Mode"})]}),K.jsxs("button",{type:"button",className:"play-card play-card--shop",onClick:h,children:[K.jsx("span",{className:"play-card__icon",children:""}),K.jsx("span",{className:"play-card__title",children:"SHOP"}),K.jsx("span",{className:"play-card__subtitle",children:"Dart Gear"})]}),K.jsxs("button",{type:"button",className:"play-card play-card--dartsets",onClick:()=>I("Dart Sets"),children:[K.jsx("span",{className:"play-card__badge",children:"NEW!"}),K.jsx("span",{className:"play-card__icon",children:""}),K.jsx("span",{className:"play-card__title",children:"DART SETS"}),K.jsx("span",{className:"play-card__subtitle",children:"Collect"})]})]})]})}),K.jsx("footer",{className:"home__bottom",children:K.jsx("div",{className:"home__bottom-left",children:K.jsx(rS,{enabled:f,onToggle:p})})})]})})};function sS(){const[e,t]=U.useState(!1),[n,r]=U.useState(!1),[i,s]=U.useState(null),[o,a]=U.useState(null),[l,c]=U.useState(null),[u,d]=U.useState(!1),[h,f]=U.useState(!1),[p,m]=U.useState(!1),[g,y]=U.useState(!1),[_,v]=U.useState(50),[b,w]=U.useState(!1),[k,T]=U.useState(!1),[C,S]=U.useState(null),[I,E]=U.useState("neutral"),[x,N]=U.useState({x:0,y:0}),[P,R]=U.useState("medium"),[D,L]=U.useState(!1),[A,O]=U.useState(50),[M,j]=U.useState(0),F=U.useRef(!1),z=U.useRef(null),B=U.useRef(null),$=U.useRef(!1),W=U.useRef(null),q=U.useRef(null),V=U.useRef(""),H=U.useRef(0),{gameState:G,setGameState:Q,players:Y,setPlayers:J,currentPlayerIndex:X,setCurrentPlayerIndex:Z,dartsThrown:ee,setDartsThrown:te,currentTurnScore:ne,setCurrentTurnScore:re,dartPositions:ie,setDartPositions:se,aimPosition:oe,setAimPosition:ae,gameStats:le,winner:ce,setWinner:ue,checkout:de,legScores:he,setScores:fe,playerSetup:pe,setPlayerSetup:me,startGame:ge,throwDart:ye,endTurn:_e,resetGame:ve,currentTurnThrows:be,currentPlayer:we}=function(){const[e,t]=U.useState("landing"),[n,r]=U.useState([]),[i,s]=U.useState(0),[o,a]=U.useState(0),[l,c]=U.useState(0),[u,d]=U.useState([]),[h,f]=U.useState([]),[,p]=U.useState(0),[m,g]=U.useState({x:id,y:id}),[y,_]=U.useState(!1),[v,b]=U.useState(0),[w,k]=U.useState(!1),[T,C]=U.useState({}),[S,I]=U.useState(null),[E,x]=U.useState(null),[N,P]=U.useState(null),[R,D]=U.useState([]),[L,A]=U.useState([]),[O,M]=U.useState(null),[j,F]=U.useState(FT),z=U.useMemo(()=>n[i]||null,[n,i]),B=U.useMemo(()=>n.length>1&&n.some(e=>e.isAI),[n]),$=U.useMemo(()=>!!z&&z.score<=170&&z.score>=2,[z]),W=U.useCallback(()=>{const e=[],n={};for(let t=0;t<j.count;t++){const r=`player_${t}`;e.push({id:r,name:j.names[t]||`Player ${t+1}`,score:j.gameMode,isAI:j.aiPlayers[t]||!1,aiDifficulty:j.aiDifficulty[t],flag:j.flags[t]||""}),n[r]=UT()}r(e),C(n),s(0),a(0),c(0),d([]),f([]),p(0),I(null),M(null),D(new Array(j.count).fill(0)),A(new Array(j.count).fill(0)),t("playing")},[j]),q=U.useCallback(()=>{r(e=>e.map(e=>({...e,score:j.gameMode}))),s(0),a(0),c(0),d([]),f([]),p(0),I(null)},[j.gameMode]),V=U.useCallback((e=!1)=>{e&&z&&l>0&&r(e=>e.map(e=>e.id===z.id?{...e,score:e.score+l}:e)),!e&&z&&l>0&&C(e=>{const t=e[z.id]||{dartsThrown:0,totalScore:0,averagePerDart:0,averagePerTurn:0,highest3DartScore:0,checkoutPercentage:0,triples:0,doubles:0,bulls:0,one80s:0};return{...e,[z.id]:{...t,highest3DartScore:Math.max(t.highest3DartScore,l),one80s:t.one80s+(180===l?1:0)}}}),s(e=>(e+1)%n.length),a(0),c(0),d([]),f([])},[z,l,n.length]),H=U.useCallback(e=>{if(!z)return;const r=[...R];if(r[i]=(r[i]||0)+1,D(r),r[i]>=j.legsPerSet){const e=[...L];e[i]=(e[i]||0)+1,A(e),e[i]>=j.setsToWin?(M(z),I(z),t("gameOver")):(D(new Array(n.length).fill(0)),q())}else q()},[z,i,R,L,j,n.length,q]),G=U.useCallback((e,t)=>{const n=Td(e,t);z&&(n.isBust=function(e,t,n){const r=e-t;return r<0||1===r||0===r&&2!==n}(z.score,n.score,n.multiplier));const i={id:`dart_${Date.now()}_${Math.random()}`,x:e,y:t,score:n.score,multiplier:n.multiplier,segment:n.segment};if(d(e=>[...e,i]),f(e=>[...e,n]),a(e=>e+1),p(e=>e+1),n.isBust)return a(3),P(n),setTimeout(()=>{P(null),V(!0)},1500),n;if(c(e=>e+n.score),z&&(r(e=>e.map(e=>e.id===z.id?{...e,score:e.score-n.score}:e)),C(e=>{const t=e[z.id]||{dartsThrown:0,totalScore:0,averagePerDart:0,averagePerTurn:0,highest3DartScore:0,checkoutPercentage:0,triples:0,doubles:0,bulls:0,one80s:0};return{...e,[z.id]:{...t,dartsThrown:t.dartsThrown+1,totalScore:t.totalScore+n.score,triples:t.triples+(3===n.multiplier?1:0),doubles:t.doubles+(2===n.multiplier?1:0),bulls:t.bulls+("BULL"===n.segment||"25"===n.segment?1:0)}}}),z.score-n.score===0)){const e=l+n.score;H(e)}return P(n),setTimeout(()=>P(null),1500),n},[z,l,V,H]),K=U.useCallback(()=>{t("landing"),r([]),s(0),a(0),c(0),d([]),f([]),C({}),I(null),M(null),D([]),A([]),x(null),P(null),g({x:id,y:id}),_(!1),b(0),k(!1)},[]);return{gameState:e,players:n,currentPlayerIndex:i,dartsThrown:o,currentTurnScore:l,dartPositions:u,aimPosition:m,isAiming:y,power:v,isPowerCharging:w,gameStats:T,winner:S,checkout:E,legScores:R,setScores:L,matchWinner:O,showScorePopup:N,currentTurnThrows:h,playerSetup:j,currentPlayer:z,hasAIOpponent:B,isCheckoutPosition:$,setGameState:t,setPlayerSetup:F,startGame:W,throwDart:G,endTurn:V,setAimPosition:g,setIsAiming:_,setPower:b,setIsPowerCharging:k,resetGame:K,resetLeg:q,setPlayers:r,setCurrentPlayerIndex:s,setDartsThrown:a,setCurrentTurnScore:c,setDartPositions:d,setWinner:I}}(),ke=U.useRef(G),{playSound:Te,soundEnabled:Ce,setSoundEnabled:Se}=function(){const[e,t]=U.useState(!0),n=U.useRef(null),r=U.useCallback(()=>{if(!n.current)try{n.current=new(window.AudioContext||window.webkitAudioContext)}catch(e){return console.warn("Web Audio API not supported:",e),null}return"suspended"===n.current.state&&n.current.resume().catch(e=>{console.warn("Failed to resume AudioContext:",e)}),n.current},[]),i=U.useCallback((t,n=.1,i=.3)=>{if(!e)return;const s=r();if(s)try{const e=s.createOscillator(),r=s.createGain();e.connect(r),r.connect(s.destination),e.frequency.setValueAtTime(t,s.currentTime),r.gain.setValueAtTime(i,s.currentTime),r.gain.exponentialRampToValueAtTime(.01,s.currentTime+n),e.start(s.currentTime),e.stop(s.currentTime+n)}catch(o){console.warn("Error playing tone:",o)}},[e,r]),s=U.useCallback(t=>{if(!e)return;const n=r();if(n)try{switch(t){case"throw":{const e=n.createOscillator(),t=n.createGain();e.connect(t),t.connect(n.destination),e.frequency.setValueAtTime(200,n.currentTime),e.frequency.exponentialRampToValueAtTime(100,n.currentTime+.1),t.gain.setValueAtTime(.3,n.currentTime),t.gain.exponentialRampToValueAtTime(.01,n.currentTime+.1),e.start(n.currentTime),e.stop(n.currentTime+.1);break}case"hit":{const e=n.createOscillator(),t=n.createGain();e.connect(t),t.connect(n.destination),e.frequency.setValueAtTime(800,n.currentTime),t.gain.setValueAtTime(.2,n.currentTime),t.gain.exponentialRampToValueAtTime(.01,n.currentTime+.05),e.start(n.currentTime),e.stop(n.currentTime+.05);break}case"double":{const e=n.createOscillator(),t=n.createGain();e.connect(t),t.connect(n.destination),e.frequency.setValueAtTime(600,n.currentTime),e.frequency.setValueAtTime(800,n.currentTime+.08),t.gain.setValueAtTime(.25,n.currentTime),t.gain.exponentialRampToValueAtTime(.01,n.currentTime+.15),e.start(n.currentTime),e.stop(n.currentTime+.15);break}case"triple":{const e=n.createOscillator(),t=n.createGain();e.connect(t),t.connect(n.destination),e.frequency.setValueAtTime(700,n.currentTime),e.frequency.setValueAtTime(900,n.currentTime+.08),t.gain.setValueAtTime(.3,n.currentTime),t.gain.exponentialRampToValueAtTime(.01,n.currentTime+.15),e.start(n.currentTime),e.stop(n.currentTime+.15);break}case"bull":case"bullseye":{const e=n.createOscillator(),t=n.createGain();e.connect(t),t.connect(n.destination),e.frequency.setValueAtTime(523,n.currentTime),e.frequency.setValueAtTime(659,n.currentTime+.1),e.frequency.setValueAtTime(784,n.currentTime+.2),t.gain.setValueAtTime(.3,n.currentTime),t.gain.exponentialRampToValueAtTime(.01,n.currentTime+.3),e.start(n.currentTime),e.stop(n.currentTime+.3);break}case"miss":{const e=n.createOscillator(),t=n.createGain();e.type="sawtooth",e.connect(t),t.connect(n.destination),e.frequency.setValueAtTime(150,n.currentTime),e.frequency.exponentialRampToValueAtTime(80,n.currentTime+.15),t.gain.setValueAtTime(.15,n.currentTime),t.gain.exponentialRampToValueAtTime(.01,n.currentTime+.15),e.start(n.currentTime),e.stop(n.currentTime+.15);break}case"bust":{const e=n.createOscillator(),t=n.createGain();e.connect(t),t.connect(n.destination),e.frequency.setValueAtTime(200,n.currentTime),e.frequency.exponentialRampToValueAtTime(50,n.currentTime+.3),t.gain.setValueAtTime(.4,n.currentTime),t.gain.exponentialRampToValueAtTime(.01,n.currentTime+.3),e.start(n.currentTime),e.stop(n.currentTime+.3);break}case"checkout":case"win":[523,659,784,1047].forEach((e,t)=>{const r=n.createOscillator(),i=n.createGain();r.connect(i),i.connect(n.destination),r.frequency.setValueAtTime(e,n.currentTime+.15*t),i.gain.setValueAtTime(.3,n.currentTime+.15*t),i.gain.exponentialRampToValueAtTime(.01,n.currentTime+.15*t+.2),r.start(n.currentTime+.15*t),r.stop(n.currentTime+.15*t+.2)});break;case"180":[392,523,659,784,1047,1319].forEach((e,t)=>{const r=n.createOscillator(),i=n.createGain();r.connect(i),i.connect(n.destination),r.frequency.setValueAtTime(e,n.currentTime+.08*t),i.gain.setValueAtTime(.4,n.currentTime+.08*t),i.gain.exponentialRampToValueAtTime(.01,n.currentTime+.08*t+.15),r.start(n.currentTime+.08*t),r.stop(n.currentTime+.08*t+.15)});break;case"ninedarter":{const e=3*n.sampleRate,t=n.createBuffer(1,e,n.sampleRate),r=t.getChannelData(0);for(let n=0;n<e;n++)r[n]=2*Math.random()-1;const i=n.createBufferSource();i.buffer=t;const s=n.createBiquadFilter();s.type="bandpass",s.frequency.setValueAtTime(800,n.currentTime),s.Q.setValueAtTime(1,n.currentTime);const o=n.createGain();o.gain.setValueAtTime(0,n.currentTime),o.gain.linearRampToValueAtTime(.3,n.currentTime+.5),o.gain.setValueAtTime(.3,n.currentTime+2),o.gain.exponentialRampToValueAtTime(.01,n.currentTime+3),i.connect(s),s.connect(o),o.connect(n.destination),i.start(n.currentTime),i.stop(n.currentTime+3),[523,659,784,1047,1319,1568].forEach((e,t)=>{const r=n.createOscillator(),i=n.createGain();r.type="triangle",r.connect(i),i.connect(n.destination),r.frequency.setValueAtTime(e,n.currentTime+.15*t),i.gain.setValueAtTime(.25,n.currentTime+.15*t),i.gain.exponentialRampToValueAtTime(.01,n.currentTime+.15*t+.4),r.start(n.currentTime+.15*t),r.stop(n.currentTime+.15*t+.4)});break}case"click":{const e=n.createOscillator(),t=n.createGain();e.type="square",e.connect(t),t.connect(n.destination),e.frequency.setValueAtTime(500,n.currentTime),t.gain.setValueAtTime(.2,n.currentTime),t.gain.exponentialRampToValueAtTime(.01,n.currentTime+.05),e.start(n.currentTime),e.stop(n.currentTime+.05);break}case"success":{const e=n.createOscillator(),t=n.createGain();e.connect(t),t.connect(n.destination),e.frequency.setValueAtTime(523,n.currentTime),e.frequency.setValueAtTime(659,n.currentTime+.1),t.gain.setValueAtTime(.3,n.currentTime),t.gain.exponentialRampToValueAtTime(.01,n.currentTime+.2),e.start(n.currentTime),e.stop(n.currentTime+.2);break}case"error":{const e=n.createOscillator(),t=n.createGain();e.type="sawtooth",e.connect(t),t.connect(n.destination),e.frequency.setValueAtTime(200,n.currentTime),e.frequency.exponentialRampToValueAtTime(100,n.currentTime+.3),t.gain.setValueAtTime(.3,n.currentTime),t.gain.exponentialRampToValueAtTime(.01,n.currentTime+.3),e.start(n.currentTime),e.stop(n.currentTime+.3);break}}}catch(i){console.warn("Error playing sound:",i)}},[e,r]);return{soundEnabled:e,setSoundEnabled:t,playSound:s,playTone:i}}(),{theme:Ie,themeId:Ee,selectTheme:xe}=$T(),{coinBalance:Ne,dailyBonusAvailable:Pe,isLoading:Re,isClaimingBonus:De,claimDailyBonus:Le}=qT(),{user:Ae,isLoading:Oe,isAnonymous:Me,signInWithGoogle:je,signInWithFacebook:Fe,signInWithApple:Ue,signOut:ze}=DT(),{userProfile:Be}=jT(),$e=(null==Be?void 0:Be.displayName)||(null==Ae?void 0:Ae.displayName)||"Player",We=U.useMemo(()=>{if(!we)return!1;const e=Sd(we.score);if(!e)return!1;var t,n;return(t=oe.x+x.x,n=oe.y+x.y,Td(t,n).segment)===e},[we,oe,x]),qe=U.useMemo(()=>We?2:Math.max(10-M,4),[We,M]);U.useEffect(()=>()=>{MC(),eS(),UC()},[]),U.useEffect(()=>{("playing"===G||"practice"===G)&&!o&&!V.current&&(V.current="undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():`offline-${Date.now()}-${Math.random().toString(36).slice(2)}`,H.current=0),"landing"!==G&&"setup"!==G||(V.current="",H.current=0)},[G,o]);const Ve=U.useCallback(()=>{UC(),r(!1),T(!1),s(null),a(null),c(null),w(!1),f(!1),S(null),B.current=null,$.current=!1,W.current=null},[]),He=U.useCallback(async()=>{if(e&&o&&"playing"===G&&!ce){const e=b?"Leave this wagered match? You will forfeit your stake.":"Leave this match? This counts as a forfeit.";if(!window.confirm(e))return;try{const e=await $C({gameId:o.roomId,reason:"forfeit",claimWin:!1});(null==e?void 0:e.success)||console.error("[handleReturnToMenu] forfeit failed:",(null==e?void 0:e.error)??e)}catch(n){console.error("[handleReturnToMenu] forfeit error:",n)}}await Promise.all([MC().catch(()=>{}),eS().catch(()=>{})]),Ve(),L(!1),t(!1),E("neutral"),N({x:0,y:0}),O(50),j(0),F.current=!1,z.current=null,ve()},[ve,Ve,e,o,b,G,ce]);U.useEffect(()=>{if(!l||!o)return;const{player1:e,player2:t,currentPlayer:n,dartsThrown:r,currentTurnScore:i,dartPositions:s,status:a,winner:c}=l;if(e&&t){if("playing"!==G&&"gameOver"!==G&&Q("playing"),J([{id:e.id??"player1",name:e.name??"Player 1",flag:e.flag??"",score:"number"==typeof e.score?e.score:0,isAI:!1},{id:t.id??"player2",name:t.name??"Player 2",flag:t.flag??"",score:"number"==typeof t.score?t.score:0,isAI:!1}]),Z(n??0),te(r??0),re(i??0),r&&0!==r||E("neutral"),s){const e=Object.entries(s);e.sort((e,t)=>parseInt(e[0])-parseInt(t[0]));const t=e.map(([e,t])=>{const n=t;return{id:`dart_${e}`,x:n.x,y:n.y,score:0,multiplier:1,segment:""}});se(t)}else se([]);if("finished"===a&&void 0!==c){const n=0===c?e:t;ue({id:`player_${c}`,name:n.name,score:0,isAI:!1,flag:n.flag}),b&&o&&B.current!==o.roomId&&(B.current=o.roomId,async function(e){const t=RT();if(!t)return{success:!1,error:"Cloud Functions not available"};try{const n=vT(t,"settleGame"),r=(await n(e)).data;return r.success||console.error("[settleGame] Failed:",r.error),r}catch(n){return console.error("[settleGame] Error:",n.message),{success:!1,error:n.message||"Failed to settle game"}}}({gameId:o.roomId}).then(e=>{e.success&&e.winnerPayout&&S(e.winnerPayout)}).catch(e=>{console.error("[settleGame] Error:",e)})),"gameOver"!==G&&Q("gameOver")}}},[l,o,G,Q,J,Z,te,re,se,ue]);const Ge=U.useCallback(async()=>{if(n||k)try{await Promise.all([MC().catch(()=>{}),eS().catch(()=>{})])}finally{Ve()}else L(!1),f(!0)},[n,k,Ve]),Ke=U.useCallback(async()=>{f(!1),W.current=null;try{await eS().catch(()=>{}),r(!0),s(null),w(!1),$.current=!1,t(!0);LC({displayName:$e,flag:"",level:1},pe.gameMode,{onFound:e=>{const n=e.roomId,i=e.playerIndex;r(!1),a(e),FC(n,i,{onGameUpdate:e=>{c(e)},onOpponentDisconnect:e=>{UC(),a(null),c(null),t(!1),s(`${e} disconnected`),Q("landing")},onError:e=>{s(e)}})},onError:e=>{r(!1),s(e)},onTimeout:()=>{r(!1),s("No opponent found")}})}catch{r(!1),s("Failed to start matchmaking. Please try again.")}},[pe.gameMode,$e]),Qe=U.useCallback(async()=>{if(Ne<_)s("Insufficient balance");else{f(!1),W.current=null,T(!0),s(null),w(!0),$.current=!0,t(!0);try{await MC().catch(()=>{});XC({displayName:$e,flag:"",level:1},_,pe.gameMode,{onEscrowCreated:()=>{T(!1),r(!0)},onFound:e=>{const t=e.roomId,n=e.playerIndex;r(!1),T(!1),a(e),FC(t,n,{onGameUpdate:e=>{c(e)},onOpponentDisconnect:e=>{W.current!==t&&(W.current=t,UC(),a(null),c(null),$.current&&t?$C({gameId:t,reason:"disconnect",claimWin:!0}).then(t=>{t.success&&void 0!==t.winnerPayout?(S(t.winnerPayout),s(`${e} disconnected. You won ${t.winnerPayout} coins!`),Q("gameOver")):s(`${e} disconnected`)}).catch(t=>{console.error("[forfeitGame] Error:",t),s(`${e} disconnected`)}):s(`${e} disconnected`))},onError:e=>{s(e)}})},onError:e=>{r(!1),T(!1),w(!1),$.current=!1,s(e)},onTimeout:e=>{r(!1),T(!1),w(!1),$.current=!1,s(e?"No opponent found. Coin refund pending - will be processed shortly.":"No opponent found")}})}catch{T(!1),w(!1),$.current=!1,s("Failed to start matchmaking. Please try again.")}}},[Ne,_,pe.gameMode,$e]),Ye=U.useCallback(()=>{f(!1)},[]),Je=U.useCallback(async()=>{await Ke()},[Ke]),Xe=U.useRef(null),Ze=U.useCallback(()=>{if(!V.current||o)return void(Xe.current=Math.random);const e=function(e,t,n){let r=0;for(let i=0;i<e.length;i++)r=(r<<5)-r+e.charCodeAt(i)|0;return r^1e3*t+n|0}(V.current,Math.floor(H.current/3),H.current%3);Xe.current=function(e){let t=e;return function(){t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}(e)},[o]),et=U.useCallback(async(t,n,r,i)=>{var s,a;if(!("playing"===G||"practice"===G)||ee>=3)return;if(u)return;if(e&&!o)return void console.log("[handleBoardClick] Online session ended, blocking throw");if(o){if(!l)return void console.warn("[handleBoardClick] No game snapshot yet");if(X!==o.playerIndex)return void console.log("[handleBoardClick] Not our turn");try{d(!0);const e={gameId:o.roomId,dartPosition:{x:t,y:n}};void 0!==r&&void 0!==i&&(e.aimPoint=r,e.powerValue=i);const l=await async function(e){const t=RT();if(!t)return console.error("[submitThrow] Cloud Functions not available"),null;const n=vT(t,"submitThrow");let r=null;for(let s=0;s<3;s++)try{console.log(`[submitThrow] Attempt ${s+1}:`,e.dartPosition);const t=(await n(e)).data;return t.success?(console.log("[submitThrow] Accepted:",t.label,t.score,"pts"),t):(console.error("[submitThrow] Rejected by server:",t.error),null)}catch(i){if(r=i,console.error(`[submitThrow] Attempt ${s+1} failed:`,i.message),"functions/failed-precondition"===i.code||"functions/permission-denied"===i.code)return null;s<2&&await new Promise(e=>setTimeout(e,200*(s+1)))}return console.error("[submitThrow] All retries failed:",r),null}(e);if(l){if(F.current){const e=!!(null==l?void 0:l.label)&&l.label.startsWith("T"),t=!!(null==l?void 0:l.label)&&l.label.startsWith("D"),n="BULL"===(null==l?void 0:l.label),r=!!(null==l?void 0:l.label)&&!e&&!t&&"MISS"!==l.label&&"BULL"!==l.label;if(e)j(e=>e+3);else if(t||n){const e=Sd(z.current??0);e&&l.label===e||j(e=>e+1.5)}else r&&j(e=>e+1.5)}l.rhythm&&E(l.rhythm),0===l.score?Te("miss"):(null==(s=l.label)?void 0:s.startsWith("T"))?Te("triple"):(null==(a=l.label)?void 0:a.startsWith("D"))?Te("double"):"BULL"===l.label?Te("bull"):Te("hit")}else console.warn("[handleBoardClick] submitThrow failed")}finally{d(!1)}return}const c=ye(t,n);if(F.current)if(3===c.multiplier)j(e=>e+3);else if(2===c.multiplier||"BULL"===c.segment){const e=Sd(z.current??0);e&&c.segment===e||j(e=>e+1.5)}else 1===c.multiplier&&c.score>0&&j(e=>e+1.5);H.current+=1,Xe.current=null,c.isBust?Te("bust"):0===c.score?Te("miss"):3===c.multiplier?Te("triple"):2===c.multiplier?Te("double"):"BULL"===c.segment?Te("bull"):Te("hit"),ne+c.score===180&&Te("180"),ee+1>=3&&!c.isBust&&setTimeout(()=>_e(),1e3)},[G,ee,ye,Te,ne,_e,o,u,l,X,e]),tt=U.useMemo(()=>{var e;return"playing"===G&&!o&&!ce&&!!(null==(e=Y[X])?void 0:e.isAI)},[G,o,ce,Y,X]),nt=U.useCallback(e=>{if(tt)return;Te("throw");const t=oe.x+x.x,n=oe.y+x.y,r={x:t,y:n},i=vd(e,qe);if(z.current=(null==we?void 0:we.score)??null,F.current=i,o)et(t,n,r,e);else{const r=Xe.current??Math.random;let i,o;{const{left:a,right:l}={left:50-(s=qe)/2,right:50+s/2},c=function(e,t,n,r,i,s){const o=Rd(e,t),a=function(e,t,n){if(e>t&&e<n)return"perfect";const r=e<=t?t-e:e-n;return r<=6?"slight":r<=12?"medium":r<=22?"wide":"scatter"}(n,r,i);if("MISS"===o.ring){const e=Ld(o,s);return{x:e.x,y:e.y,segment:o,label:"MISS",tier:a}}if("perfect"===a){const e=Ld(o,s);return{x:e.x,y:e.y,segment:o,label:Od(o),tier:a}}const l=function(e,t,n){return e>t&&e<n?"neutral":e<=t?"weak":"strong"}(n,r,i),c=Md(o,a,l);let u=jd(c,s),d=Ld(u,s),h=Rd(d.x,d.y),f=0;for(;Ad(h,o)&&f<5;)u=jd(c,s),d=Ld(u,s),h=Rd(d.x,d.y),f++;return Ad(h,o)&&(d=Ld({ring:"MISS"},s),h={ring:"MISS"}),{x:d.x,y:d.y,segment:h,label:Od(h),tier:a}}(t,n,e,a,l,r);i=c.x,o=c.y}et(i,o)}var s},[tt,Te,o,oe,x,qe,et,A,we]),{power:rt,isCharging:it,handlers:st}=function(e={}){const{onRelease:t,disabled:n=!1}=e,[r,i]=U.useState(0),[s,o]=U.useState(!1),a=U.useRef(null),l=U.useRef(0),c=U.useRef("up"),u=U.useRef(null),d=U.useRef(!1),h=U.useCallback(()=>{a.current&&(clearInterval(a.current),a.current=null)},[]),f=U.useCallback(e=>{if(!n&&!s){try{e.target.setPointerCapture(e.pointerId),u.current=e.pointerId}catch{}a.current&&clearInterval(a.current),d.current=!1,o(!0),i(0),l.current=0,c.current="up",a.current=setInterval(()=>{"up"===c.current?(l.current+=2,l.current>=100&&(l.current=100,c.current="down")):(l.current-=2,l.current<=0&&(l.current=0,c.current="up")),i(l.current)},20)}},[n,s]),p=U.useCallback(e=>{if(!s||d.current)return;if(e&&null!==u.current)try{e.target.releasePointerCapture(u.current)}catch{}u.current=null,d.current=!0,h(),o(!1);const n=l.current;null==t||t(n),setTimeout(()=>{i(0),l.current=0,c.current="up"},500)},[s,h,t]),m=U.useCallback(()=>{s&&(u.current=null,h(),o(!1),i(0),l.current=0,c.current="up")},[s,h]),g=U.useCallback(e=>{s&&m()},[s,m]),y=U.useCallback(e=>{s&&(e.preventDefault(),m())},[s,m]),_=U.useCallback(()=>{h(),i(0),l.current=0,c.current="up",o(!1),d.current=!1,u.current=null},[h]);return U.useEffect(()=>()=>h(),[h]),U.useEffect(()=>{const e=()=>{s&&m()},t=()=>{document.hidden&&s&&m()};return window.addEventListener("blur",e),document.addEventListener("visibilitychange",t),()=>{window.removeEventListener("blur",e),document.removeEventListener("visibilitychange",t)}},[s,m]),{power:r,isCharging:s,handlers:{onPointerDown:f,onPointerUp:p,onPointerCancel:()=>m(),onPointerLeave:g,onContextMenu:y},reset:_}}({onRelease:nt,disabled:ee>=3||!!ce||tt}),ot=U.useCallback(e=>{tt||(Ze(),st.onPointerDown(e))},[tt,Ze,st]),at=U.useCallback((e,t)=>{("playing"===G||"practice"===G)&&(tt||ae({x:e,y:t}))},[G,ae,tt]);U.useEffect(()=>{0===ee&&(j(0),F.current=!1,z.current=null)},[ee]),U.useEffect(()=>{j(0),F.current=!1,z.current=null},[X]),U.useEffect(()=>{if(o||"playing"!==G||!we)return void N({x:0,y:0});const e=function(e,t,n,r,i,s=Fd){return void 0===r?{shouldWobble:!1,reason:"none"}:e>=s.skill180Threshold&&2===n&&function(e){return 2===e.length&&e.every(e=>"20"===e.segment&&3===e.multiplier)}(t)?{shouldWobble:!0,reason:"180_attempt"}:e>=s.skillCheckoutThreshold&&Ud(r)&&zd(i,r,s.aimTolerancePx)?{shouldWobble:!0,reason:"checkout_double"}:{shouldWobble:!1,reason:"none"}}(A,be,ee,we.score,oe,Fd);if(e.shouldWobble&&!it){const e=setInterval(()=>{N(function(e,t=Math.random){return{x:(t()-.5)*e,y:(t()-.5)*e}}(Fd.wobbleAmount))},Fd.wobbleInterval);return()=>{clearInterval(e),N({x:0,y:0})}}N({x:0,y:0})},[o,G,we,be,ee,oe,it,A]),U.useEffect(()=>{if("playing"!==G)return;if(o)return;if(ce)return;if(ee>=3)return;if(u)return;if(it)return;const e=Y[X];if(!(null==e?void 0:e.isAI))return;if(q.current)return;const t=function(e){switch(e){case"easy":return 2e3+1500*Math.random();case"medium":return 1500+1e3*Math.random();case"hard":return 1e3+800*Math.random();case"expert":return 800+600*Math.random();default:return 1500}}(e.aiDifficulty||"medium");return q.current=setTimeout(()=>{const e=Y[X];if(!("playing"===G&&!o&&!ce&&(null==e?void 0:e.isAI)&&ee<3&&!u&&!it))return void(q.current=null);const t=e.aiDifficulty||"medium",n=dC(uC(t,e.score),t);F.current=!1,z.current=null,Te("throw"),et(n.x,n.y),q.current=null},t),()=>{q.current&&(clearTimeout(q.current),q.current=null)}},[G,o,ce,Y,X,ee,u,it,Te,et]),U.useEffect(()=>{"gameOver"!==ke.current&&"gameOver"===G&&ce&&Te("checkout"),ke.current=G},[G,ce,Te]);const lt=U.useCallback(e=>{console.log("[Toast]",e)},[]),ct=U.useCallback(()=>{Q("profile")},[Q]),ut=U.useCallback(()=>{y(!0)},[]),dt=U.useCallback(()=>{m(!0)},[]),ht=U.useCallback(()=>{me(e=>{const t=(e.names??[]).slice(0,2),n=(e.flags??[]).slice(0,2);return{...e,count:2,names:[t[0]??"Player 1","AI"],aiPlayers:[!1,!0],aiDifficulty:[null,"medium"],flags:[n[0]??"",""],legsPerSet:3,setsToWin:2}}),L(!0),t(!1),j(0),F.current=!1,z.current=null,Q("setup")},[me,Q]),ft=U.useCallback(()=>{me(e=>({...e,count:1,aiPlayers:[!1],aiDifficulty:[null]})),L(!1),t(!1),j(0),F.current=!1,z.current=null,Q("practice")},[me,Q]);return"landing"===G?K.jsxs("div",{className:"app",children:[K.jsx(iS,{user:Ae,isAnonymous:Me,authLoading:Oe,signInWithGoogle:je,signInWithFacebook:Fe,signInWithApple:Ue,signOut:ze,coinBalance:Ne,dailyBonusAvailable:Pe,walletLoading:Re,isClaimingBonus:De,onClaimBonus:Le,onOpenShop:dt,soundEnabled:Ce,onSoundToggle:Se,onOpenThemeSelector:ut,onOpenProfile:ct,isSearching:n,isCreatingEscrow:k,errorText:i,onPlayOnline:Ge,onPlayAI:ht,onPractice:ft,onShowToast:lt,profileDisplayName:$e}),h&&K.jsx(ZT,{coinBalance:Ne,selectedStake:_,onSelectStake:v,onConfirm:Qe,onPlayFree:Je,onClose:Ye,isLoading:k}),p&&K.jsx(iC,{coinBalance:Ne,onClose:()=>m(!1)}),g&&K.jsx(oC,{currentThemeId:Ee,onSelectTheme:e=>{xe(e),y(!1)},onClose:()=>y(!1)})]}):"setup"===G?K.jsx("div",{className:"app",children:K.jsxs("div",{className:"setup",children:[K.jsx("h2",{className:"setup__title",children:D?"Play vs AI":"Game Setup"}),K.jsxs("div",{className:"setup__options",children:[!D&&K.jsxs("div",{className:"setup__option",children:[K.jsx("label",{className:"setup__label",children:"Players"}),K.jsx("div",{className:"setup__buttons",children:[1,2].map(e=>K.jsx("button",{className:"setup__btn "+(pe.count===e?"setup__btn--active":""),onClick:()=>me(t=>({...t,count:e})),children:e},e))})]}),K.jsxs("div",{className:"setup__option",children:[K.jsx("label",{className:"setup__label",children:"Game Mode"}),K.jsx("div",{className:"setup__buttons",children:[301,501].map(e=>K.jsx("button",{className:"setup__btn "+(pe.gameMode===e?"setup__btn--active":""),onClick:()=>me(t=>({...t,gameMode:e})),children:e},e))})]}),!D&&2===pe.count&&K.jsxs("div",{className:"setup__option",children:[K.jsx("label",{className:"setup__label",children:"Player 2"}),K.jsxs("div",{className:"setup__buttons",children:[K.jsx("button",{className:"setup__btn "+(pe.aiPlayers[1]?"":"setup__btn--active"),onClick:()=>me(e=>({...e,aiPlayers:[!1,!1],aiDifficulty:[null,null]})),children:"Human"}),K.jsx("button",{className:"setup__btn "+(pe.aiPlayers[1]?"setup__btn--active":""),onClick:()=>me(e=>({...e,aiPlayers:[!1,!0],aiDifficulty:[null,"medium"]})),children:"AI"})]})]}),D?K.jsx("div",{className:"setup__group",children:K.jsx(lC,{value:pe.aiDifficulty[1]??"medium",onChange:e=>{me(t=>({...t,aiPlayers:[!1,!0],aiDifficulty:[t.aiDifficulty[0],e]}))}})}):2===pe.count&&pe.aiPlayers[1]&&K.jsx("div",{className:"setup__group",children:K.jsx(lC,{value:P,onChange:e=>{R(e),pe.aiPlayers[1]&&me(t=>({...t,aiDifficulty:[t.aiDifficulty[0],e]}))}})}),D&&K.jsxs("div",{className:"setup__option",children:[K.jsx("label",{className:"setup__label",children:"Sets"}),K.jsx("div",{className:"setup__buttons",children:[{label:"Best of 1",value:1},{label:"Best of 3",value:2},{label:"Best of 5",value:3},{label:"Best of 7",value:4}].map(e=>K.jsx("button",{className:"setup__btn "+(pe.setsToWin===e.value?"setup__btn--active":""),onClick:()=>me(t=>({...t,setsToWin:e.value})),children:e.label},e.label))})]})]}),K.jsxs("div",{className:"setup__actions",children:[K.jsx("button",{className:"btn btn-ghost",onClick:()=>{L(!1),Q("landing")},children:"Back"}),K.jsx("button",{className:"btn btn-primary",onClick:()=>{t(!1);const e=D?pe.aiDifficulty[1]??"medium":P;O(function(e){if(!e)return 50;const t=aC.find(t=>t.key===e);return(null==t?void 0:t.skillLevel)??50}(e)),j(0),F.current=!1,z.current=null,ge()},children:"Start Game"})]})]})}):"profile"===G?K.jsx("div",{className:"app",children:K.jsx(tC,{onClose:()=>Q("landing")})}):"playing"===G||"practice"===G?K.jsx("div",{className:"app",children:K.jsxs("div",{className:"game",children:[K.jsxs("div",{className:"game__sidebar game__sidebar--left",children:[K.jsx(_d,{players:Y,currentPlayerIndex:X,dartsThrown:ee,currentTurnScore:ne,checkout:de,legScores:he,setScores:fe,gameStats:le,showStats:!0}),K.jsx("button",{className:"btn btn-ghost game__quit",onClick:He,children:"Quit Game"})]}),K.jsxs("div",{className:"game__board",style:tt?{pointerEvents:"none"}:void 0,children:[K.jsx(yd,{theme:Ie,dartPositions:ie,aimPosition:oe,aimWobble:x,showAimCursor:!it,onBoardMove:at,onPointerDown:ot,onPointerUp:st.onPointerUp,onPointerCancel:st.onPointerCancel,onPointerLeave:st.onPointerLeave,onContextMenu:st.onContextMenu,disabled:ee>=3||!!ce||tt}),o&&K.jsx(kd,{state:I}),K.jsxs("div",{style:{width:"min(400px, 85vw)",marginTop:"20px"},children:[K.jsx(bd,{power:rt,isCharging:it,perfectZoneWidth:qe}),K.jsx("p",{style:{color:"var(--color-text-muted)",marginTop:"15px",fontSize:"13px",textAlign:"center"},children:it?"Release to throw!":"Hold board to charge, release to throw"})]}),K.jsx("div",{className:"game__controls",children:K.jsx("button",{className:"btn btn-primary game__throw-btn",onPointerDown:ot,onPointerUp:st.onPointerUp,onPointerCancel:st.onPointerCancel,onPointerLeave:st.onPointerLeave,onContextMenu:st.onContextMenu,disabled:ee>=3||!!ce||tt,children:it?"Release!":"Hold to Throw"})})]}),K.jsx("div",{className:"game__sidebar game__sidebar--right",children:K.jsxs("div",{className:"history-panel",children:[K.jsx("h3",{className:"history-panel__title",children:"HISTORY"}),K.jsx("div",{className:"history-panel__content",children:0===be.length?K.jsx("p",{className:"history-panel__empty",children:"No throws yet"}):K.jsx("ul",{className:"history-panel__list",children:be.map((e,t)=>K.jsxs("li",{className:"history-panel__item",children:[e.segment," - ",e.score]},t))})})]})})]})}):"gameOver"===G&&ce?K.jsx("div",{className:"app",children:K.jsxs("div",{className:"game-over",children:[K.jsx("h2",{className:"game-over__title",children:"Game Over!"}),K.jsxs("p",{className:"game-over__winner",children:[K.jsx("span",{className:"game-over__flag",children:ce.flag}),ce.name," Wins!"]}),null!==C&&K.jsxs("p",{className:"game-over__prize",children:[K.jsx(KT,{size:20}),K.jsxs("span",{children:["Won ",C," coins!"]})]}),K.jsxs("div",{className:"game-over__actions",children:[K.jsx("button",{className:"btn btn-primary",onClick:()=>{j(0),F.current=!1,z.current=null,ge()},children:"Play Again"}),K.jsx("button",{className:"btn btn-ghost",onClick:He,children:"Main Menu"})]})]})}):K.jsx("div",{className:"app",children:K.jsx("div",{className:"loading",children:"Loading..."})})}Q.createRoot(document.getElementById("root")).render(K.jsx(z.StrictMode,{children:K.jsx(sS,{})}));
